function textualPdfToText(t,r,l,s){function n(){var e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.worker.min.js",e.getDocument({data:t}).promise.then(function(t){for(var n=[],m=t.numPages,e=1;e<=m;e++)n.push(e);return Promise.all(n.map(function(f){return t.getPage(f).then(function(e){return e.getTextContent().then(function(e){if(null!=e.items){for(var t="",n=null,r=e.items,s=r.length,o=0;o<s;o++){var i,c,a,d,u=r[o];null!=n&&" "!=n.str[n.str.length-1]&&(i=u.transform[5],c=n.transform[5],a=u.transform[4],d=n.transform[4],i<c?t+="\r\n":a!=d&&null==n.str.match(/^(\s?[a-zA-Z])$|^(.+\s[a-zA-Z])$/)&&(t+=" ")),t+=u.str,n=u}return t+"\n\n"}l&&l({status:"recognizing",progress:f/m})},function(e){console.error(e)})},function(e){console.error(e)})})).then(async function(e){0<e.join().match(/\w/g)?.length?r(e.join()):await Promise.all(n.map(function(e){return t.getPage(e).then(function(e){var t=e.getViewport({scale:1}),n=s||document.createElement("canvas"),r=n.getContext("2d");return n.height=t.height,n.width=t.width,e.render({canvasContext:r,viewport:t}).promise.then(async function(){return worker.recognize(n.toDataURL("image/png")).then(function({data:e}){return e},function(e){console.error(e)})},function(e){console.error(e)})},function(e){console.error(e)})})).then(function(e){r(e)},function(e){console.error(e)})},function(e){console.error(e)})},function(e){console.error(e)})}!function e(){"undefined"==typeof pdfjsLib?checkOCRLibrary("https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.min.js",e):"undefined"==typeof Tesseract?checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",e):initTesseract(n,l)}()}function docxToText(e,t){function n(){mammoth.extractRawText({arrayBuffer:e}).then(function(e){t(e.value)})}"undefined"==typeof mammoth?checkOCRLibrary("https://cdn.jsdelivr.net/npm/mammoth/mammoth.browser.min.js",n):n()}function imgToText(e,t,n){function r(){worker.recognize(e).then(function({data:e}){t(e)})}function s(){"undefined"==typeof Tesseract?checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",s):initTesseract(r,n)}s()}function initTesseract(t,n){function e(){if("undefined"==typeof Tesseract)checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",e);else if("undefined"==typeof worker){let e=Tesseract.createWorker({logger:n,workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js/dist/worker.min.js",corePath:"https://cdn.jsdelivr.net/npm/tesseract.js-core/tesseract-core.wasm.js"});(async()=>{await e.load(),await e.loadLanguage("eng"),await e.initialize("eng"),await e.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0"}),t()})()}else t()}e()}function checkOCRLibrary(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,document.body.appendChild(n),n.onload=t}