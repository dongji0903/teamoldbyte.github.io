function getTextWidth(e,t){var i=(getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return i.font=t,i.measureText(e).width}let invalidEnglishRegex=/[^\u0021-\u007E\s\u2010-\u2015\u2018-\u201A\u201C-\u201D°℃℉]/gi,invalidEnglishString="[^\\u0021-\\u007E\\s\\u2010-\\u2015\\u2018-\\u201A\\u201C-\\u201D°℃℉]";((e,t)=>{t.quoteNormalize=function(){return this.replace(/[“‟”„″‶❝❞〝〞＂]/gi,'"').replace(/[´＇｀`‘’‛′‵❛❜]/gi,"'").replace(/[‚،﹐﹑，､]/gi,",").replace(/[\u00A0\u2000-\u200B\u202F\u205F]/gi," ").replace(/[−–‒­]/g,"-").replace(/─/g,"—")},t.capitalize1st=function(){return this.charAt(0).toUpperCase()+this.slice(1)},t.parseToSentences=function(){return this.quoteNormalize().concatLines().insertSpace().shrinkSpaces().splitSentences()},t.concatLines=function(){return this.replace(/[\r\n]/g," ").trim()},t.insertSpace=function(){return this.replace(/(\b[a-z]\w*\W)([A-Z]\w*)/g,"$1 $2")},t.shrinkSpaces=function(){return this.replace(/\s+/g," ").replace(/\s+([,.?!;:]+)/g,"$1")},t.sentenceNormalize=function(){return this.quoteNormalize().concatLines().shrinkSpaces().capitalize1st()},t.splitSentences=function(){try{return this.split(new RegExp('(?<!\\w\\.\\w.)(?<![A-Z][a-z]\\.)(?<! [A-Z]\\.)(?<=[\\.\\!\\?"])\\s',"gm"))}catch(e){if(console.warn('This browser does not support the RegExp "(?<=X)" and "(?<!X)", so it takes longer than other browsers...'),!this.match(/\s/))return[this];var n,s=[];let t=0,i=this.matchAll(/\s/gm);for(n of i){var r=this.charAt(n.index-1);!/[\.\!\?]/.test(r)||/\w\.\w./.test(r)||/[A-Z][a-z]\./.test(r)||/ [A-Z]\./.test(r)||(s.push(this.substring(t,n.index)),t=n.index+1)}return t<=this.length+1&&s.push(this.substring(t)),s}},t.isSentence=function(){try{var e=this.match(new RegExp("(?<!\\w\\.\\w.)(?<![A-Z][a-z]\\.)(?<=[\\.\\!\\?])","g"));return/[A-Z\d'"]/.test(this.charAt())&&null!=e&&e.index==this.length}catch(e){var t;if(console.warn('This browser does not support the RegExp "(?<=X)" and "(?<!X)", so it takes longer than other browsers...'),/[A-Z\d'"]/.test(this.charAt())&&/[\.\?\!]['"]?$/.test(this))for(t of this.matchAll(/\S+[\.\?\!]['"]?/g))if(!/\w\.\w.$/.test(t[0])&&!/[A-Z][a-z]\.$/.test(t[0]))return t.index+t[0].length==this.length;return!1}},e.extractHighlightInfo=function(e,t){let i=0,n=[],s;for(;null!=(s=/\s*([‚،﹐﹑，､])|([“‟”„″‶❝❞〝〞＂])|([´＇｀`‘’‛′‵❛❜])|([−–‒­])|(─)|\s+([,.!?:;])|((?:\w[!?;]\w+|[A-z][:,]\w+|[0-9][:,][A-z]+)|(?:(?:\w[!?;]\w+|[A-z][:,]\w+|[0-9][:,][A-z]+)|(?:[A-z]\.(?:[A-Z][A-z]{1,}|\d+|I'[a-z]+))|\d\.[A-Z][A-z]*) )|(?:'\s+((?:s|re|m|d|t|ll|ve)\s))|(?:\s+'((?:s|re|m|d|t|ll|ve)\s))/.exec(e));)for(i=1;i<10;i++)if(null!=s[i]){switch(i){case 1:t>=s.index&&(t-=s[0].length-1),n.push({highlight:[s.index,s.index+1]}),e=e.replace(s[0],",");break;case 2:n.push({highlight:[s.index,s.index+1]}),e=e.replace(s[0],'"');break;case 3:n.push({highlight:[s.index,s.index+1]}),e=e.replace(s[0],"'");break;case 4:n.push({highlight:[s.index,s.index+1]}),e=e.replace(s[0],"-");break;case 5:n.push({highlight:[s.index,s.index+1]}),e=e.replace(s[0],"—");break;case 6:t>=s.index&&(t-=s[0].length-1),n.push({highlight:[s.index,s.index+2]}),e=e.replace(s[0],s[i]);break;case 7:t>=s.index+1&&(t+=1),n.push({highlight:[s.index+2,s.index+3]}),e=e.replace(s[0],s[i].substring(0,2)+" "+s[i].substring(2));break;case 8:case 9:t>=s.index&&(t-=s[0].length-1-s[i].length),n.push({highlight:[s.index,s.index+s[i].length]}),e=e.replace(s[0],"'"+s[i])}break}return{input:e=e.replaceAll(invalidEnglishRegex,"×"),inputCursor:t,arr:n}}})(this,String.prototype);