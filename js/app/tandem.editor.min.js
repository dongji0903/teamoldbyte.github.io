!function(C,b,y){let a=[],s=[],v,f,c,l,x,d,w,k,E,P;const m={49:'[value="s"]',50:'[value="rs"]',51:'[value="ss"]',52:'[value="v"]',53:'[value="o"]',54:'[value="io"]',55:'[value="do"]',56:'[value="ro"]',57:'[value="po"]',48:'[value="c"]',189:'[value="oc"]',187:'[value="a"]',81:'[value="tor"]',87:'[value="to"]',69:'[value="ger"]',82:'[value="go"]',84:'[value="ptc"]',89:'[value="ptco"]',85:'[value="ptcphr"]',65:'[value="phr"]',83:'[value="advphr"]',68:'[value="adjphr"]',70:'[value="conj"]',71:'[value="ccls"]',72:'[value="pcls"]',74:'[value="ncls"]',75:'[value="acls"]',76:'[value="advcls"]',186:'[value="pcl"]',90:'[value="mod"]',88:'[value="erasing"]',67:'[value="comment"]',ctrlS:'[value="save"]',ctrlZ:'[value="undo"]:not([disabled])',ctrlY:'[value="redo"]:not([disabled])'};let u,p=0,g=0,R={};const S={rs:"s",io:"o",do:"o",ro:"o"},F={s:"S",rs:"(진)s",ss:"(의)s",v:"V",o:"O",io:"i.o.",do:"d.o.",po:"(전)o",ro:"(진)o",to:"(부)o",go:"(동)o",ptco:"(분)o",appo:"동격",c:"C",oc:"o.c.",m:"M",a:"A"},N={a:"부사적 보충어",ss:"의미상 주어",tor:"to부정사",ger:"동명사",ptc:"분사",to:"to부정사 목적어",go:"동명사 목적어",ptco:"분사 목적어",appo:"동격 =>",ncls:{s:"주어절",o:"목적어절",c:"보어절",oc:"목적보어절",m:"관계절",po:"전치사 목적어절",to:"to부정사 목적어절",go:"동명사 목적어절",ptco:"분사 목적어절",appo:"동격 =>",interr:"의문사절 접속사",nrp:"명사적 관계사",nclc:""},acls:"형용사절",advcls:"부사절",phr:"전치사구",adjphr:"형용사구",advphr:"부사구",ptcphr:"부사구(분사구문)",ccls:"등위절",pcls:"병렬절",pcl:"삽입절"};function A(e){var t=e.dataset.seq;a.push([t,e.innerHTML]),s=[],C('.svoc-toolbar [value="undo"]').prop("disabled",!1)}function T(e){C(e).find(".sem").filter((e,t)=>0==t.textContent.length).remove(),y.checkPOSDepth(e),y.wrapWithBracket(e),y.splitInners(e),y.trimTextContent(e),y.correctMarkLine(e),C(".edit-svoc").focus()}C.fn.svoceditor=async function(e,t,o){return R={forNew:e,saveCallback:t,cancelCallback:o},"close"==e?(void 0!==v&&v.detach(),void 0!==f&&f.detach()):(void 0===v&&(await C.get("https://static.findsvoc.com/css/app/tandem.editor.min.css",e=>{var t=b.createElement("style");t.innerHTML=e,b.head.append(t)}),await C.get("https://static.findsvoc.com/fragment/tandem/editor_template.min.html",e=>{v=C(e).find("#js-edit-toolbar"),x=C(e).find(".cls-role-menu"),d=C(e).find(".cls-conj-menu"),w=C(e).find(".tor-role-menu"),k=C(e).find(".ger-role-menu"),E=C(e).find(".ptc-role-menu"),P=C(e).find(".edit-comment"),v.find('[data-bs-toggle="tooltip"]').click(function(){bootstrap?.Tooltip?.getInstance(this)?.hide()}).tooltip({trigger:"hover"});const n=parseFloat(getComputedStyle(b.body).fontSize);C(b).on("keydown",function(e){C(e.target).is("input")&&0<C(e.target).closest(".edit-comment").length&&27==e.keyCode?C(e.target.form).find("button:eq(1)").trigger("click"):C(".edit-svoc")?.is(":focus")&&((e.ctrlKey||e.metaKey)&&65<=e.keyCode&&e.keyCode<=90?m["ctrl"+e.key.toUpperCase()]&&(e.preventDefault(),v.find(m["ctrl"+e.key.toUpperCase()]).trigger("click")):C(e.target).is("input")||null==m[e.keyCode]||v.find(m[e.keyCode]).trigger("click"))}),v.on("click",'[value="save"]',function(){var t,e=this.closest(".edit-svoc").querySelector(".semantics-result");for(C(e).closest(".edit-svoc").addClass("pe-none").find(".svoc-editor-badge").html('<i class="fas fa-spinner fa-spin"></i> 저장중').animate({width:"100%"});null!=e.querySelector(".brkt,.line-end,canvas.curved_arrow");)e.querySelector(".brkt,.line-end,canvas.curved_arrow").remove();t=e,requestAnimationFrame(async function(){var e=await y.getSvocBytes(t);y.wrapWithBracket(t),y.correctMarkLine(t),a=[],s=[],v.find('[value="undo"], [value="redo"]').prop("disabled",!0),R.saveCallback(e),C(".svoc-editor-badge").html('<i class="fas fa-check"></i> 저장됨'),setTimeout(()=>{f.text(""),C(t).unwrap(),v.find('[value="undo"], [value="redo"]').prop("disabled",!0),v.find("button").removeClass("active").each((e,t)=>{bootstrap?.Tooltip?.getInstance(t)?.hide()}),C(".js-edit-svoc,.js-del-svoc,.js-add-svoc").prop("disabled",!1),C(".svoc-editor-badge,.svoc-editor-emblem").remove(),v.detach(),f.detach()},2e3)})}).on("click",'[value="close"]',function(){var e,t;confirm("수정내역은 저장되지 않습니다.\n편집모드를 종료하시겠습니까?")&&(e=C(this).closest(".edit-svoc").find(".semantics-result"),0<a.length&&(t=a.shift(),e.html(t[1]),C(".erasing-target").toggleClass("erasing-target"),C(".mod-start,.mod-indicator").remove(),y.drawConnections(e[0]),e.animate({opacity:.5},100).animate({opacity:1},100)),t=e,v.find('[value="undo"], [value="redo"]').prop("disabled",!0),v.find("button").removeClass("active").each((e,t)=>{bootstrap?.Tooltip?.getInstance(t)?.hide()}),t.unwrap(),a=[],s=[],C(".svoc-editor-badge,.svoc-editor-emblem").remove(),v.detach(),f.detach(),R.cancelCallback())}).on("click","[data-mode]:not([disabled])",function(){if("undo"==this.dataset.mode)return!0;let e=getSelection(),t;if(C(".svoc-toolbar .active").add(this).toggleClass("active"),C(".erasing-target, .comment-target").removeClass("erasing-target comment-target"),C(".mod-start,.mod-indicator").remove(),C(this).is(".active")){var o=this.dataset.mode;switch(C(".edit-svoc").attr("data-mode",o),o){case"role":case"wrap":e.isCollapsed?f.text("적용 텍스트를 드래그 하세요."):(C(".edit-svoc").trigger("mouseup",this.value).attr("data-mode",null),C(this).removeClass("active"));break;case"erasing":f.html("지우려는 태그를 클릭 하세요.<br><h6>하위태그 모두 선택 : shift+클릭</h6>"),e.removeAllRanges();break;case"mod":f.text("수식어 위치를 클릭 하세요."),e.removeAllRanges();break;case"comment":f.text("문법 코멘트를 추가할 요소를 선택하세요."),e.removeAllRanges()}if(e.isCollapsed){if(b.caretPositionFromPoint)t=b.caretPositionFromPoint(p,g);else{if(!b.caretRangeFromPoint)return console.error("[This browser supports neither document.caretRangeFromPoint nor document.caretPositionFromPoint.]"),!1;t=b.caretRangeFromPoint(p,g)}let e=t.startContainer;for(;1!=e.nodeType;)e=e.parentNode;C(e).trigger("mouseover")}}else C(".edit-svoc").attr("data-mode",null),f.empty()}).on("click",'[value="undo"], [value="redo"]',function(e){var t;e.preventDefault(),("undo"==this.value||"redo"==this.value&&0<s.length)&&(this.classList.add("active"),e=("undo"==this.value?a:s).pop(),t=C(`.edit-svoc .semantics-result[data-seq="${e[0]}"]`),("undo"==this.value?s:a).push([t.attr("data-seq"),t.html()]),t.html(e[1]),C(".erasing-target").toggleClass("erasing-target"),C(".mod-start,.mod-indicator").remove(),y.drawConnections(t[0]),t.animate({opacity:.5},100).animate({opacity:1},100),C('.svoc-toolbar [value="undo"]').prop("disabled",0==a.length),C('.svoc-toolbar [value="redo"]').prop("disabled",0==s.length),setTimeout(()=>{this.classList.remove("active")},50))});let r=[],i=null,t=!1;function h(){C(b).on("mouseover",'[data-mode="comment"] .semantics-result .sem',function(e){null!=this.dataset.gc&&0!=this.dataset.gc.length||(e.stopPropagation(),this.classList.add("comment-target"))}).on("mouseout",'[data-mode="comment"] .semantics-result *',function(){C(".comment-target").removeClass("comment-target")})}C(b).on("mouseover",'[data-mode="erasing"] .semantics-result *',function(t,o){t.stopPropagation();var a=t.target;if(i=a,s(),C(a).is(".curved_arrow"))for(var e of a.classList)-1<e.indexOf("mfd")&&(C(this).siblings(".curved_arrow."+e).each(function(){r.push(this)}),r.push(C(".rcm.mfd-"+e.substring(3))[0]));function s(){if(null!=a){if(r.push(a),o||t.shiftKey)for(var e of a.getElementsByTagName("span"))r.push(e);a.textContent==a.parentElement.textContent?(a=a.parentElement,r.push(a)):0<a.children.length&&a.children[0].textContent==a.textContent&&r.push(a.children[0])}}null!=a.previousElementSibling&&C(a.previousElementSibling).is('[class*="-start"]:not([class*="cmnt-align-start"])')&&null!=a.nextElementSibling&&C(a.nextElementSibling).is('[class*="-end"]')&&(r.push(a.previousElementSibling),r.push(a.nextElementSibling)),-1<a.className.indexOf("-start")?(a=a.nextElementSibling,s(),null!=a&&null!=a.nextElementSibling&&(a=a.nextElementSibling,r.push(a))):-1<a.className.indexOf("-end")&&(a=a.previousElementSibling,s(),null!=a)&&null!=a.previousElementSibling&&(a=a.previousElementSibling,r.push(a)),r.forEach(function(e){e.classList.add("erasing-target")})}).on("mouseout",'[data-mode="erasing"] .semantics-result *',function(e){r.forEach(function(e){C(e).removeClass("erasing-target")}),r=[],i=null,e.stopPropagation()}).on("keydown keyup",function(e){("keydown"==e.type&&!t&&e.shiftKey||"keyup"==e.type&&t&&!e.shiftKey)&&(t=!t,C(b.body).toggleClass("shift",t),null!=i)&&C(i).trigger("mouseout").trigger("mouseover",[t])}).on("click",".erasing-target",function(e){var t=e.target.closest(".semantics-result")||e.target;t.closest('[data-mode="erasing"]')&&(A(t),r.forEach(function(e){0==e.textContent.length||e.matches(".brkt")?C(e).remove():C(e).contents().unwrap()})),C(t).find(".rcm").each(function(){for(var e of this.classList)-1<e.indexOf("mfd")&&0==C(`[data-mfd="${e.substring(4)}"]`).length&&C(this).contents().unwrap()}),C(t).find("[data-mfd]").each(function(){0==C(".rcm.mfd-"+this.dataset.mfd).length&&delete this.dataset.mfd}),e.shiftKey&&getSelection().removeAllRanges(),T(t)}).on("mouseup",'.edit-svoc[data-mode="role"], .edit-svoc[data-mode="wrap"]',function(e,t){e.stopPropagation();var e=v.find(".active").val(),o=getSelection(),a=o?.anchorNode?.parentElement?.closest(".semantics-result");if(!o.isCollapsed){if(A(a),"role"==this.dataset.mode){a=o;var s=t||e;const u=a.getRangeAt(0),p=b.createElement("span");p.className="sem "+(S[s]??s),null!=F[s]&&(p.dataset.rc=F[s],p.dataset.rcMin=F[s]);"string"==typeof N[s]&&(p.dataset.gc=N[s]);try{u.surroundContents(p)}catch(e){p.appendChild(u.extractContents()),u.insertNode(p)}u.detach(),a.removeAllRanges(),["tor","ptc"].includes(s)&&1==p.childElementCount&&[".adjphr",".advphr"].find(e=>p.firstElementChild.matches(e))&&y.swapParentAndChild(p,p.firstElementChild);a=C(p).closest(".semantics-result")[0];T(a)}else if("wrap"==this.dataset.mode){var n=o,r=t||e,i=n.getRangeAt(0),c=i.startContainer.nodeType===Node.TEXT_NODE?i.startContainer.parentNode:i.startContainer,l=c.closest(".semantics-result");switch(r){case"tor":case"ger":case"ptc":case"ncls":if(i.toString().length==c.closest(".sem")?.textContent?.length){var d=createElement({el:"span",class:"sem "+r,dataset:{gc:N[r]}});c.closest(".sem").matches(".s,.o,.po,.to,.go,.ptco,.c,.oc,.appo,.adjphr,.advphr")?"ncls"==r?(d.dataset.gc=N.ncls[Array.from(c.closest(".sem").classList).filter(e=>["s","o","po","to","go","ptco","c","oc","appo"].includes(e))[0]],C(c.closest(".sem")).wrap(d)):C(c.closest(".sem")).wrapInner(d):C(c.closest(".sem")).wrap(d),T(l)}else{if(["tor","ger","ptc"].includes(r)){d=createElement({el:"span",class:"sem "+r,dataset:{gc:N[r]}});try{i.surroundContents(d)}catch(e){d.appendChild(i.extractContents()),i.insertNode(d)}}var m=i.getClientRects()[0];C(b.body).append({ncls:x,tor:w,ger:k,ptc:E}[r].css("top",scrollY+m.top+m.height+"px").css("left",scrollX+m.left+"px").data("range",i))}break;case"acls":case"advcls":case"pcl":m=b.createElement("span");m.className="sem m",m.dataset.rc=F.m;try{i.surroundContents(m)}catch(e){m.appendChild(i.extractContents()),i.insertNode(m)}y.trimTextContent(l),i.selectNode(m);default:const g=b.createElement("span");g.classList.add("sem","pcl"==r?"advcls":r),N[r]&&(g.dataset.gc=N[r]);try{i.surroundContents(g)}catch(e){g.appendChild(i.extractContents()),i.insertNode(g)}i.detach(),n.removeAllRanges(),["adjphr","advphr"].includes(r)&&[".tor",".ptc"].some(e=>g.parentElement.matches(e))&&1===Array.from(g.parentElement.childNodes).filter(e=>0<e.textContent.length).length&&y.swapParentAndChild(g.parentElement,g),T(l)}}C(".edit-svoc").attr("data-mode",null),v.find(".active").removeClass("active"),f.empty()}}).on("click",".cls-role-menu button",function(){var e=this.value,t=createElement({el:"span",class:"sem "+(S[e]??e)}),o=(F[e]&&(t.dataset.rc=F[e]),x.data("range"));try{o.surroundContents(t)}catch(e){t.appendChild(o.extractContents()),o.insertNode(t)}var a=createElement({el:"span",class:"sem ncls",dataset:{gc:N.ncls[e]}});C(t).wrap(a),x.data("range",null).detach(),T(t.closest(".semantics-result")),"appo"==e?(o.detach(),getSelection().removeAllRanges(),C(t).parent().addClass("comment-target").trigger("click"),C(".edit-comment :text").val("동격 => ")):(a=o.getClientRects()[0],C(b.body).append(d.css("top",scrollY+a.top+a.height+"px").css("left",scrollX+a.left+"px").data("range",C(t).parent(".ncls"))),d.find('button[value="nclc"]').prop("checked",!0))}).on("click",".cls-conj-menu button",function(){var e=this.value,t=d.data("range");t.attr("data-gc",N.ncls[e]),getSelection().removeAllRanges(),d.data("range",null).detach(),T(t.closest(".semantics-result")[0])}).on("click",".tor-role-menu button,.ger-role-menu button,.ptc-role-menu button",function(){var e=this.value,t=this.closest(".tor-role-menu,.ger-role-menu,.ptc-role-menu").className.match(/(\w+)-role-menu/)[1],o={tor:w,ger:k,ptc:E}[t],a=createElement({el:"span",class:"sem "+(S[e]??e)}),s=(F[e]&&(a.dataset.rc=F[e]),["adjphr","advphr"].includes(e)&&N[e]&&(a.dataset.gc=N[e]),o.data("range"));try{s.surroundContents(a)}catch(e){a.appendChild(s.extractContents()),s.insertNode(a)}t=createElement({el:"span",class:"sem "+t,dataset:{gc:N[t]}});["adjphr","advphr"].includes(e)?C(a).wrapInner(t):C(a).wrap(t),s.detach(),getSelection().removeAllRanges(),o.data("range",null).detach(),T(a.closest(".semantics-result"))}).on("mouseup",function(e){(x.is(":visible")&&!e.target.closest(".cls-role-menu")||d.is(":visible")&&!e.target.closest(".cls-conj-menu")||w.is(":visible")&&!e.target.closest(".tor-role-menu")||k.is(":visible")&&!e.target.closest(".ger-role-menu")||E.is(":visible")&&!e.target.closest(".ptc-role-menu"))&&(getSelection().removeAllRanges(),x.data("range",null).detach(),d.data("range",null).detach(),w.data("range",null).detach(),k.data("range",null).detach(),E.data("range",null).detach())}).on("click",'.edit-svoc:not([data-mode="erasing"]):not([data-mode="mod"]):not([data-mode="comment"]) .sem',function(e){C(".edit-comment").remove();var o=this,a=("touchstart"==e.type?e.touches[0]:e).clientX,s=("touchstart"==e.type?e.touches[0]:e).clientY,n=this.getClientRects(),r=C(this).is(".odd")?1:0,i=C(this).is(".rcm")?1:0,c=r?-1:1,l=i?-1:1,d=["top","bottom"][r],m=["left","right"][i];for(let t of[{data:"rc",pseudo:"::before"},{data:"gc",pseudo:"::after"}]){var u=getComputedStyle(o,t.pseudo),p=parseFloat(u[d]),g=parseFloat(u[m]),h=parseFloat(u.width),u=parseFloat(u.height);if(null!=o.dataset[t.data]&&!isNaN(h)&&!isNaN(u)){p=n[r][d]+c*p,u=p+c*u,g=n[i?n.length-1:0][m]+l*g,h=g+l*h;if(Math.min(p,u,s)!=s&&Math.max(p,u,s)!=s&&Math.min(g,h,a)!=a&&Math.max(g,h,a)!=a){e.stopPropagation();const f=P.clone(!1);function v(e){16!=(16&f[0].compareDocumentPosition(e.target))&&(C(b).off("mousedown",v),f.remove(),C(".edit-svoc").focus())}f.find("input:text").val(o.dataset[t.data]),b.body.appendChild(f[0]),f.css("top","gc"==t.data?scrollY+Math.max(p,u)+"px":scrollY+Math.min(p,u)-f.height()-10+"px").css("left",scrollX+Math.min(g,h)+"px").find("input:text")[0].focus(),C(b).on("mousedown",v),f.find("form").on("submit",function(e){e.preventDefault(),A(o.closest(".semantics-result"));e=C(this).find("input").val().trim();0==e.length?delete o.dataset[t.data]:o.dataset[t.data]=e,C(b).off("mousedown",v),f.remove(),y.checkGCDepth(o.closest(".semantics-result")),C(".edit-svoc").focus()}),f.find("button:eq(1)").on("click",function(){C(b).off("mousedown",v),f.remove(),C(".edit-svoc").focus()});break}}}}).on("mouseover",'[data-mode="mod"] .semantics-result *',function(e){C(".mod-indicator").remove();var t=".cls,.acls,.ncls,.advcls,.phr,.tor,.ger,.adjphr,.ptc",t=C(this).is(t)?this:0==C(this).closest(t).length?null!=this.dataset.lv?this:null:C(this).closest(t)[0];if(null==t||t.textContent.trim().length<2||null!=t.dataset.mfd)return u=null,!1;e.stopPropagation(),u=t;e=b.createElement("div");e.className="mod-indicator",e.style.position="absolute",e.style.top=scrollY+t.getClientRects()[0].top-3*n+"px",e.style.left=scrollX+t.getClientRects()[0].left-.8*n+"px",e.textContent="↑",b.body.appendChild(e)}).on("mousemove",".edit-svoc .semantics-result",function(e){p=("touchstart"==e.type?e.touches[0]:e).clientX,g=("touchstart"==e.type?e.touches[0]:e).clientY;let t,o,a;if(0<C(e.target).closest('[data-mode="mod-end"] .semantics-result').length){C(".mod-indicator").remove();var s=b.createElement("div");if(s.className="mod-indicator",s.style.position="absolute",b.caretPositionFromPoint)o=b.caretPositionFromPoint(p,g);else{if(!b.caretRangeFromPoint)return console.error("[This browser supports neither document.caretRangeFromPoint nor document.caretPositionFromPoint.]"),!1;o=b.caretRangeFromPoint(p,g)}if("function"==typeof Selection.prototype.modify){if((t=getSelection()).removeAllRanges(),t.addRange(o),t.modify("move","backward","word"),t.modify("extend","forward","word"),0==t.rangeCount||null==t.toString().trim().match(/\w/))return t.removeAllRanges(),!1;if(a=t.getRangeAt(0).getClientRects()[0],t.removeAllRanges(),a.y>g||g>a.y+a.height)return!1}else if("function"==typeof Range.prototype.expand){if(o.expand("word"),null==o.toString().trim().match(/\w/))return!1;if(a=o.getClientRects()[0],o.detach(),a.y>g||g>a.y+a.height)return!1}else console.error("[This browser supports neither Selection.modify nor Range.expand.]");e.stopPropagation(),s.style.top=scrollY+a.top-3*n+"px",s.style.left=scrollX+a.right-n+"px",s.textContent="↓",b.body.appendChild(s)}}).on("click",'[data-mode="mod"] .semantics-result *',function(e){if(null==u)return!1;e.stopPropagation(),C(".mod-indicator").toggleClass("mod-indicator mod-start"),this.closest(".edit-svoc").dataset.mode="mod-end",C(".semantic-edit-guide-msg").text("피수식어 위치를 클릭 하세요.")}).on("click",'[data-mode="mod-end"] .semantics-result',function(e){if(0==C(".mod-indicator").length)return!1;e.stopPropagation(),C(".mod-start").remove(),A(this);var t,o=this.dataset.seq,a=0,s=(C(this).find(".rcm").each(function(){for(var e of this.classList)-1<e.indexOf("mfd")&&(a=Math.max(a,parseFloat(e.split("-")[2])))}),u.dataset.mfd=o+"-"+(a+1),b.createElement("span")),o=(s.className=`sem rcm mfd-${o}-`+(a+1),s.dataset.gc="수식",("touchstart"==e.type?e.touches[0]:e).clientX),e=("touchstart"==e.type?e.touches[0]:e).clientY;if(b.caretPositionFromPoint)t=b.caretPositionFromPoint(o,e);else{if(!b.caretRangeFromPoint)return console.error("[This browser supports neither document.caretRangeFromPoint nor document.caretPositionFromPoint.]"),!1;t=b.caretRangeFromPoint(o,e)}for((o=getSelection()).removeAllRanges(),o.addRange(t),o.modify("move","backward","word"),o.modify("extend","forward","word"),t=o.getRangeAt(0);t.toString().endsWith(" ");)t.setEnd(t.endContainer,t.endOffset-1);0==t.endOffset&&t.setEnd(t.startContainer,t.startContainer.data.length);try{t.surroundContents(s)}catch(e){s.appendChild(t.extractContents()),t.insertNode(s)}o.removeAllRanges(),u=null,C(".mod-indicator").remove(),C(".edit-svoc").attr("data-mode",null),v.find('[data-mode="mod"].active').removeClass("active"),f.empty(),y.checkGCDepth(this)}).on("click",".comment-target",function(e){const t=e.target.closest(".semantics-result")||e.target,o=this;C(b).off("mouseover",'[data-mode="comment"] .semantics-result .sem').off("mouseout",'[data-mode="comment"] .semantics-result *'),C(".edit-comment").remove();var e=o.getClientRects(),a=o.matches(".odd")?1:0,s=o.matches(".rcm")?1:0,n=a?-1:1,r=s?-1:1,i=["top","bottom"][a],c=["left","right"][s],l=getComputedStyle(o,"::after"),d=parseFloat(l[i]),m=parseFloat(l[c]),u=parseFloat(l.width),l=parseFloat(l.height),a=e[a][i]+n*d,i=a+n*l,d=e[s?e.length-1:0][c]+r*m,n=d+r*u;const p=P.clone(!1);function g(e){16!=(16&p[0].compareDocumentPosition(e.target))&&(C(b).off("mousedown",g),p.remove(),C(".edit-svoc").focus(),h())}b.body.appendChild(p[0]),p.find("input:text").val(o.dataset.gc??""),p.css("top",scrollY+Math.max(a,i)+"px").css("left",scrollX+Math.min(d,n)+"px").find("input:text")[0].focus(),C(b).on("mousedown",g),p.find("form").on("submit",function(e){e.preventDefault(),o.classList.remove("comment-target"),t.closest('[data-mode="comment"]')&&A(t),h();e=C(this).find("input").val().trim();0==e.length?delete o.dataset.gc:o.dataset.gc=e,C(b).off("mousedown",g),p.remove(),y.checkGCDepth(o.closest(".semantics-result")),C(".edit-svoc").focus(),t.closest(".edit-svoc").removeAttribute("data-mode"),v.find('[data-mode="comment"].active').removeClass("active"),f.empty()}),p.find("button:eq(1)").on("click",function(){C(b).off("mousedown",g),p.remove(),h(),C(".edit-svoc").focus()})}),h(),f=C(e).find(".semantic-edit-guide-msg"),c=C(e).find(".svoc-editor-badge"),l=C(e).find(".svoc-editor-emblem")},"html")),(t=c.clone()).text(e?"New":"Edit"),this.wrap(C('<div class="edit-svoc" tabindex="0"></div>')).before(t).before(l).before(v).after(f),C(".edit-svoc").focus()),this}}(jQuery,document,tandem);