var drawCurvedArrow=function(){var a=Math.abs,f=Math.max,j=Math.min;function q(b,c,d){var a=Math.round;let e=b,f=d;for(let a=1e-4;1>=a;a+=1e-4){const g=(1-a)*(1-a)*b+2*(1-a)*a*c+a*a*d;g<e&&(e=g),g>f&&(f=g)}return[a(e),a(f)]}return function(t,e){const b=$.extend({p0x:50,p0y:50,p1x:70,p1y:10,p2x:100,p2y:100,size:30,lineWidth:10,strokeStyle:"rgb(245,238,49)",header:!0,curve:!0,className:"curved_arrow"},e),i=document.createElement("canvas"),o=b.curve?q(b.p0x,b.p1x,b.p2x):[j(b.p0x,b.p1x,b.p2x),f(b.p0x,b.p1x,b.p2x)],n=b.curve?q(b.p0y,b.p1y,b.p2y):[j(b.p0y,b.p1y,b.p2y),f(b.p0y,b.p1y,b.p2y)],r=b.size-b.lineWidth,p=o[0]-r,s=o[1]+r,l=n[0]-r,w=n[1]+r,c=b.p0x-p,h=b.p0y-l,x=b.p1x-p,d=b.p1y-l,u=b.p2x-p,k=b.p2y-l;i.className=b.className,i.style.position="absolute",i.style.top=l+"px",i.style.left=p+"px";const m=i.getContext("2d"),g=window.devicePixelRatio||1;if(i.style.width=s-p+"px",i.style.height=w-l+"px",i.width=(s-p)*g,i.height=(w-l)*g,m.scale(g,g),m.strokeStyle=b.strokeStyle,m.lineWidth=b.lineWidth,m.lineJoin="round",m.lineCap="round",m.beginPath(),m.moveTo(c,h),a(x-c)>a(d-k)&&m.lineTo(x>c?x-a(d-k):x+a(d-k),d),b.curve?m.quadraticCurveTo(x,d,u,k):(m.lineTo(x,d),m.lineTo(u,k)),m.stroke(),b.header){const a=Math.atan2(k-d,u-x);m.translate(u,k),m.rotate(a+1),m.beginPath(),m.moveTo(0,b.size),m.lineTo(0,0),m.stroke(),m.rotate(-2),m.lineTo(0,-b.size),m.stroke(),m.rotate(1-a),m.translate(-u,-k)}t.appendChild(i)}}();let portraitList=window.matchMedia("(orientation: portrait)");async function showSemanticAnalysis(a,b,c){window.semanticSequence=window.semanticSequence||0;let d=c[0].ownerDocument.createElement("div");d.className="semantics-result",paintBasicDOMs(a,(await svocText2Arr(b))||[],d),c.append(d);let e,f=window.innerWidth;return window.addEventListener("resize",()=>!($(d).is(":visible")&&f!=window.innerWidth)||void(clearTimeout(e),f=window.innerWidth,e=setTimeout(()=>requestAnimationFrame(()=>correctMarkLine(d)),100))),correctMarkLine(d),d}const keywordTable={ΐ:"\"start\"",Α:"\"end\"",Β:"\"rcomment\"",Γ:"\"gcomment\"",Δ:"\"markType\"",Ε:"\"hasModificand\"",Σ:"\"S\"",Τ:"\"V\"",Υ:"\"O\"",Φ:"\"C\"",Χ:"\"OC\"",Ω:"\"M\"",Ϊ:"\"A\"",Ѐ:"\"CCLS\"",Ё:"\"NCLS\"",Ђ:"\"ACLS\"",Ѓ:"\"ADVCLS\"",а:"\"PHR\"",б:"\"ADJPHR\"",в:"\"TOR\"",г:"\"GER\"",д:"\"PTC\"",е:"\"RCM\"",ж:"\"ADVPHR\"",з:"\"PTCPHR\"",Ⴀ:"\"subj\"",Ⴁ:"\"verb\"",Ⴂ:"\"obj\"",Ⴃ:"\"comp\"",Ⴄ:"\"o.c\"",Ⴅ:"\"prep.o.\"",Ⴆ:"\"i.o.\"",Ⴇ:"\"d.o.\"",Ⴈ:"\"s.s.\"",Ⴉ:"\"mod\"",ა:"\"[\uC870\uAC74 | \uC591\uBCF4] \uBD80\uC0AC\uC808\"",ბ:"\"\uC870\uAC74 \uBD80\uC0AC\uC808\"",გ:"\"[\uC2DC\uAC04 | \uC591\uBCF4] \uBD80\uC0AC\uC808\"",დ:"\"[\uC2DC\uAC04 | \uC591\uD0DC] \uBD80\uC0AC\uC808\"",ე:"\"\uC2DC\uAC04 \uBD80\uC0AC\uC808\"",ვ:"\"\uC774\uC720 \uBD80\uC0AC\uC808\"",ზ:"\"\uC591\uBCF4 \uBD80\uC0AC\uC808\"",თ:"\"\uBD80\uC0AC\uC808\"",ი:"\"\uB4F1\uC704\uC808\"",კ:"\"\uBCD1\uB82C\uC808\"",ლ:"\"\uAD00\uACC4\uC0AC\"",Ꭰ:"\"\uC218\uC2DD\"",Ꭱ:"\"to\uBD80\uC815\uC0AC\"",Ꭲ:"\"\uC758\uBBF8\uC0C1 \uC8FC\uC5B4\"",Ꭳ:"\"\uB3D9\uBA85\uC0AC\"",Ꭴ:"\"\uC804\uCE58\uC0AC\uAD6C\"",Ꭵ:"\"\uC804\uCE58\uC0AC\uAD6C(adj)\"",Ꭶ:"\"\uBD84\uC0AC\"",Ꭷ:"\"\uBD80\uC0AC\uAD6C\"",Ꭸ:"\"\uBD80\uC0AC\uC801 \uBCF4\uCDA9\uC5B4\"","᐀":"true",ᐁ:"false",ᐂ:"null",ᐰ:"},{"};async function svocText2Arr(a){return JSON.parse(decSvoc(await inflateSvoc(str2ab(atob(a)))))}async function svocArr2Text(a){return btoa(ab2str(await deflateSvoc(encSvoc(JSON.stringify(a)))))}function svocDom2Arr(a,b){if(svocDom2Arr.pos=b?svocDom2Arr.pos:0,b=b?b:[],null!=a.classList&&a.classList.contains("semantics-result")){const c=a.childNodes;for(let a=0,d=c.length;a<d;a++)b=svocDom2Arr(c[a],b);return b}if(a.hasChildNodes()&&"SPAN"==a.nodeName&&!a.classList.contains("line-end")&&!a.classList.contains("brkt")){const c=a.className.match(/\b(s|v|o|c|oc|a|m|rcm|tor|ger|ptc|conj|phr|adjphr|advphr|ptcphr|cls|ncls|acls|advcls|ccls|pcls)\b/);if(null!=c){const d=a.querySelectorAll(".brkt").length,e=a.textContent.replaceAll(/[\n\u200b]/gm,"").length;b.push({markType:c[0].toUpperCase(),start:svocDom2Arr.pos,end:svocDom2Arr.pos+e-d,rcomment:a.dataset.rc,gcomment:a.dataset.gc,hasModificand:null!=a.dataset.mfd})}for(let c of a.childNodes)b=svocDom2Arr(c,b)}else 3==a.nodeType&&(svocDom2Arr.pos+=a.textContent.replaceAll(/[\n\u200b]/gm,"").length);return b}function encSvoc(a){const b=Object.keys(keywordTable).reduce(function(a,b){return a[keywordTable[b]]=b,a},{}),c=Object.keys(b),d=c.length;for(let e=0;e<d;e++)a=a.replaceAll(c[e],b[c[e]]);return a}function decSvoc(a){const b=Object.keys(keywordTable),c=b.length;for(let d=0;d<c;d++)a=a.replaceAll(b[d],keywordTable[b[d]]);return a}function str2ab(a){let b=new ArrayBuffer(1*a.length),c=new Uint8Array(b);for(let b=0,d=a.length;b<d;b++)c[b]=a.charCodeAt(b);return c}function ab2str(a){return String.fromCharCode.apply(null,new Uint8Array(a))}async function inflateSvoc(a){return"undefined"==typeof pako||"undefined"==typeof pako.inflate?new Promise(b=>$.getScript("https://cdn.jsdelivr.net/npm/pako/dist/pako.min.js").then(()=>b(pako.inflate(new Uint16Array(a),{to:"string"}))).fail(async()=>{await $.getScript("https://static.findsvoc.com/js/public/pako.min.js"),b(pako.inflate(new Uint16Array(a),{to:"string"}))})):pako.inflate(new Uint16Array(a),{to:"string"})}async function deflateSvoc(a){return"undefined"==typeof pako||"undefined"==typeof pako.inflate?new Promise(b=>$.getScript("https://cdn.jsdelivr.net/npm/pako/dist/pako.min.js").then(()=>b(pako.deflate(a))).fail(async()=>{await $.getScript("https://static.findsvoc.com/js/public/pako.min.js"),b(pako.deflate(a))})):pako.deflate(a)}function paintBasicDOMs(a,b,c){c.innerHTML="",createBasicDOMs(a,b,c),checkPOSDepth(c),splitInners(c),trimTextContent(c),wrapWithBracket(c)}var createBasicDOMs=function(){const a=["S","V","O","C","OC","A","M"],b=["CONJ","PHR","ADJPHR","ADVPHR","PTCPHR","CLS","ACLS","NCLS","ADVCLS","CCLS","PCLS"];return function(c,d,e){d=d||[],d.sort(function(c,a){return c.start-a.start||a.end-c.end}),d=d.filter(function(a){return!!a.markType&&0<a.markType.length});let f=0;for(;null!=d[f+1];){let a=d[f],b=d[f+1],c=d[f+2];if(null!=c&&a.start==c.start&&a.end==c.end)d.splice(f+2,1);else if(-1<["PHR","ADJPHR","TOR","PTC"].indexOf(a.markType)){const b=Math.min(f+3,d.length);for(let c,e=f+1;e<b;e++)if(c=d[e],null!=c&&a.start==c.start)if(a.markType==c.markType||"PHR"==c.markType&&"ADJPHR"==a.markType)d.splice(e,1);else if("PHR"==a.markType&&"ADJPHR"==c.markType){d.splice(f,1);break}}else if(-1<["ACLS","ADVCLS"].indexOf(a.markType)&&null!=a.rcomment)b.start==a.start&&b.end==a.end&&"V"==b.markType?d.splice(f+1,1):d.splice(f+1,0,{markType:"M",rcomment:a.rcomment,start:a.start,end:a.end});else if("V"==a.markType)for(let c=f+1,e=b;null!=e&&e.start>=a.start&&e.end<=a.end;)"V"==e.markType&&d.splice(c,1),e=d[++c];f++}for(f=0;null!=d[f+1];){let b=d[f],c=d[f+1];b.start==c.start&&b.end==c.end&&(-1<a.indexOf(b.markType)&&-1==a.indexOf(c.markType)?d.splice(f,2,c,b):-1<a.indexOf(b.markType)&&-1<a.indexOf(c.markType)&&d.splice(f+1,1)),f++}const g=[d[0]];for(f=1;null!=d[f];){const a=g.slice(-1)[0],b=d[f];(a.start!=b.start||a.end!=b.end||a.markType!=b.markType)&&g.push(b),f++}let h=null;for(f=0;null!=g[f];){const a=g[f];if(!(null!=h&&a.start==h.start&&a.end==h.end))h=a;else if(-1<b.indexOf(h.markType)){if(null==a.rcomment&&null==a.gcomment||"V"!=a.markType&&-1<["CCLS","PCLS"].indexOf(h.markType))g.splice(g.indexOf(a),1);else{const b=g.indexOf(h);h.brkt=a.markType.toLowerCase(),g.splice(b,1,h)}}else if(!(-1<b.indexOf(a.markType)))h=a;else if(null==h.rcomment&&null==h.gcomment||"V"!=h.markType&&-1<["CCLS","PCLS"].indexOf(a.markType))g.splice(g.indexOf(h),1);else{const b=g.indexOf(a),c=g.indexOf(h);a.brkt=h.markType.toLowerCase(),g.splice(b,1,h),g.splice(c,1,a)}f++}let j=[];const k=[],l=[];for(f=0;null!=g[f];){const a=g[f];k.push({mark:a.markType,type:"start",index:a.start,modifier:a.hasModificand,brkt:a.brkt,rcomment:a.rcomment,gcomment:a.gcomment}),l.push({mark:a.markType,type:"end",index:a.end,brkt:a.brkt}),f++}l.sort(function(c,a){return a.index-c.index}),l.reverse(),j=k.concat(l),j.sort(function(c,a){return c.index==a.index?c.type==a.type?0:"start"==c.type?1:-1:c.index-a.index});const m=e.dataset.seq||window.semanticSequence++||0;e.dataset.seq=m;let n=0,o=0;for(f=0;null!=j[f];){let a="",b=j[f];"start"==b.type?(a+="<span class=\"sem "+b.mark.toLowerCase(),"RCM"==b.mark&&(a+=" mfd-"+m+"-"+ ++o),a+="\"",b.modifier&&(a+=" data-mfd=\""+m+"-"+o+"\""),b.rcomment&&(a+=" data-rc=",a+=0<b.rcomment.indexOf(".")?"\""+b.rcomment+"\"":"\""+b.rcomment.substring(0,1).toUpperCase()+"\""),b.gcomment&&(a+=" data-gc=\""+b.gcomment+"\""),a+=">"):a+="</span>",c=c.substring(0,n+b.index)+a+c.substring(n+b.index),n+=a.length,f++}e.insertAdjacentHTML("afterbegin",c)}}();function cleanSvocDOMs(a){const b=a.cloneNode(!0),c=b.querySelectorAll(".brkt,.line-end,canvas.curved_arrow");for(let b=0,d=c.length;b<d;b++)c[b].remove();return b}var semanticsFromDOMs=function(){function a(a,b){return b.find(b=>a.classList.contains(b))}function b(a){let b=null;for(let c=0,d=f.length;c<d;c++){const d=f[c];if(0<a.textContent.length&&a.textContent.toLowerCase().startsWith(d)){b=d;break}}return b}function c(f){const g=f.children;let h=[];for(let j=0,i=g.length;j<i;j++){const f=g[j],i=f.firstElementChild;let k;if(0<f.childElementCount&&i.textContent==f.textContent){const g=a(f,d),j=a(i,d);let l;if(a(i,e)?(k=j,l=g):(k=g,l=j),f.parentElement.replaceChild(i,f),k){const a={key:k,type:l,children:c(i)};if("phr"==a.type){const c=b(i);c&&(a.prep=c)}h.push(a)}}else if(k=a(f,d),k){const a={key:k,children:c(f)};if("phr"==a.key){const c=b(f);c&&(a.prep=c)}h.push(a)}}return h}const d=["s","v","o","c","a","oc","m","rcm","tor","ger","ptc","conj","phr","adjphr","advphr","ptcphr","cls","ncls","acls","advcls","ccls","pcls"],e=["s","v","o","c","a","oc","m"],f=["aboard","about","above","according","across","after","against","ahead of","along with","alongside","along","amidst","amid","amongst","among","anti","apart from","around","as for","as per","as to","as well as","as of","aside","astride","as","atop","at","away from","barring","bar","because of","before","behind","below","beneath","besides","beside","between","beyond","but for","but","by means of","by","circa","close to","concerning","considering","contrary to","counting","cum","despite","depending on","down","due to","during","except for","excepting","except","excluding","following","forward of","for","from","further to","given","gone","in addition to","in between","in case of","in face of","in favour of","in front of","in lieu of","in spite of","in view of","into","including","inside","instead of","in","less","like","minus","near to","near","next to","notwithstanding","off","of","on account of","on behalf of","on board","on to","onto","on top of","on","opposite to","opposite","other than","out of","out","outside of","outside","over","owing to","past","pending","per","plus","preparatory to","prior to","pro","re","regarding","regardless of","respecting","round","save","save for","saving","since","through","thru","throughout","till","together with","touching","toward","towards","to","than","thanks to","underneath","under","unlike","until","up against","up to","up until","upon","up","versus","via","with reference to","with regard to","without","within","with"];return c}(),gramMetaFromSemantics=function(){function a(a,b,c){return a.some(a=>a[b]==c)}const b={s:"SUBJ",v:"VERB",o:"OBJ",c:"COMP",oc:"OC",a:"ADV",m:"MODI",rcm:"rcm",tor:"TO",ger:"GER",ptc:"PTC",conj:"conj",phr:"PREP",adjphr:"adjphr",advphr:"advphr",ptcphr:"ptcphr",cls:"CLAUSE",ncls:"NCLS",acls:"ACLS",advcls:"ADVCLS",ccls:"CCLS",pcls:"PCLS"};return function(c,d){let e,f=[],g=d||1;a(c,"key","oc")?e="FORM_FIVE":1<c.filter(a=>"o"==a.key).length?e="FORM_FOUR":a(c,"key","o")?e="FORM_THREE":a(c,"key","c")?e="FORM_TWO":a(c,"key","v")&&(e="FORM_ONE"+(a(c,"key","a")?"_ADV":""));const h=c.filter(a=>null!=a.type);for(let j=0,i=h.length;j<i;j++){const c=b[h[j].key],d=b[h[j].type],i=`${d}_${c}`,k=(e?`${e}_`:"")+i;a(f,"name",k)||f.push({depth:g,name:k}),a(f,"name",i)||f.push({depth:g,name:i}),a(f,"name",d)||f.push({depth:g+1,name:d}),a(f,"name",c)||f.push({depth:g+1,name:c}),d.includes("CLS")&&!a(f,"name","CLAUSE")&&f.push({depth:g+1,name:"CLAUSE"})}e==null||a(f,"name",e)||f.push({depth:g+1,name:e});for(let e=0,h=c.length;e<h;e++){const d=c[e],h=b[d.key];if(a(f,"name",h)||f.push({depth:g+1,name:h}),d.prep){const b=("phr "+d.prep).toUpperCase().replaceAll(" ","_");a(f,"name",b)||f.push({depth:g+1,name:b})}if(0<d.children.length){const b=gramMetaFromSemantics(d.children,g+2);for(let c=0,d=b.length;c<d;c++){const d=b[c];a(f,"name",d.name)||f.push({depth:d.depth,name:d.name})}}}return f}}(),gramMetaArr2Str=function(){const a=["SUBJ","VERB","OBJ","COMP","OC","ADV"];return function(b){return b.filter(b=>!a.includes(b.name)).sort((c,a)=>c.depth-a.depth).map(a=>a.name).join(" ")}}();function checkPOSDepth(a){var b=Math.max;const c=".s, .v, .o, .c, .oc, .a, .m",d=a.querySelectorAll(".s, .v, .o, .c, .oc, .a, .m");let e=0;if(a.removeAttribute("data-lv"),0<d.length&&!a.matches(".sem.v")){for(let a=0,c=d.length;a<c;a++)e=b(e,checkPOSDepth(d[a])+1);a.matches(c)&&0<e&&a.setAttribute("data-lv",e),a.classList.remove("inner"),a.matches(c)&&a.classList.add("outer")}else a.classList.remove("outer"),a.matches(".s, .v, .o, .c, .oc, .a, .m")&&a.classList.add("inner");return e}function wrapWithBracket(a){var b=Math.max;$(a.querySelectorAll(".cls-start,.cls-end,.ccls-start,.ccls-end,.phr-start,.phr-end,.adjphr-start,.adjphr-end,.conj-start,.conj-end,.etc-start,.etc-end")).remove(),trimTextContent(a),$(a).find(".acls, .ncls, .advcls, .cls, .ccls, .pcls, .phr, .adjphr, .advphr, .ptcphr, .conj").add($(a).find(".sem[data-lv]").filter(function(){return this.textContent.length!=this.parentElement.textContent.length||$(this.parentElement).is(".ptc, .tor")})).get().reverse().forEach(function(c){let d=c.className.match(/\bacls\b|\bncls\b|\badvcls\b|\bcls\b|\bccls\b|pcls\b|\bphr\b|\badjphr\b|\badvphr\b|\bptcphr\b|\bconj\b/);d=null!=d&&0<d.length?d[0]:"";let e,f="etc";"ccls"===d||"pcls"===d?(f="ccls",e=["{","}"]):"conj"===d||"phr"===d||"adjphr"===d?(f=d,e=["(",")"]):"advphr"===d||"ptcphr"===d?(f="phr",e=["(",")"]):"acls"===d||"advcls"===d||"ncls"===d||"cls"===d?(f=d+" cls",e=["[","]"]):e=["[","]"];let g=a.ownerDocument.createElement("span"),h=a.ownerDocument.createElement("span");if(g.className="brkt "+f+"-start",h.className="brkt "+f+"-end",g.textContent=e[0],h.textContent=e[1],-1<e.indexOf("[")){let a=+(c.dataset.lv||0);$(c).find(".sem[data-lv],.brkt[data-lv]").each(function(){a=c.textContent.replaceAll(/[\[\]\(\)\{\}]/g,"").length>this.textContent.replaceAll(/[\[\]\(\)\{\}]/g,"").length?b(a,+this.dataset.lv+1):b(a,+this.dataset.lv)}),0<a&&(c.dataset.lv=a,g.dataset.lv=a,h.dataset.lv=a)}c.insertAdjacentElement("beforebegin",g),c.insertAdjacentElement("afterend",h)})}function checkLineEnds(a){$(a).find(".line-end").remove();parseFloat(getComputedStyle(a.ownerDocument.documentElement).fontSize);let b=getLeafNodes([a]).filter(function(a){return 3==a.nodeType});b.forEach(function(a){let b=a,c=b.data.substring(1).match(/[\s-]/);for(;3==b.nodeType&&null!=c&&-1<c.index;)b.splitText(c.index+("-"==c[0]?2:1)),b=b.nextSibling,c=b.data.substring(1).match(/[\s-]/)}),b=getLeafNodes([a]).filter(function(a){return 3==a.nodeType});let c,d=0;const e=a.clientWidth/2;b.forEach(function(b){let f=new Range;f.selectNode(b);const g=f.getClientRects()[0];if(null!=g&&g.x<d-e){let b=a.ownerDocument.createElement("span");b.className="sem line-end",b.insertAdjacentHTML("afterbegin","&#8203;\n"),null!=c.data&&null!=c.data.match(/[\S]/)?c.replaceWith(c,b):c.replaceWith(b,c)}if(c=b,f.selectNode(c),0<f.getClientRects().length){const a=Array.from(f.getClientRects()).slice(-1)[0];d=a.x+a.width}});const f=a.ownerDocument.createElement("span");f.className="sem line-end",f.insertAdjacentHTML("afterbegin","&#8203;\n"),a.appendChild(f),requestAnimationFrame(function(){adjustLineHeight(a)})}function checkGCDepth(a){var b=Math.abs,c=Math.max;function d(a){const d=f[a];let h,i,k=0;delete d.dataset.gcLv;for(let l=a;l<g;l++){const g=f[l],j=g.getClientRects(),m=g.classList.contains("odd")&&1<j.length?j[1]:j[0],n=null==m?0:m.top;let o=null==m?0:m.left;const p=getComputedStyle(g,"::after");if(g.classList.contains("rcm")?g.classList.contains("cmnt-align-start")?o-=e:o+=m.width-parseFloat(p.width)-parseFloat(p.right):o+=c(0,parseFloat(p.left)),l>a){const a=f[l-1],c=parseFloat(getComputedStyle(a,"::after").width);if(b(h-n)<e&&b(i-o)<5+c&&(!g.classList.contains("rcm")||!a.classList.contains("rcm")||g.textContent!=a.textContent))d.dataset.gcLv=++k;else break}h=n,i=o}}const e=parseFloat(getComputedStyle(a.ownerDocument.documentElement).fontSize),f=a.querySelectorAll(".sem[data-gc]"),g=f.length;for(let b=0;b<g;b++)requestAnimationFrame(()=>d(b));requestAnimationFrame(()=>checkLineEnds(a))}function splitInners(a){const b=a.getElementsByClassName("sem inner"),c=/\b([svca]|oc)\b inner/;for(let d,e=0,f=b.length;e<f;e++)if(d=b[e],null!=d)if(0<d.getElementsByClassName("sem inner").length){let b=new Range;const c=d.childNodes;for(let e=0,f=c.length;e<f;e++){const f=c[e];if(1==f.nodeType&&0<f.getElementsByClassName("inner").length)f.childNodes.forEach(function(c){if(1!=c.nodeType||!c.matches(".inner")){let e=a.ownerDocument.createElement("span");e.className="sem v inner",e.dataset.rc=d.dataset.rc,e.dataset.rcMin=d.dataset.rcMin,b.selectNode(c),b.surroundContents(e)}});else if(1!=f.nodeType||!f.matches(".inner")){let c=a.ownerDocument.createElement("span");c.className="sem v inner",c.dataset.rc=d.dataset.rc,c.dataset.rcMin=d.dataset.rcMin,b.selectNode(f),b.surroundContents(c)}}d.outerHTML=d.innerHTML}else if(d.matches(".s,.v,.c,.oc,.a")){let a=d.nextSibling;if(null!=a){let b=a.nextSibling;1==a.nodeType&&null!=a.className.match(c)&&d.className.match(c)[0]==a.className.match(c)[0]?(d.insertAdjacentHTML("beforeEnd",a.innerHTML),a.remove(),e--):1!=a.nodeType&&(null==a.data||null==a.data.match(/[^\s]/))&&null!=b&&1==b.nodeType&&null!=b.className.match(c)&&d.className.match(c)[0]==b.className.match(c)[0]&&(d.insertAdjacentHTML("beforeEnd",a.data+b.innerHTML),a.remove(),b.remove(),e--)}}}function trimTextContent(a){const b=a.querySelectorAll(".sem:not(.line-end)");let c=new Text;c.data=" ";for(let d,e=b.length-1;0<=e;e--)if(d=b[e],!!d.hasChildNodes()){for(;3==d.firstChild.nodeType&&d.firstChild.data.startsWith(" ");)d.firstChild.data=d.firstChild.data.substring(1),d.parentNode.insertBefore(c.cloneNode(),d);for(;3==d.lastChild.nodeType&&d.lastChild.data.endsWith(" ");)d.lastChild.data=d.lastChild.data.slice(0,-1),d.parentNode.insertBefore(c.cloneNode(),d.nextSibling)}}var shrinkRComment=function(){function a(b,c,d){const e=a.canvas||(a.canvas=d.ownerDocument.createElement("canvas")),f=e.getContext("2d");return f.font=c,f.measureText(b).width}return function(b){const c=b.getElementsByClassName("sem inner");for(let d of c)null!=d.dataset.rc&&0>=d.dataset.rc.indexOf(".")&&a(d.textContent,getComputedStyle(d).font,b)<a(d.dataset.rc,getComputedStyle(d,"::before").font,b)-4&&(d.dataset.rc=d.dataset.rc[0].toLowerCase())}}();function correctMarkLine(a){a.removeAttribute("style");const b=a.querySelectorAll(".cmnt-align-center,.cmnt-align-start");for(let c=0,d=b.length;c<d;c++)b[c].classList.remove("cmnt-align-center","cmnt-align-start","odd");const c=a.querySelectorAll(".sem:not(.line-end)");for(let b=0,d=c.length;b<d;b++){const a=c[b],d=a.getClientRects();if(!(1<d.length))a.style.setProperty("--indent",null),a.style.setProperty("--indent-min",null),a.classList.remove("cmnt-align-start","odd"),a.classList.add("cmnt-align-center");else if(a.matches(".rcm")||10>d[0].width){const b=a.matches(".rcm")?d[d.length-1].right-d[0].left:d[1].left-d[0].left,c=a.matches(".rcm")?b:b+d[1].width/2;a.style.setProperty("--indent",b+"px"),a.style.setProperty("--indent-min",c+"px"),a.classList.remove("cmnt-align-start"),a.classList.add("cmnt-align-center","odd")}else a.style.setProperty("--indent",null),a.style.setProperty("--indent-min",null),a.classList.remove("cmnt-align-center","odd"),a.classList.add("cmnt-align-start")}requestAnimationFrame(function(){checkGCDepth(a)})}var drawConnections=function(){var a=Math.max,b=Math.min;function c(a){let b=a.ownerDocument.createRange();b.selectNodeContents(a);const c=b.getClientRects();return 0<c.length?[c[0],c[c.length-1]]:null}function d(a){return(parseFloat(getComputedStyle(a.parentElement).fontSize)||16)-(parseFloat(getComputedStyle(a.parentElement).top)||0)}function e(a,b,c,d,e,f){const g=f.size-f.lineWidth;let h=e.ownerDocument.createElement("canvas");h.className=f.className.replace("start","btwn"),h.style.position="absolute",h.style.top=b-c-g+"px",h.style.left=a-g+"px",h.dataset.height=c;let i=h.getContext("2d");h.style.width=2*g+d+"px",h.style.height=2*g+f.lineWidth+"px";const j=window.devicePixelRatio||1;h.width=(2*g+d)*j,h.height=(2*g+f.lineWidth)*j,i.scale(j,j),i.strokeStyle=f.strokeStyle,i.lineWidth=f.lineWidth,i.moveTo(g,g),i.lineTo(d+g,g),i.stroke(),e.append(h)}return function(f){var g=Math.log;const h=f.querySelectorAll(".curved_arrow,.gc_line");for(let a=0,b=h.length;a<b;a++)h[a].parentNode&&h[a].parentNode.removeChild(h[a]);const i=f.ownerDocument,k=parseFloat(getComputedStyle(i.documentElement).fontSize),l=$(f).offset(),m=l.left,n=l.top,o=i.defaultView,p=o.scrollX-m,q=o.scrollY-n;let r={lineWidth:k/8,size:k/3,strokeStyle:"#FFCC99",header:!1},s={lineWidth:k/8,size:k/3,strokeStyle:"#FFCC99"},t=[],u=null==f.getClientRects()[0]?0:f.getClientRects()[0].top;const v=f.querySelectorAll(".line-end");for(let a=0,b=v.length;a<b;a++){const b=u+parseFloat(getComputedStyle(v[a]).lineHeight);t.push({top:u,bottom:b}),u=b}const w=f.querySelectorAll("[data-mfd]");for(let h=0,i=w.length;h<i;h++){const i=w[h],j=getLeafNodes([i]),l=f.querySelector(".sem.mfd-"+i.dataset.mfd);if(null==l)continue;const m=getLeafNodes([l]),n=j.length,o=m.length;let u=0,v=n-1,x=0,y=o-1,z=j[u++],A=j[v--],B=m[x++],C=m[y--];for(C.parentElement.classList.contains("line-end")&&(C=m[y--]);0==z.length&&u<n;)z=j[u++];for(;0==A.length&&0<=v;)A=j[v--];for(;0==B.length&&x<o;)B=m[x++];for(;0==C.length&&0<=y;)C=m[y--];const D=c(z)[0],E=c(A)[1],F=c(B)[0],G=c(C)[1];if(!(D&&E&&F&&G))continue;const H=D.top+d(z),I=E.top+d(A),J=F.top+d(B),K=G.top+d(C),L=parseFloat(getComputedStyle(f).width)||0;let M,N,O=0,P=p,Q=q,R=p,S=q,T=!1,U=[];if(K+G.height<H?(T=!0,M=G,N=D,P+=D.left+k/3,Q+=H-k,R+=G.right-k/3,S+=K-k,r.p0x=0,s.p0y=S,s.p0x=L,s.p1y=S):J>I+E.height?(T=!0,M=E,N=F,P+=E.right-k/3,Q+=I-k,R+=F.left+k/3,S+=J-k,r.p0x=L,s.p0y=S,s.p0x=0,s.p1y=S):G.x<D.x?(M=G,N=D,P+=D.left+k/3,Q+=H-k,R+=G.right-k/3,S+=K-k,r.p0x=(P+R)/2,s.p0y=Q,s.p0x=(P+R)/2,s.p1y=Q):F.x>E.x&&(M=E,N=F,P+=E.right-k/3,Q+=I-k,R+=F.left+k/3,S+=J-k,r.p0x=(P+R)/2,s.p0y=Q,s.p0x=(P+R)/2,s.p1y=Q),!(M&&N))continue;const V=b(M.top,N.top),W=a(M.top,N.top);for(let a=0,b=t.length;a<b;a++){const b=t[a];b.top>V&&b.bottom<W&&U.push(b.bottom-f.getClientRects()[0].top-k)}const X=N.left+2*k/3-M.right+(T?L*(U.length+1):0);O=15+.1*g(X),r.className="curved_arrow start mfd"+i.dataset.mfd,s.className="curved_arrow end mfd"+i.dataset.mfd,r.p0y=Q-O,r.p1x=P,r.p1y=Q-O,r.p2x=P,r.p2y=Q,s.p0y-=O,s.p1x=R,s.p1y-=O,s.p2x=R,s.p2y=S,drawCurvedArrow(f,r),drawCurvedArrow(f,s);for(let a=0,b=U.length;a<b;a++)requestAnimationFrame(function(){e(0,U[a],O,L,f,r)})}const x=f.querySelectorAll("[data-gc-lv]");for(let b=0,c=x.length;b<c;b++){const c=x[b],d=getComputedStyle(c,"::after"),e=c.getClientRects()[c.matches(".odd")?1:0],g=(c.matches(".odd")?k-parseFloat(d.bottom):parseFloat(d.top))+q+e.top,h=a(7,parseFloat(d.left))+p+e.left;let i={p0x:h,p0y:g+.35*k,p1y:g+.35*k,curve:!1,lineWidth:1,header:!1,size:2,className:"gc_line",strokeStyle:"rgb(158,175,234)"};if(c.matches(".cls,.ncls,.acls,.advcls,.phr,.adjphr,.advphr,.ptcphr")){const a=c.previousElementSibling.getClientRects(),b=a[a.length-1];i.p1x=p+e.left-.25*k,i.p2x=i.p1x,i.p2y=q+(c.matches(".odd")?e.top:b.top+.17*b.height)}else i.p1x=p+e.left+.25*k,i.p2x=i.p1x,i.p2y=q+e.top;requestAnimationFrame(()=>drawCurvedArrow(f,i))}}}(),adjustLineHeight=function(){var a=Math.abs,b=Math.max;function c(c,d,e){const f=c.parentElement,g=$(f).parents(".sem").add(f.matches(".sem")?f:null),h=g.length;let i=0,j=0;for(let f=0;f<h;f++){const c=g.get(f),h=c.getClientRects(),k=h[0],l=h[1],m=!c.matches(".odd")&&16>b(a(k.left-d.left),a(k.top-d.top)),n=c.matches(".odd")&&null!=l&&16>b(a(l.left-d.left),a(l.top-d.top)),o=$(c).parents("[data-rc]").get(0)||(c.matches("[data-rc]")?c:null);let p;null!=o&&(p=parseFloat(getComputedStyle(o).paddingBottom),j=b(j,p));const q=getComputedStyle(c,"::before");if(c.matches("[data-rc]")&&n&&isFinite(parseFloat(q.bottom))?j=b(j,p,0-parseFloat(q.bottom)+(portraitList.matches?parseFloat(q.paddingBottom):0)-.5*parseFloat(q.lineHeight)+.5*parseFloat(q.fontSize)):c.matches("[data-rc]")&&m&&isFinite(parseFloat(q.top))&&(j=b(j,p,parseFloat(q.top)-1.35*e+(portraitList.matches?parseFloat(q.paddingBottom):0)+.5*parseFloat(q.lineHeight)+.5*parseFloat(q.fontSize))),c.matches("[data-gc]")&&(m||n)){const a=getComputedStyle(c,"::after");i=b(i,c.matches(".odd")?(parseFloat(a.bottom)||0)+.5*parseFloat(a.lineHeight)+.5*parseFloat(a.fontSize):.5*parseFloat(a.fontSize)-parseFloat(a.top)-.5*parseFloat(a.lineHeight))}}return{upperHeight:i,lowerHeight:j}}return function(a){const d=parseFloat(getComputedStyle(a.ownerDocument.documentElement).fontSize);a.style.lineHeight="1rem";const e=getLeafNodes([a]).filter(function(a){return 3==a.nodeType});let f=0,g=0,h=0,j=0,k=0;for(let l=0,i=e.length;l<i;l++){let m=e[l],n=new Range;n.selectNode(m);const o=n.getClientRects()[0],p=m.parentElement;if(null!=o&&null!=m.data&&null!=m.data.match(/[^\s]/)){let e=o.height;if(p.matches(".etc-start,.etc-end,.cls-start,.cls-end")){e=1.35*d;const a=parseFloat(getComputedStyle(p).top);let c,f,g;p.matches(".cls-start,.cls-end")?(c=963*o.height/1469,f=811*c/963-a-e,g=152*c/963+a):(c=755*o.height/1131,f=726*c/755-a-e,g=29*c/755+a),j=b(j,f),k=b(k,g)}if(null==p||!p.classList.contains("line-end")){h=b(h,e);const a=c(m,o,d);j=b(j,a.upperHeight),k=b(k,a.lowerHeight)}else p.style.lineHeight=b(h,1.35*d+j+g+(0<f?.5*d:0))+"px",g=k,l==i-1?a.style.paddingBottom=k+"px":(h=0,j=0,k=0),f++}}requestAnimationFrame(function(){drawConnections(a)})}}();function getLeafNodes(a,b=[]){for(let c=0,d=a.length;c<d;c++)null!=a[c]&&(a[c].childNodes&&0!==a[c].childNodes.length?b=getLeafNodes(a[c].childNodes,b):b.push(a[c]));return b}function printPreview(a){var b=$.extend({obj2print:"body",style:"",script:null,width:"670",height:screen.height-105,top:0,left:"center",resizable:"yes",scrollbars:"yes",status:"no",title:"\uC778\uC1C4 \uBBF8\uB9AC\uBCF4\uAE30"},a);"center"==b.left&&(b.left=screen.width/2-b.width/2),$(b.obj2print).find(" input").each(function(){$(this).attr("value",$(this).val())}),$(b.obj2print).find(" textarea").each(function(){$(this).html($(this).val())});var c=document.head.cloneNode(!0),e=c.querySelectorAll("script:not([src])"),f=e.length;for(let b=0;b<f;b++)c.removeChild(e[b]);var g=b.template.cloneNode(!0),h=document.querySelectorAll(b.obj2print),j=h.length;if(b.template){var k=g.querySelector(".page-body");for(let a=0;a<j;a++)k.appendChild(h[a].cloneNode(!0))}var l="<!DOCTYPE html><html><head>"+c.innerHTML+b.style+"</head><body class='print-section mx-auto'>"+g.innerHTML+"</body></html>",m=new Date,d="newWindow"+m.getMilliseconds(),i=window.open("",d,"width="+b.width+",top="+b.top+",height="+b.height+",left="+b.left+",resizable="+b.resizable+",scrollbars="+b.scrollbars+",status="+b.status),n=i.document;n.write(l),n.title=b.title,$(n).on("click",".print-btn",function(){i.print()}).on("change",".selectSize",function(){$(n).find(".print-section").css("width",this.value.split("/")[0]+"mm").css("height",this.value.split("/")[1]+"mm"),$(n).find(".semantics-result").each(function(){correctMarkLine(this)})}),setTimeout(function(){function a(){c<d&&(b[c].removeAttribute("style"),correctMarkLine(b[c]),c++,requestAnimationFrame(a))}var b=n.querySelectorAll(".semantics-result"),c=0,d=b.length;a()},2e3)}async function drawTokenTree(a,b,c){if("undefined"==typeof a||"undefined"==typeof b||0==b.length)return void console.error("Can't draw token tree. Either tokenList or container is null.");if(("undefined"==typeof google||"undefined"==typeof google.visualization)&&(await $.getScript("https://www.gstatic.com/charts/loader.js")),!google.visualization||!google.visualization.OrgChart)await google.charts.load("current",{packages:["orgchart"]}),google.charts.setOnLoadCallback(async function(){await drawTokenTree(a,b,c)});else{var d={allowHtml:!0,size:"large",allowCollapse:!0,nodeClass:"node"};Object.assign(d,c);var e=new google.visualization.DataTable;e.addColumn("string","Index"),e.addColumn("string","Name and Desc"),e.addColumn("string","ToolTip");var f=b[0].ownerDocument.createElement("div");f.className="tokentree-result",b.append(f),a.forEach(function(a){e.addRow([{v:a.tokenIndex.toString(),f:"<span class=\"node-label\">"+a.edgeLabel+"</span><hr style=\"padding:0\"><div class=\"node-desc\"><span class=\"node-text\">"+a.tokenText+"</span><br><span class=\"node-part\">("+a.partOfSpeech+")</span><hr style=\"padding:0\"><span class=\"node-index\">"+a.tokenIndex+"</span><span class=\"node-range\">("+a.tokenStart+"~"+a.tokenEnd+")</span></div>"},a.dependencyIndex.toString(),"\uC6D0\uD615 : "+a.lemma])});var g=new google.visualization.OrgChart(f);g.draw(e,d)}}function readyDictFor(a){function b(a){var b="touchstart"==a.type?a.touches[0].clientX:a.clientX,c="touchstart"==a.type?a.touches[0].clientY:a.clientY,e=f(b,c);null!=e&&d(e)}function c(b){let c=a.ownerDocument.getElementById("dictModuleArea");var d=b.keyword,f=a.ownerDocument.createElement("div");c.append(f),f.className="dictionary-box p-3",f.style.right="5px",f.style.top="5px",f.innerHTML="<h4 class=\"header\">"+b.keyword+"</h4><hr>",b.desc.forEach(function(a){f.innerHTML+="<p class=\"desc\">"+a+"</p>"})}function d(a){c({keyword:a.text,desc:["\uB73B 1\uC785\uB2C8\uB2E4.","\uB73B 2\uC785\uB2C8\uB2E4.","\uB73B 3\uC785\uB2C8\uB2E4."]},a.x,a.y)}function f(b,c){let d,e,f,g,h=getSelection();if(!h.isCollapsed){e=h.toString().trim();let a=h.getRangeAt(0).getClientRects()[0];f=a.x,g=a.y+a.height}else{if(a.ownerDocument.caretPositionFromPoint)d=a.ownerDocument.caretPositionFromPoint(b,c);else if(a.ownerDocument.caretRangeFromPoint)d=a.ownerDocument.caretRangeFromPoint(b,c);else return console.error("[This browser supports neither document.caretRangeFromPoint nor document.caretPositionFromPoint.]"),null;if("function"==typeof Selection.prototype.modify){if(h=getSelection(),h.modify("move","backward","word"),h.modify("extend","forward","word"),e=h.toString().trim(),0==h.rangeCount)return null;let a=h.getRangeAt(0).getClientRects()[0];if(f=a.x,g=a.y+a.height,a.y>c||c>a.y+a.height)return null}else if("function"==typeof Range.prototype.expand){d.expand("word"),e=d.toString().trim();let a=d.getClientRects()[0];f=a.x,g=a.y+a.height}else console.error("[This browser supports neither Selection.modify nor Range.expand.]");if(null==e.match(/\w+/gi))return null}return{text:e,x:f,y:g}}if(null==a.ownerDocument.getElementById("dictModuleArea")){let b=a.ownerDocument.createElement("div");b.id="dictModuleArea",a.ownerDocument.body.append(b),a.ownerDocument.body.addEventListener("mousedown",function(a){0==$(a.target).closest(".dictionary-box").length&&$(".dictionary-box").remove()})}a.removeEventListener("mouseup",b),a.addEventListener("mouseup",b)}