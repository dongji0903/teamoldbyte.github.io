!function(H,q,f){const _=function(e,t){var t=H.extend({p0x:50,p0y:50,p1x:70,p1y:10,p2x:100,p2y:100,size:30,lineWidth:10,strokeStyle:"rgb(245,238,49)",header:!0,curve:!0,className:"curved_arrow"},t),a=f.createElement("canvas"),n=t.curve?g(t.p0x,t.p1x,t.p2x):[Math.min(t.p0x,t.p1x,t.p2x),Math.max(t.p0x,t.p1x,t.p2x)],r=t.curve?g(t.p0y,t.p1y,t.p2y):[Math.min(t.p0y,t.p1y,t.p2y),Math.max(t.p0y,t.p1y,t.p2y)],s=t.size-t.lineWidth,l=n[0]-s,n=n[1]+s,o=r[0]-s,r=r[1]+s,s=t.p0x-l,c=t.p0y-o,i=t.p1x-l,d=t.p1y-o,p=t.p2x-l,m=t.p2y-o,h=(a.className=t.className,a.style.position="absolute",a.style.top=o+"px",a.style.left=l+"px",a.getContext("2d")),u=q.devicePixelRatio||1;a.style.width=n-l+"px",a.style.height=r-o+"px",a.width=(n-l)*u,a.height=(r-o)*u,h.scale(u,u),h.strokeStyle=t.strokeStyle,h.lineWidth=t.lineWidth,h.lineJoin="round",h.lineCap="round",h.beginPath(),h.moveTo(s,c),Math.abs(i-s)>Math.abs(d-m)&&h.lineTo(s<i?i-Math.abs(d-m):i+Math.abs(d-m),d),t.curve?h.quadraticCurveTo(i,d,p,m):(h.lineTo(i,d),h.lineTo(p,m)),h.stroke(),t.header&&(n=Math.atan2(m-d,p-i),h.translate(p,m),h.rotate(n+1),h.beginPath(),h.moveTo(0,t.size),h.lineTo(0,0),h.stroke(),h.rotate(-2),h.lineTo(0,-t.size),h.stroke(),h.rotate(1-n),h.translate(-p,-m)),e.appendChild(a)};function g(t,a,n){let r=t,s=n;for(let e=1e-4;e<=1;e+=1e-4){var l=(1-e)*(1-e)*t+2*(1-e)*e*a+e*e*n;l<r&&(r=l),l>s&&(s=l)}return[Math.round(r),Math.round(s)]}let u=q.matchMedia("(orientation: portrait)");let e;q.addEventListener("resize",()=>{clearTimeout(e);const t=H(".semantics-result:visible");let a=0,n=t.length;e=setTimeout(()=>{0<n&&!function e(){a<n&&requestAnimationFrame(()=>{b(t[a++]),e()})}()},50)});const n={"ΐ":'"start"',"Α":'"end"',"Β":'"rcomment"',"Γ":'"gcomment"',"Δ":'"markType"',"Ε":'"hasModificand"',"Σ":'"S"',"Τ":'"V"',"Υ":'"O"',"Φ":'"C"',"Χ":'"OC"',"Ψ":'"PO"',"Ω":'"M"',"Ϊ":'"A"',"Ϋ":'"TO"',"ά":'"GO"',"έ":'"PTCO"',"ή":'"APPO"',"Ѐ":'"CCLS"',"Ё":'"NCLS"',"Ђ":'"ACLS"',"Ѓ":'"ADVCLS"',"а":'"PHR"',"б":'"ADJPHR"',"в":'"TOR"',"г":'"GER"',"д":'"PTC"',"е":'"RCM"',"ж":'"ADVPHR"',"з":'"PTCPHR"',"Ⴀ":'"S"',"Ⴁ":'"V"',"Ⴂ":'"O"',"Ⴃ":'"C"',"Ⴄ":'"o.c"',"Ⴅ":'"(전)o"',"Ⴆ":'"i.o."',"Ⴇ":'"d.o."',"Ⴈ":'"(의)s"',"Ⴉ":'"mod"',"Ⴊ":'"(부)o"',"Ⴋ":'"(동)o"',"Ⴌ":'"(분)o"',"Ⴍ":'"동격"',"ა":'"[조건 | 양보] 부사절"',"ბ":'"조건 부사절"',"გ":'"[시간 | 양보] 부사절"',"დ":'"[시간 | 양태] 부사절"',"ე":'"시간 부사절"',"ვ":'"이유 부사절"',"ზ":'"양보 부사절"',"თ":'"부사절"',"ი":'"등위절"',"კ":'"병렬절"',"ლ":'"관계사"',"Ꭰ":'"수식"',"Ꭱ":'"to부정사"',"Ꭲ":'"의미상 주어"',"Ꭳ":'"동명사"',"Ꭴ":'"전치사구"',"Ꭵ":'"전치사구(adj)"',"Ꭶ":'"분사"',"Ꭷ":'"부사구"',"Ꭸ":'"부사적 보충어"',"᐀":"true","ᐁ":"false","ᐂ":"null","ᐰ":"},{"};async function s(e){return JSON.parse((t=await callPakoFunc(()=>pako.inflate(new Uint16Array(str2ab(atob(e))),{to:"string"})),a=Object.keys(n),a=new RegExp(a.join("|"),"g"),t.replace(a,e=>n[e])));var t,a}async function t(e){return btoa(ab2str(await callPakoFunc(()=>pako.deflate(function(e){const t=new RegExp(Object.values(n).join("|"),"g"),a=Object.fromEntries(Array.from(Object.entries(n),([e,t])=>[t,e]));return e.replace(t,e=>a[e])}(JSON.stringify(e))))))}const o=/\b(s|ss|v|o|po|to|go|ptco|c|oc|a|m|appo|rcm|tor|ger|ptc|conj|phr|adjphr|advphr|ptcphr|cls|ncls|acls|advcls|ccls|pcls|cleft)\b/;function c(e,t){c.pos=t?c.pos:0,t=t||[];for(var a=[e];0<a.length;){var n=a.pop();if(null!=n.classList&&n.classList.contains("semantics-result"))for(let e=n.childNodes.length-1;0<=e;e--)a.push(n.childNodes[e]);else if(!n.hasChildNodes()||"SPAN"!=n.nodeName||n.classList.contains("line-end")||n.classList.contains("brkt"))n.nodeType==Node.TEXT_NODE&&(c.pos+=n.textContent.replaceAll(/[\n\u200b]/gm,"").length);else{var r,s,l=n.className.match(o);null!=l&&(r=n.getElementsByClassName("brkt").length,s=n.textContent.replaceAll(/[\n\u200b]/gm,"").length,t.push({markType:l[0].toUpperCase(),start:c.pos,end:c.pos+s-r,rcomment:n.dataset.rc,gcomment:n.dataset.gc,hasModificand:null!=n.dataset.mfd}));for(let e=n.childNodes.length-1;0<=e;e--)a.push(n.childNodes[e])}}return t}const E=["S","SS","V","O","PO","TO","GO","PTCO","C","OC","A","M","APPO"],L=["CONJ","PHR","ADJPHR","ADVPHR","PTCPHR","CLS","ACLS","NCLS","ADVCLS","CCLS","PCLS"];function l(a,n,e){(n=n||[]).sort((e,t)=>e.start-t.start||t.end-e.end),n=n.filter(e=>!!e.markType);let r=0;for(;null!=n[r+1];){const[b,k,S]=n.slice(r,r+3),N=n.find((e,t)=>t<r&&e.end>b.start&&e.end<b.end);if(N&&(!n.find((e,t)=>t<r&&(N.start<e.start&&e.end<=N.end||N.start==e.start&&e.end<N.end)&&E.includes(e.markType))&&["ADJPHR","ACLS"].includes(b.markType)?N.end=b.start-1:N.end=b.end),null!=S&&b.start==S.start&&b.end==S.end)n.splice(r+2,1);else if(-1<["PHR","ADJPHR","TOR","PTC"].indexOf(b.markType)){var t=Math.min(r+3,n.length);for(let e=r+1;e<t;e++){var s=n[e];if(null!=s&&b.start==s.start)if(b.markType==s.markType||"PHR"==s.markType&&"ADJPHR"==b.markType)n.splice(e,1);else if("PHR"==b.markType&&"ADJPHR"==s.markType){n.splice(r,1);break}}}else if(-1<["ACLS","ADVCLS"].indexOf(b.markType)&&null!=b.rcomment)k.start==b.start&&k.end==b.end&&"V"==k.markType?n.splice(r,2,Object.assign(b,{rcomment:null}),Object.assign(k,{markType:"M",rcomment:"M"})):n.splice(r+1,0,{markType:"M",rcomment:b.rcomment,start:b.start,end:b.end});else if("V"==b.markType){let e=r+1,t=k;for(;null!=t&&t.start>=b.start&&t.end<=b.end;)"V"==t.markType&&n.splice(e,1),t=n[++e]}r++}for(r=0;null!=n[r+1];){var l=n[r],o=n[r+1];l.start==o.start&&l.end==o.end&&(-1<E.indexOf(l.markType)&&-1==E.indexOf(o.markType)?n.splice(r,2,o,l):-1<E.indexOf(l.markType)&&-1<E.indexOf(o.markType)&&n.splice(r+1,1)),r++}var c=[n[0]];for(r=1;null!=n[r];){var i=c.slice(-1)[0],d=n[r];i.start==d.start&&i.end==d.end&&i.markType==d.markType||c.push(d),r++}let p=null;for(r=0;null!=c[r];){var m,h,u=c[r];null!=p&&u.start==p.start&&u.end==p.end?-1<L.indexOf(p.markType)&&!["TOR","PTC"].includes(u.markType)?null==u.rcomment&&null==u.gcomment||"V"!=u.markType&&-1<["CCLS","PCLS"].indexOf(p.markType)?c.splice(c.indexOf(u),1):(m=c.indexOf(p),p.brkt=u.markType.toLowerCase(),c.splice(m,1,p)):-1<L.indexOf(u.markType)&&!["TOR","PTC"].includes(p.markType)?null==p.rcomment&&null==p.gcomment||"V"!=p.markType&&-1<["CCLS","PCLS"].indexOf(u.markType)?c.splice(c.indexOf(p),1):(m=c.indexOf(u),h=c.indexOf(p),u.brkt=p.markType.toLowerCase(),c.splice(m,1,p),c.splice(h,1,u)):p=u:p=u,r++}var f=[],g=[],y=[];for(r=0;null!=c[r];){var v=c[r];g.push({mark:v.markType,type:"start",index:v.start,modifier:v.hasModificand,brkt:v.brkt,rcomment:v.rcomment,gcomment:v.gcomment}),y.push({mark:v.markType,type:"end",index:v.end,brkt:v.brkt}),r++}y.sort(function(e,t){return t.index-e.index}),y.reverse(),(f=g.concat(y)).sort(function(e,t){return e.index!=t.index?e.index-t.index:e.type!=t.type?"start"==e.type?1:-1:0});var x=e.dataset.seq||q.semanticSequence++||0;e.dataset.seq=x;let C=0,T=0;for(r=0;null!=f[r];){let e="",t=f[r];"start"==t.type?(e+='<span class="sem '+t.mark.toLowerCase(),"RCM"==t.mark&&(e+=` mfd-${x}-`+ ++T),e+='"',t.modifier&&(e+=` data-mfd="${x}-${T}"`),t.rcomment&&(e+=` data-rc="${t.rcomment}"`),t.gcomment&&(e+=` data-gc="${t.gcomment}"`),e+=">"):e+="</span>",a=a.substring(0,C+t.index)+e+a.substring(C+t.index),C+=e.length,r++}e.insertAdjacentHTML("afterbegin",a)}const r=[".s",".v",".o",".po",".to",".go",".ptco",".appo",".c",".oc",".a",".m"];function i(t){var a=t.querySelectorAll(".sem"),e=r.some(e=>t.matches(e))?1:0;let n=0;if(t.removeAttribute("data-lv"),0<a.length&&!t.matches(".sem.v"))for(let e=0,t=a.length;e<t;e++)n=Math.max(n,i(a[e]));return e&&(0<n?(t.classList.remove("inner"),t.classList.add("outer"),t.setAttribute("data-lv",n)):(t.classList.remove("outer"),t.classList.add("inner"))),e+n}const d=["acls","ncls","advcls","ccls","pcls","cls","adjphr","advphr","ptcphr","phr","conj"],p={ccls:{type:"ccls",brackets:["{","}"]},pcls:{type:"ccls",brackets:["{","}"]},conj:{type:"conj",brackets:["(",")"]},phr:{type:"phr",brackets:["(",")"]},adjphr:{type:"adjphr",brackets:["(",")"]},advphr:{type:"phr",brackets:["(",")"]},ptcphr:{type:"phr",brackets:["(",")"]},acls:{type:"acls cls",brackets:["[","]"]},advcls:{type:"advcls cls",brackets:["[","]"]},ncls:{type:"ncls cls",brackets:["[","]"]},cls:{type:"cls",brackets:["[","]"]}};function m(c){Array.from(c.querySelectorAll(".cls-start,.cls-end,.ccls-start,.ccls-end,.phr-start,.phr-end,.adjphr-start,.adjphr-end,.conj-start,.conj-end,.etc-start,.etc-end")).forEach(e=>e.remove()),T(c),H(c).find(".acls, .ncls, .advcls, .cls, .ccls, .pcls, .phr, .adjphr, .advphr, .ptcphr, .conj, .sem[data-lv]:not(:only-child), .ptc > .sem[data-lv], .tor > .sem[data-lv], .ger > .sem[data-lv]").get().reverse().forEach(function(a){var e=d.find(e=>a.classList.contains(e))||"",{type:e,brackets:t}=p[e]||{type:"etc",brackets:["[","]"]},n=c.ownerDocument.createElement("span"),r=c.ownerDocument.createElement("span");if(n.className=`brkt ${e}-start`,r.className=`brkt  ${e}-end`,n.textContent=t[0],r.textContent=t[1],t.includes("[")){var e=parseInt(a.dataset.lv||0),s=a.querySelectorAll(".sem[data-lv], .brkt[data-lv]");let t=e;for(let e=0;e<s.length;e++){var l=s[e],o=l.textContent.replace(/[[\](){}]/g,"");t=Math.max(t,parseInt(l.dataset.lv||0)+(o.length>a.textContent.replace(/[[\](){}]/g,"").length?1:0))}0<t&&(a.dataset.lv=t,n.dataset.lv=t,r.dataset.lv=t)}a.insertAdjacentElement("beforebegin",n),a.insertAdjacentElement("afterend",r)})}function h(d){const p=parseFloat(getComputedStyle(d.ownerDocument.documentElement).fontSize),m=d.querySelectorAll(".sem[data-gc]"),h=m.length;let u=0;requestAnimationFrame(function e(){var a=m[u];let n,r,s=0;delete a?.dataset?.gcLv;for(let t=u;t<h;t++){var l=m[t],o=l.getClientRects(),c=null==(o=l.classList.contains("odd")&&1<o.length?o[1]:o[0])?0:o.top;let e=null==o?0:o.left;var i=getComputedStyle(l,"::after");if(l.classList.contains("rcm")?l.classList.contains("cmnt-align-start")?e-=p:null!=o&&null!=i&&(e+=o.width-parseFloat(i.width)-parseFloat(i.right)):e+=Math.max(0,parseFloat(i.left)),t>u){if(o=m[t-1],i=parseFloat(getComputedStyle(o,"::after").width),!(Math.abs(n-c)<p&&Math.abs(r-e)<5+i)||l.classList.contains("rcm")&&o.classList.contains("rcm")&&l.textContent==o.textContent)break;if(l.classList.contains("tor")){if(o.classList.contains("adjphr")){delete l.dataset.gc,o.dataset.gc="[to부정사 | 형용사구]";break}if(o.classList.contains("advphr")){delete l.dataset.gc,o.dataset.gc="[to부정사 | 부사구]";break}}else if(l.classList.contains("ptc")){if(o.classList.contains("adjphr")){delete l.dataset.gc,o.dataset.gc="[분사 | 형용사구]";break}if(o.classList.contains("advphr")){delete l.dataset.gc,o.dataset.gc="[분사 | 부사구]";break}}a.dataset.gcLv=++s}n=c,r=e}++u<h?requestAnimationFrame(e):requestAnimationFrame(()=>{{var s=d;const l=parseFloat(getComputedStyle(f.documentElement).fontSize);H(s).find(".line-end").remove();let e=B([s]).filter(function(e){return e.nodeType==Node.TEXT_NODE}),n=("break-all"==getComputedStyle(s).wordBreak?e.forEach(e=>{let t=e;for(;1<t.length;)t=t.splitText(1)}):e.forEach(function(e){let t=e,a=t.data.substring(1).match(/[\s-]/);for(;t.nodeType==Node.TEXT_NODE&&null!=a&&-1<a.index;)t.splitText(a.index+("-"==a[0]?2:1)),t=t.nextSibling,a=t.data.substring(1).match(/[\s-]/)}),e=B([s]).filter(function(e){return e.nodeType==Node.TEXT_NODE}),0),r;e.forEach(e=>{var t=f.createRange(),a=(t.selectNode(e),t.getClientRects()[0]);null!=a&&a.x<n-+l&&((a=s.ownerDocument.createElement("span")).className="sem line-end",a.insertAdjacentHTML("afterbegin","&#8203;\n"),r?.data?.match(/\S/)?r?.replaceWith(r,a):r?.replaceWith(a,r)),r=e,t.selectNode(r),0<(a=t.getClientRects()).length&&(e=a[a.length-1],n=e.x+e.width)});var t=s.ownerDocument.createElement("span");t.className="sem line-end",t.insertAdjacentHTML("afterbegin","&#8203;\n"),s.appendChild(t),requestAnimationFrame(function(){S(s)})}})})}const y=["s","v","c","oc","a","po"],v=Array.from(y,e=>".inner."+e).toString();function x(r){var a,s,l=r.getElementsByClassName("sem inner");for(let e=0,t=l.length;e<t;e++){let n=l[e];if(null!=n)if(0<n.getElementsByClassName("sem inner").length){let a=new Range;var o=n.childNodes;for(let e=0,t=o.length;e<t;e++){var c,i=o[e];i.nodeType==Node.ELEMENT_NODE&&0<i.getElementsByClassName("inner").length?i.childNodes.forEach(function(e){var t;e.nodeType==Node.ELEMENT_NODE&&e.matches(".inner")||((t=r.ownerDocument.createElement("span")).className="sem v inner",t.dataset.rc=n.dataset.rc,t.dataset.rcMin=n.dataset.rcMin,a.selectNode(e),a.surroundContents(t))}):i.nodeType==Node.ELEMENT_NODE&&i.matches(".inner")||((c=r.ownerDocument.createElement("span")).className="sem v inner",c.dataset.rc=n.dataset.rc,c.dataset.rcMin=n.dataset.rcMin,a.selectNode(i),a.surroundContents(c))}n.outerHTML=n.innerHTML}else n.matches(v)&&(a=n.nextSibling)?.nextSibling?.nodeType==Node.ELEMENT_NODE&&(s=a.nextSibling,a.nodeType==Node.ELEMENT_NODE&&a.matches(v)&&C(n,s)?(n.insertAdjacentHTML("beforeEnd",a.innerHTML),a.remove(),e--):a.nodeType!=Node.ELEMENT_NODE&&(null==a.data||null==a.data.match(/[^\s]/))&&s.matches(v)&&C(n,s)&&(n.insertAdjacentHTML("beforeEnd",a.data+s.innerHTML),a.remove(),s.remove(),e--))}}function C(e,t){e=Array.from(e.classList).filter(e=>y.includes(e));const a=Array.from(t.classList).filter(e=>y.includes(e));return e.every(e=>a.includes(e))}function T(e){var t=e.querySelectorAll(".sem:not(.line-end)"),a=new Text;a.data=" ";for(let e=t.length-1;0<=e;e--){var n=t[e];if(n.hasChildNodes()){for(;n.firstChild.nodeType==Node.TEXT_NODE&&n.firstChild.data.startsWith(" ");)n.firstChild.data=n.firstChild.data.substring(1),n.parentNode.insertBefore(a.cloneNode(),n);for(;n.lastChild.nodeType==Node.TEXT_NODE&&n.lastChild.data.endsWith(" ");)n.lastChild.data=n.lastChild.data.slice(0,-1),n.parentNode.insertBefore(a.cloneNode(),n.nextSibling)}}}function b(e){if(e){e.removeAttribute("style"),e.querySelectorAll(".sem").forEach(e=>{0==e.textContent.length&&e.remove()});var a=e.querySelectorAll(".cmnt-align-center,.cmnt-align-start");for(let e=0,t=a.length;e<t;e++)a[e].classList.remove("cmnt-align-center","cmnt-align-start","odd");var n=e.querySelectorAll(".sem:not(.line-end)");for(let e=0,t=n.length;e<t;e++){var r,s=n[e],l=s.getClientRects();1<l.length?s.matches(".rcm")||l[0].width<10?(r=(s.matches(".rcm")?l[l.length-1].right:l[1].left)-l[0].left,l=s.matches(".rcm")?r:r+l[1].width/2,s.style.setProperty("--indent",r+"px"),s.style.setProperty("--indent-min",l+"px"),s.classList.remove("cmnt-align-start"),s.classList.add("cmnt-align-center","odd")):(s.style.removeProperty("--indent"),s.style.removeProperty("--indent-min"),s.classList.remove("cmnt-align-center","odd"),s.classList.add("cmnt-align-start")):(s.style.removeProperty("--indent"),s.style.removeProperty("--indent-min"),s.classList.remove("cmnt-align-start","odd"),s.classList.add("cmnt-align-center"))}requestAnimationFrame(function(){h(e)})}}function k(h,e){Array.from(h.querySelectorAll(".curved_arrow,.gc_line")).forEach(e=>e.remove());var t=h.ownerDocument,u=parseFloat(getComputedStyle(t.documentElement).fontSize),a=H(h).offset(),n=a.left,a=a.top,t=t.defaultView,f=t.scrollX-n,g=t.scrollY-a;let y=Object.assign({lineWidth:u/8,size:u/3,strokeStyle:"#FFCC99",header:!1},e),v=Object.assign({lineWidth:u/8,size:u/3,strokeStyle:"#FFCC99"},e),x=[],r=h.getClientRects()[0]?.top||0;var s=h.querySelectorAll(".line-end");for(let e=0,t=s.length;e<t;e++){var l=r+parseFloat(getComputedStyle(s[e]).lineHeight);x.push({top:r,bottom:l}),r=l}var o=h.querySelectorAll("[data-mfd]");for(let e=0,t=o.length;e<t;e++){var C=o[e],i=B([C]).filter(e=>"​\n"!=e.textContent),T=h.querySelector(".sem.mfd-"+C.dataset.mfd);if(null!=T){var d=B([T]).filter(e=>"​\n"!=e.textContent),b=i.length,k=d.length;let e=0,t=b-1,a=0,n=k-1,o=i[e++],c=i[t--],p=d[a++],m=d[n--];for(m.parentElement.classList.contains("line-end")&&(m=d[n--]);e<b&&0===o.length;e++)o=i[e];for(let e=t;0<=e&&0===c.length;e--)c=i[e];for(;a<k&&0===p.length;a++)p=d[a];for(let e=n;0<=e&&0===m.length;e--)m=d[e];var T=z(o)[0],S=z(c).slice(-1)[0],N=z(p)[0],E=z(m).slice(-1)[0];if(T&&S&&N&&E){var L=T.top+W(o),M=S.top+W(c),A=N.top+W(p),O=E.top+W(m);const D=parseFloat(getComputedStyle(h).width)||0;let i,e,t,a=f,n=g,r=f,s=g,l=!1,d=[];if(O+E.height<L?(l=!0,e=E,t=T,a+=T.left+u/3,n+=L-u,r+=E.right-u/3,s+=O-u,y.p0x=0,v.p0y=s,v.p0x=D,v.p1y=s):A>M+S.height?(l=!0,e=S,t=N,a+=S.right-u/3,n+=M-u,r+=N.left+u/3,s+=A-u,y.p0x=D,v.p0y=s,v.p0x=0,v.p1y=s):E.x<T.x?(e=E,t=T,a+=T.left+u/3,n+=L-u,r+=E.right-u/3,s+=O-u,y.p0x=(a+r)/2,v.p0y=n,v.p0x=(a+r)/2,v.p1y=n):N.x>S.x&&(e=S,t=N,a+=S.right-u/3,n+=M-u,r+=N.left+u/3,s+=A-u,y.p0x=(a+r)/2,v.p0y=n,v.p0x=(a+r)/2,v.p1y=n),e&&t){var w=Math.min(e.top,t.top),j=Math.max(e.top,t.top);for(let e=0,t=x.length;e<t;e++){var F=x[e];F.top>w&&F.bottom<j&&d.push(F.bottom-h.getClientRects()[0].top-u)}T=t.left+2*u/3-e.right+(l?D*(d.length+1):0);i=15+.1*Math.log(T),y.className="curved_arrow start mfd"+C.dataset.mfd,v.className="curved_arrow end mfd"+C.dataset.mfd,y.p0y=n-i,y.p1x=a,y.p1y=n-i,y.p2x=a,y.p2y=n,v.p0y-=i,v.p1x=r,v.p1y-=i,v.p2x=r,v.p2y=s,_(h,y),_(h,v);for(let c=0,e=d.length;c<e;c++)requestAnimationFrame(function(){var e=0,t=d[c],a=i,n=D,r=h,s=y,l=s.size-s.lineWidth,o=r.ownerDocument.createElement("canvas"),t=(o.className=s.className.replace("start","btwn"),o.style.position="absolute",o.style.top=t-a-l+"px",o.style.left=e-l+"px",o.dataset.height=a,o.getContext("2d"));o.style.width=2*l+n+"px",o.style.height=2*l+s.lineWidth+"px",e=q.devicePixelRatio||1,o.width=(2*l+n)*e,o.height=(2*l+s.lineWidth)*e,t.scale(e,e),t.strokeStyle=s.strokeStyle,t.lineWidth=s.lineWidth,t.moveTo(l,l),t.lineTo(n+l,l),t.stroke(),r.append(o)})}}}}var c=h.querySelectorAll("[data-gc-lv]");for(let t=0,e=c.length;t<e;t++){var p=c[t],m=getComputedStyle(p,"::after"),P=p.getClientRects()[p.matches(".odd")?1:0],R=(p.matches(".odd")?u-parseFloat(m.bottom):parseFloat(m.top))+g+P.top;let e={p0x:Math.max(7,parseFloat(m.left))+f+P.left,p0y:R+.35*u,p1y:R+.35*u,curve:!1,lineWidth:1,header:!1,size:2,className:"gc_line",strokeStyle:"rgb(158,175,234)"};p.matches(".cls,.ncls,.acls,.advcls,.phr,.adjphr,.advphr,.ptcphr")?(R=(m=p.previousElementSibling.getClientRects())[m.length-1],e.p1x=f+P.left-.25*u,e.p2x=e.p1x,e.p2y=g+(p.matches(".odd")?P.top:R.top+.17*R.height)):(e.p1x=f+P.left+.25*u,e.p2x=e.p1x,e.p2y=g+P.top),requestAnimationFrame(()=>_(h,e))}}function z(e){var t=e.ownerDocument.createRange();t.selectNodeContents(e);e=Array.from(t.getClientRects()).filter(e=>0<e.width);return 0<e.length?[e[0],e[e.length-1]]:[null,null]}function W(e){return(parseFloat(getComputedStyle(e.parentElement).fontSize)||16)-(parseFloat(getComputedStyle(e.parentElement).top)||0)}const S=function(a){var r=parseFloat(getComputedStyle(a.ownerDocument.documentElement).fontSize),n=(a.style.lineHeight="1rem",B([a]).filter(function(e){return e.nodeType==Node.TEXT_NODE}));let s=0,l=0,o=0,c=0,i=0;for(let e=0,t=n.length;e<t;e++){var d=n[e],p=new Range,p=(p.selectNode(d),p.getClientRects()[0]),m=d.parentElement;if(null!=p&&null!=d.data&&null!=d.data.match(/[^\s]/)){let n=p.height;if(m.matches(".etc-start,.etc-end,.cls-start,.cls-end")){n=1.35*r;var h=parseFloat(getComputedStyle(m).top);let e,t,a;a=m.matches(".cls-start,.cls-end")?(e=963*p.height/1469,t=811*e/963-h-n,152*e/963+h):(e=755*p.height/1131,t=726*e/755-h-n,29*e/755+h),c=Math.max(c,t),i=Math.max(i,a)}null!=m&&m.classList.contains("line-end")?(m.style.lineHeight=Math.max(o,1.35*r+c+l+(0<s?.5*r:0))+"px",l=i,e==t-1?a.style.paddingBottom=i+"px":(o=0,c=0,i=0),s++):(o=Math.max(o,n),h=function(e,a,n){var e=e.parentElement,r=H(e).parents(".sem").add(e.matches(".sem")?e:null),s=r.length;let l=0,o=0;for(let t=0;t<s;t++){var c=r.get(t),i=c.getClientRects(),d=i[0],i=i[1],d=!c.matches(".odd")&&Math.max(Math.abs(d.left-a.left),Math.abs(d.top-a.top))<16,i=c.matches(".odd")&&null!=i&&Math.max(Math.abs(i.left-a.left),Math.abs(i.top-a.top))<16,p=H(c).parents("[data-rc]").get(0)||(c.matches("[data-rc]")?c:null);let e;null!=p&&(e=parseFloat(getComputedStyle(p).paddingBottom),o=Math.max(o,e));var p=getComputedStyle(c,"::before");c.matches("[data-rc]")&&i&&isFinite(parseFloat(p.bottom))?o=Math.max(o,e,0-parseFloat(p.bottom)+(u.matches?parseFloat(p.paddingBottom):0)-.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize)):c.matches("[data-rc]")&&d&&isFinite(parseFloat(p.top))&&(o=Math.max(o,e,parseFloat(p.top)-1.35*n+(u.matches?parseFloat(p.paddingBottom):0)+.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize))),c.matches("[data-gc]")&&(d||i)&&(p=getComputedStyle(c,"::after"),l=Math.max(l,c.matches(".odd")?(parseFloat(p.bottom)||0)+.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize):.5*parseFloat(p.fontSize)-parseFloat(p.top)-.5*parseFloat(p.lineHeight)))}return{upperHeight:l,lowerHeight:o}}(d,p,r),c=Math.max(c,h.upperHeight),i=Math.max(i,h.lowerHeight))}}requestAnimationFrame(function(){k(a)})};function B(t){const n=[];for(let e=0;e<t.length;e++)null!=t[e]&&!function t(a){if(a.childNodes&&0!==a.childNodes.length)for(let e=0;e<a.childNodes.length;e++)t(a.childNodes[e]);else n.push(a)}(t[e]);return n}q.tandem={showSemanticAnalysis:async function(e,t,a){q.semanticSequence=q.semanticSequence||0;var n,r=a[0].ownerDocument.createElement("div");return r.className="semantics-result",e=e,t=await s(t)||[],(n=r).innerHTML="",l(e,t,n),i(n),x(n),T(n),m(n),a.append(r),b(r),r},checkGCDepth:h,checkPOSDepth:i,svocText2Arr:s,svocArr2Text:t,cleanSvocDOMs:function(e){var a=(e=e.cloneNode(!0)).querySelectorAll(".brkt,.line-end,canvas.curved_arrow");for(let e=0,t=a.length;e<t;e++)a[e].remove();return e},correctMarkLine:b,createBasicDOMs:l,drawConnections:k,splitInners:x,getSvocBytes:async function(e){return t(c(e))},trimTextContent:T,wrapWithBracket:m,swapParentAndChild:function(t,e){t.contains(e)?(t.parentNode.replaceChild(e,t),Array.from(e.childNodes).forEach(e=>t.appendChild(e)),e.appendChild(t)):console.warn(t+`는 ${e}의 부모가 아닙니다.`)}}}(jQuery,this,document);