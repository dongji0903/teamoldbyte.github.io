((j,H,f)=>{let q=function(e,t){var t=j.extend({p0x:50,p0y:50,p1x:70,p1y:10,p2x:100,p2y:100,size:30,lineWidth:10,strokeStyle:"rgb(245,238,49)",header:!0,curve:!0,className:"curved_arrow"},t),a=f.createElement("canvas"),n=t.curve?g(t.p0x,t.p1x,t.p2x):[Math.min(t.p0x,t.p1x,t.p2x),Math.max(t.p0x,t.p1x,t.p2x)],r=t.curve?g(t.p0y,t.p1y,t.p2y):[Math.min(t.p0y,t.p1y,t.p2y),Math.max(t.p0y,t.p1y,t.p2y)],l=t.size-t.lineWidth,s=n[0]-l,n=n[1]+l,o=r[0]-l,r=r[1]+l,l=t.p0x-s,i=t.p0y-o,c=t.p1x-s,d=t.p1y-o,p=t.p2x-s,m=t.p2y-o,h=(a.className=t.className,a.style.position="absolute",a.style.top=o+"px",a.style.left=s+"px",a.getContext("2d")),u=H.devicePixelRatio||1;a.style.width=n-s+"px",a.style.height=r-o+"px",a.width=(n-s)*u,a.height=(r-o)*u,h.scale(u,u),h.strokeStyle=t.strokeStyle,h.lineWidth=t.lineWidth,h.lineJoin="round",h.lineCap="round",h.beginPath(),h.moveTo(l,i),Math.abs(c-l)>Math.abs(d-m)&&h.lineTo(l<c?c-Math.abs(d-m):c+Math.abs(d-m),d),t.curve?h.quadraticCurveTo(c,d,p,m):(h.lineTo(c,d),h.lineTo(p,m)),h.stroke(),t.header&&(n=Math.atan2(m-d,p-c),h.translate(p,m),h.rotate(n+1),h.beginPath(),h.moveTo(0,t.size),h.lineTo(0,0),h.stroke(),h.rotate(-2),h.lineTo(0,-t.size),h.stroke(),h.rotate(1-n),h.translate(-p,-m)),e.appendChild(a)};function g(t,a,n){let r=t,l=n;for(let e=1e-4;e<=1;e+=1e-4){var s=(1-e)*(1-e)*t+2*(1-e)*e*a+e*e*n;s<r&&(r=s),s>l&&(l=s)}return[Math.round(r),Math.round(l)]}let u=H.matchMedia("(orientation: portrait)"),e,n=(H.addEventListener("resize",()=>{clearTimeout(e);let t=j(".semantics-result:visible"),a=0,n=t.length;e=setTimeout(()=>{0<n&&!function e(){a<n&&requestAnimationFrame(()=>{S(t[a++]),e()})}()},50)}),{"ΐ":'"start"',"Α":'"end"',"Β":'"rcomment"',"Γ":'"gcomment"',"Δ":'"markType"',"Ε":'"hasModificand"',"Σ":'"S"',"Τ":'"V"',"Υ":'"O"',"Φ":'"C"',"Χ":'"OC"',"Ψ":'"PO"',"Ω":'"M"',"Ϊ":'"A"',"Ϋ":'"TO"',"ά":'"GO"',"έ":'"PTCO"',"ή":'"APPO"',"Ѐ":'"CCLS"',"Ё":'"NCLS"',"Ђ":'"ACLS"',"Ѓ":'"ADVCLS"',"а":'"PHR"',"б":'"ADJPHR"',"в":'"TOR"',"г":'"GER"',"д":'"PTC"',"е":'"RCM"',"ж":'"ADVPHR"',"з":'"PTCPHR"',"Ⴀ":'"S"',"Ⴁ":'"V"',"Ⴂ":'"O"',"Ⴃ":'"C"',"Ⴄ":'"o.c"',"Ⴅ":'"(전)o"',"Ⴆ":'"i.o."',"Ⴇ":'"d.o."',"Ⴈ":'"(의)s"',"Ⴉ":'"mod"',"Ⴊ":'"(부)o"',"Ⴋ":'"(동)o"',"Ⴌ":'"(분)o"',"Ⴍ":'"동격"',"ა":'"[조건 | 양보] 부사절"',"ბ":'"조건 부사절"',"გ":'"[시간 | 양보] 부사절"',"დ":'"[시간 | 양태] 부사절"',"ე":'"시간 부사절"',"ვ":'"이유 부사절"',"ზ":'"양보 부사절"',"თ":'"부사절"',"ი":'"등위절"',"კ":'"병렬절"',"ლ":'"관계사"',"Ꭰ":'"수식"',"Ꭱ":'"to부정사"',"Ꭲ":'"의미상 주어"',"Ꭳ":'"동명사"',"Ꭴ":'"전치사구"',"Ꭵ":'"전치사구(adj)"',"Ꭶ":'"분사"',"Ꭷ":'"부사구"',"Ꭸ":'"부사적 보충어"',"᐀":"true","ᐁ":"false","ᐂ":"null","ᐰ":"},{"});async function l(e){return JSON.parse((t=await callPakoFunc(()=>pako.inflate(new Uint16Array(str2ab(atob(e))),{to:"string"})),a=Object.keys(n),a=new RegExp(a.join("|"),"g"),t.replace(a,e=>n[e])));var t,a}async function t(e){return btoa(ab2str(await callPakoFunc(()=>pako.deflate((e=>{let t=new RegExp(Object.values(n).join("|"),"g"),a=Object.fromEntries(Array.from(Object.entries(n),([e,t])=>[t,e]));return e.replace(t,e=>a[e])})(JSON.stringify(e))))))}let o=/\b(s|ss|v|o|po|to|go|ptco|c|oc|a|m|appo|rcm|tor|ger|ptc|conj|phr|adjphr|advphr|ptcphr|cls|ncls|acls|advcls|ccls|pcls|cleft)\b/;function i(e,t){i.pos=t?i.pos:0,t=t||[];for(var a=[e];0<a.length;){var n=a.pop();if(null!=n.classList&&n.classList.contains("semantics-result"))for(let e=n.childNodes.length-1;0<=e;e--)a.push(n.childNodes[e]);else if(!n.hasChildNodes()||"SPAN"!=n.nodeName||n.classList.contains("line-end")||n.classList.contains("brkt"))n.nodeType==Node.TEXT_NODE&&(i.pos+=n.textContent.replaceAll(/[\n\u200b]/gm,"").length);else{var r,l,s=n.className.match(o);null!=s&&(r=n.getElementsByClassName("brkt").length,l=n.textContent.replaceAll(/[\n\u200b]/gm,"").length,t.push({markType:s[0].toUpperCase(),start:i.pos,end:i.pos+l-r,rcomment:n.dataset.rc,gcomment:n.dataset.gc,hasModificand:null!=n.dataset.mfd}));for(let e=n.childNodes.length-1;0<=e;e--)a.push(n.childNodes[e])}}return t}let b=["S","SS","V","O","PO","TO","GO","PTCO","C","OC","A","M","APPO"],k=["CONJ","PHR","ADJPHR","ADVPHR","PTCPHR","CLS","ACLS","NCLS","ADVCLS","CCLS","PCLS"];function s(a,l,e){(l=l||[]).sort((e,t)=>e.start-t.start||t.end-e.end),l=l.filter(e=>!!e.markType);let s=0;for(;null!=l[s+1];){let[a,n,e]=l.slice(s,s+3),r=l.find((e,t)=>t<s&&e.end>a.start&&e.end<a.end);if(r&&(!l.find((e,t)=>t<s&&(r.start<e.start&&e.end<=r.end||r.start==e.start&&e.end<r.end)&&b.includes(e.markType))&&["ADJPHR","ACLS"].includes(a.markType)?r.end=a.start-1:r.end=a.end),null!=e&&a.start==e.start&&a.end==e.end)l.splice(s+2,1);else if(-1<["PHR","ADJPHR","TOR","PTC"].indexOf(a.markType)){var t=Math.min(s+3,l.length);for(let e=s+1;e<t;e++){var o=l[e];if(null!=o&&a.start==o.start)if(a.markType==o.markType||"PHR"==o.markType&&"ADJPHR"==a.markType)l.splice(e,1);else if("PHR"==a.markType&&"ADJPHR"==o.markType){l.splice(s,1);break}}}else if(-1<["ACLS","ADVCLS"].indexOf(a.markType)&&null!=a.rcomment)n.start==a.start&&n.end==a.end&&"V"==n.markType?l.splice(s,2,Object.assign(a,{rcomment:null}),Object.assign(n,{markType:"M",rcomment:"M"})):l.splice(s+1,0,{markType:"M",rcomment:a.rcomment,start:a.start,end:a.end});else if("V"==a.markType){let e=s+1,t=n;for(;null!=t&&t.start>=a.start&&t.end<=a.end;)"V"==t.markType&&l.splice(e,1),t=l[++e]}s++}for(s=0;null!=l[s+1];){var n=l[s],r=l[s+1];n.start==r.start&&n.end==r.end&&(-1<b.indexOf(n.markType)&&-1==b.indexOf(r.markType)?l.splice(s,2,r,n):-1<b.indexOf(n.markType)&&-1<b.indexOf(r.markType)&&l.splice(s+1,1)),s++}var i=[l[0]];for(s=1;null!=l[s];){var c=i.slice(-1)[0],d=l[s];c.start==d.start&&c.end==d.end&&c.markType==d.markType||i.push(d),s++}let p=null;for(s=0;null!=i[s];){var m,h,u=i[s];null!=p&&u.start==p.start&&u.end==p.end?-1<k.indexOf(p.markType)&&!["TOR","PTC"].includes(u.markType)?null==u.rcomment&&null==u.gcomment||"V"!=u.markType&&-1<["CCLS","PCLS"].indexOf(p.markType)?i.splice(i.indexOf(u),1):(m=i.indexOf(p),p.brkt=u.markType.toLowerCase(),i.splice(m,1,p)):-1<k.indexOf(u.markType)&&!["TOR","PTC"].includes(p.markType)?null==p.rcomment&&null==p.gcomment||"V"!=p.markType&&-1<["CCLS","PCLS"].indexOf(u.markType)?i.splice(i.indexOf(p),1):(m=i.indexOf(u),h=i.indexOf(p),u.brkt=p.markType.toLowerCase(),i.splice(m,1,p),i.splice(h,1,u)):p=u:p=u,s++}var f=[],g=[],y=[];for(s=0;null!=i[s];){var v=i[s];g.push({mark:v.markType,type:"start",index:v.start,modifier:v.hasModificand,brkt:v.brkt,rcomment:v.rcomment,gcomment:v.gcomment}),y.push({mark:v.markType,type:"end",index:v.end,brkt:v.brkt}),s++}y.sort(function(e,t){return t.index-e.index}),y.reverse(),(f=g.concat(y)).sort(function(e,t){return e.index!=t.index?e.index-t.index:e.type!=t.type?"start"==e.type?1:-1:0});var x=e.dataset.seq||H.semanticSequence++||0;e.dataset.seq=x;let C=0,T=0;for(s=0;null!=f[s];){let e="",t=f[s];"start"==t.type?(e+='<span class="sem '+t.mark.toLowerCase(),"RCM"==t.mark&&(e+=` mfd-${x}-`+ ++T),e+='"',t.modifier&&(e+=` data-mfd="${x}-${T}"`),t.rcomment&&(e+=` data-rc="${t.rcomment}"`),t.gcomment&&(e+=` data-gc="${t.gcomment}"`),e+=">"):e+="</span>",a=a.substring(0,C+t.index)+e+a.substring(C+t.index),C+=e.length,s++}e.insertAdjacentHTML("afterbegin",a)}let r=[".s",".v",".o",".po",".to",".go",".ptco",".appo",".c",".oc",".a",".m"];function c(t){var a=t.querySelectorAll(".sem"),e=r.some(e=>t.matches(e))?1:0;let n=0;if(t.removeAttribute("data-lv"),0<a.length&&!t.matches(".sem.v"))for(let e=0,t=a.length;e<t;e++)n=Math.max(n,c(a[e]));return e&&(0<n?(t.classList.remove("inner"),t.classList.add("outer"),t.setAttribute("data-lv",n)):(t.classList.remove("outer"),t.classList.add("inner"))),e+n}let d=["acls","ncls","advcls","ccls","pcls","cls","adjphr","advphr","ptcphr","phr","conj"],p={ccls:{type:"ccls",brackets:["{","}"]},pcls:{type:"ccls",brackets:["{","}"]},conj:{type:"conj",brackets:["(",")"]},phr:{type:"phr",brackets:["(",")"]},adjphr:{type:"adjphr",brackets:["(",")"]},advphr:{type:"phr",brackets:["(",")"]},ptcphr:{type:"phr",brackets:["(",")"]},acls:{type:"acls cls",brackets:["[","]"]},advcls:{type:"advcls cls",brackets:["[","]"]},ncls:{type:"ncls cls",brackets:["[","]"]},cls:{type:"cls",brackets:["[","]"]}};function m(i){Array.from(i.querySelectorAll(".cls-start,.cls-end,.ccls-start,.ccls-end,.phr-start,.phr-end,.adjphr-start,.adjphr-end,.conj-start,.conj-end,.etc-start,.etc-end")).forEach(e=>e.remove()),T(i),j(i).find(".acls, .ncls, .advcls, .cls, .ccls, .pcls, .phr, .adjphr, .advphr, .ptcphr, .conj, .sem[data-lv]:not(:only-child), .ptc > .sem[data-lv], .tor > .sem[data-lv], .ger > .sem[data-lv]").get().reverse().forEach(function(a){var e=d.find(e=>a.classList.contains(e))||"",{type:e,brackets:t}=p[e]||{type:"etc",brackets:["[","]"]},n=i.ownerDocument.createElement("span"),r=i.ownerDocument.createElement("span");if(n.className=`brkt ${e}-start`,r.className=`brkt  ${e}-end`,n.textContent=t[0],r.textContent=t[1],t.includes("[")){var e=parseInt(a.dataset.lv||0),l=a.querySelectorAll(".sem[data-lv], .brkt[data-lv]");let t=e;for(let e=0;e<l.length;e++){var s=l[e],o=s.textContent.replace(/[[\](){}]/g,"");t=Math.max(t,parseInt(s.dataset.lv||0)+(o.length>a.textContent.replace(/[[\](){}]/g,"").length?1:0))}0<t&&(a.dataset.lv=t,n.dataset.lv=t,r.dataset.lv=t)}a.insertAdjacentElement("beforebegin",n),a.insertAdjacentElement("afterend",r)})}function h(d){let p=parseFloat(getComputedStyle(d.ownerDocument.documentElement).fontSize),m=d.querySelectorAll(".sem[data-gc]"),h=m.length,u=0;requestAnimationFrame(function e(){var a=m[u];let n,r,l=0;delete a?.dataset?.gcLv;for(let t=u;t<h;t++){var s=m[t],o=s.getClientRects(),i=null==(o=s.classList.contains("odd")&&1<o.length?o[1]:o[0])?0:o.top;let e=null==o?0:o.left;var c=getComputedStyle(s,"::after");if(s.classList.contains("rcm")?s.classList.contains("cmnt-align-start")?e-=p:null!=o&&null!=c&&(e+=o.width-parseFloat(c.width)-parseFloat(c.right)):e+=Math.max(0,parseFloat(c.left)),t>u){if(o=m[t-1],c=parseFloat(getComputedStyle(o,"::after").width),!(Math.abs(n-i)<p&&Math.abs(r-e)<5+c)||s.classList.contains("rcm")&&o.classList.contains("rcm")&&s.textContent==o.textContent)break;if(s.classList.contains("tor")){if(o.classList.contains("adjphr")){delete s.dataset.gc,o.dataset.gc="[to부정사 | 형용사구]";break}if(o.classList.contains("advphr")){delete s.dataset.gc,o.dataset.gc="[to부정사 | 부사구]";break}}else if(s.classList.contains("ptc")){if(o.classList.contains("adjphr")){delete s.dataset.gc,o.dataset.gc="[분사 | 형용사구]";break}if(o.classList.contains("advphr")){delete s.dataset.gc,o.dataset.gc="[분사 | 부사구]";break}}a.dataset.gcLv=++l}n=i,r=e}++u<h?requestAnimationFrame(e):requestAnimationFrame(()=>{{var s=d;let n=parseFloat(getComputedStyle(f.documentElement).fontSize),e=(j(s).find(".line-end").remove(),W([s]).filter(function(e){return e.nodeType==Node.TEXT_NODE})),r=("break-all"==getComputedStyle(s).wordBreak?e.forEach(e=>{let t=e;for(;1<t.length;)t=t.splitText(1)}):e.forEach(function(e){let t=e,a=t.data.substring(1).match(/[\s-]/);for(;t.nodeType==Node.TEXT_NODE&&null!=a&&-1<a.index;)t.splitText(a.index+("-"==a[0]?2:1)),t=t.nextSibling,a=t.data.substring(1).match(/[\s-]/)}),e=W([s]).filter(function(e){return e.nodeType==Node.TEXT_NODE}),0),l;e.forEach(e=>{var t=f.createRange(),a=(t.selectNode(e),t.getClientRects()[0]);null!=a&&a.x<r-+n&&((a=s.ownerDocument.createElement("span")).className="sem line-end",a.insertAdjacentHTML("afterbegin","&#8203;\n"),l?.data?.match(/\S/)?l?.replaceWith(l,a):l?.replaceWith(a,l)),l=e,t.selectNode(l),0<(a=t.getClientRects()).length&&(e=a[a.length-1],r=e.x+e.width)});var t=s.ownerDocument.createElement("span");t.className="sem line-end",t.insertAdjacentHTML("afterbegin","&#8203;\n"),s.appendChild(t),requestAnimationFrame(function(){E(s)})}})})}let y=["s","v","c","oc","a","po"],v=Array.from(y,e=>".inner."+e).toString();function x(r){var a,l,s=r.getElementsByClassName("sem inner");for(let e=0,t=s.length;e<t;e++){let n=s[e];if(null!=n)if(0<n.getElementsByClassName("sem inner").length){let a=new Range;var o=n.childNodes;for(let e=0,t=o.length;e<t;e++){var i,c=o[e];c.nodeType==Node.ELEMENT_NODE&&0<c.getElementsByClassName("inner").length?c.childNodes.forEach(function(e){var t;e.nodeType==Node.ELEMENT_NODE&&e.matches(".inner")||((t=r.ownerDocument.createElement("span")).className="sem v inner",t.dataset.rc=n.dataset.rc,t.dataset.rcMin=n.dataset.rcMin,a.selectNode(e),a.surroundContents(t))}):c.nodeType==Node.ELEMENT_NODE&&c.matches(".inner")||((i=r.ownerDocument.createElement("span")).className="sem v inner",i.dataset.rc=n.dataset.rc,i.dataset.rcMin=n.dataset.rcMin,a.selectNode(c),a.surroundContents(i))}n.outerHTML=n.innerHTML}else n.matches(v)&&(a=n.nextSibling)?.nextSibling?.nodeType==Node.ELEMENT_NODE&&(l=a.nextSibling,a.nodeType==Node.ELEMENT_NODE&&a.matches(v)&&C(n,l)?(n.insertAdjacentHTML("beforeEnd",a.innerHTML),a.remove(),e--):a.nodeType!=Node.ELEMENT_NODE&&(null==a.data||null==a.data.match(/[^\s]/))&&l.matches(v)&&C(n,l)&&(n.insertAdjacentHTML("beforeEnd",a.data+l.innerHTML),a.remove(),l.remove(),e--))}}function C(e,t){e=Array.from(e.classList).filter(e=>y.includes(e));let a=Array.from(t.classList).filter(e=>y.includes(e));return e.every(e=>a.includes(e))}function T(e){var t=e.querySelectorAll(".sem:not(.line-end)"),a=new Text;a.data=" ";for(let e=t.length-1;0<=e;e--){var n=t[e];if(n.hasChildNodes()){for(;n.firstChild.nodeType==Node.TEXT_NODE&&n.firstChild.data.startsWith(" ");)n.firstChild.data=n.firstChild.data.substring(1),n.parentNode.insertBefore(a.cloneNode(),n);for(;n.lastChild.nodeType==Node.TEXT_NODE&&n.lastChild.data.endsWith(" ");)n.lastChild.data=n.lastChild.data.slice(0,-1),n.parentNode.insertBefore(a.cloneNode(),n.nextSibling)}}}function S(e){if(e){e.removeAttribute("style"),e.querySelectorAll(".sem").forEach(e=>{0==e.textContent.length&&e.remove()});var a=e.querySelectorAll(".cmnt-align-center,.cmnt-align-start");for(let e=0,t=a.length;e<t;e++)a[e].classList.remove("cmnt-align-center","cmnt-align-start","odd");var n=e.querySelectorAll(".sem:not(.line-end)");for(let e=0,t=n.length;e<t;e++){var r,l=n[e],s=l.getClientRects();1<s.length?l.matches(".rcm")||s[0].width<10?(r=(l.matches(".rcm")?s[s.length-1].right:s[1].left)-s[0].left,s=l.matches(".rcm")?r:r+s[1].width/2,l.style.setProperty("--indent",r+"px"),l.style.setProperty("--indent-min",s+"px"),l.classList.remove("cmnt-align-start"),l.classList.add("cmnt-align-center","odd")):(l.style.removeProperty("--indent"),l.style.removeProperty("--indent-min"),l.classList.remove("cmnt-align-center","odd"),l.classList.add("cmnt-align-start")):(l.style.removeProperty("--indent"),l.style.removeProperty("--indent-min"),l.classList.remove("cmnt-align-start","odd"),l.classList.add("cmnt-align-center"))}requestAnimationFrame(function(){h(e)})}}function N(u,e){Array.from(u.querySelectorAll(".curved_arrow,.gc_line")).forEach(e=>e.remove());var t=u.ownerDocument,f=parseFloat(getComputedStyle(t.documentElement).fontSize),a=j(u).offset(),n=a.left,t=t.defaultView,g=t.scrollX-n,y=t.scrollY-a.top;let v=Object.assign({lineWidth:f/8,size:f/3,strokeStyle:"#FFCC99",header:!1},e),x=Object.assign({lineWidth:f/8,size:f/3,strokeStyle:"#FFCC99"},e),C=[],r=u.getClientRects()[0]?.top||0;var l=u.querySelectorAll(".line-end");for(let e=0,t=l.length;e<t;e++){var s=r+parseFloat(getComputedStyle(l[e]).lineHeight);C.push({top:r,bottom:s}),r=s}var o=u.querySelectorAll("[data-mfd]");for(let e=0,t=o.length;e<t;e++){var T=o[e],d=W([T]).filter(e=>"​\n"!=e.textContent),b=u.querySelector(".sem.mfd-"+T.dataset.mfd);if(null!=b){var p=W([b]).filter(e=>"​\n"!=e.textContent),m=d.length,k=p.length;let e=0,t=m-1,a=0,n=k-1,o=d[e++],i=d[t--],c=p[a++],h=p[n--];for(h.parentElement.classList.contains("line-end")&&(h=p[n--]);e<m&&0===o.length;e++)o=d[e];for(let e=t;0<=e&&0===i.length;e--)i=d[e];for(;a<k&&0===c.length;a++)c=p[a];for(let e=n;0<=e&&0===h.length;e--)h=p[e];var b=_(o)[0],S=_(i).slice(-1)[0],N=_(c)[0],E=_(h).slice(-1)[0];if(b&&S&&N&&E){var L=b.top+z(o),M=S.top+z(i),A=N.top+z(c),O=E.top+z(h);let d=parseFloat(getComputedStyle(u).width)||0,p,e,t,a=g,n=y,r=g,l=y,s=!1,m=[];if(O+E.height<L?(s=!0,e=E,t=b,a+=b.left+f/3,n+=L-f,r+=E.right-f/3,l+=O-f,v.p0x=0,x.p0y=l,x.p0x=d,x.p1y=l):A>M+S.height?(s=!0,e=S,t=N,a+=S.right-f/3,n+=M-f,r+=N.left+f/3,l+=A-f,v.p0x=d,x.p0y=l,x.p0x=0,x.p1y=l):E.x<b.x?(e=E,t=b,a+=b.left+f/3,n+=L-f,r+=E.right-f/3,l+=O-f,v.p0x=(a+r)/2,x.p0y=n,x.p0x=(a+r)/2,x.p1y=n):N.x>S.x&&(e=S,t=N,a+=S.right-f/3,n+=M-f,r+=N.left+f/3,l+=A-f,v.p0x=(a+r)/2,x.p0y=n,x.p0x=(a+r)/2,x.p1y=n),e&&t){var w=Math.min(e.top,t.top),F=Math.max(e.top,t.top);for(let e=0,t=C.length;e<t;e++){var P=C[e];P.top>w&&P.bottom<F&&m.push(P.bottom-u.getClientRects()[0].top-f)}b=t.left+2*f/3-e.right+(s?d*(m.length+1):0);p=15+.1*Math.log(b),v.className="curved_arrow start mfd"+T.dataset.mfd,x.className="curved_arrow end mfd"+T.dataset.mfd,v.p0y=n-p,v.p1x=a,v.p1y=n-p,v.p2x=a,v.p2y=n,x.p0y-=p,x.p1x=r,x.p1y-=p,x.p2x=r,x.p2y=l,q(u,v),q(u,x);for(let c=0,e=m.length;c<e;c++)requestAnimationFrame(function(){{var n=0,r=m[c],l=p,s=d,o=u,i=v;let e=i.size-i.lineWidth,t=o.ownerDocument.createElement("canvas"),a=(t.className=i.className.replace("start","btwn"),t.style.position="absolute",t.style.top=r-l-e+"px",t.style.left=n-e+"px",t.dataset.height=l,t.getContext("2d"));t.style.width=2*e+s+"px",t.style.height=2*e+i.lineWidth+"px",r=H.devicePixelRatio||1,t.width=(2*e+s)*r,t.height=(2*e+i.lineWidth)*r,a.scale(r,r),a.strokeStyle=i.strokeStyle,a.lineWidth=i.lineWidth,a.moveTo(e,e),a.lineTo(s+e,e),a.stroke(),o.append(t)}})}}}}var i=u.querySelectorAll("[data-gc-lv]");for(let t=0,e=i.length;t<e;t++){var c=i[t],h=getComputedStyle(c,"::after"),R=c.getClientRects()[c.matches(".odd")?1:0],D=(c.matches(".odd")?f-parseFloat(h.bottom):parseFloat(h.top))+y+R.top;let e={p0x:Math.max(7,parseFloat(h.left))+g+R.left,p0y:D+.35*f,p1y:D+.35*f,curve:!1,lineWidth:1,header:!1,size:2,className:"gc_line",strokeStyle:"rgb(158,175,234)"};c.matches(".cls,.ncls,.acls,.advcls,.phr,.adjphr,.advphr,.ptcphr")?(D=(h=c.previousElementSibling.getClientRects())[h.length-1],e.p1x=g+R.left-.25*f,e.p2x=e.p1x,e.p2y=y+(c.matches(".odd")?R.top:D.top+.17*D.height)):(e.p1x=g+R.left+.25*f,e.p2x=e.p1x,e.p2y=y+R.top),requestAnimationFrame(()=>q(u,e))}}function _(e){var t=e.ownerDocument.createRange();t.selectNodeContents(e);e=Array.from(t.getClientRects()).filter(e=>0<e.width);return 0<e.length?[e[0],e[e.length-1]]:[null,null]}function z(e){return(parseFloat(getComputedStyle(e.parentElement).fontSize)||16)-(parseFloat(getComputedStyle(e.parentElement).top)||0)}let E=function(a){var r=parseFloat(getComputedStyle(a.ownerDocument.documentElement).fontSize),n=(a.style.lineHeight="1rem",W([a]).filter(function(e){return e.nodeType==Node.TEXT_NODE}));let l=0,s=0,o=0,i=0,c=0;for(let e=0,t=n.length;e<t;e++){var d=n[e],p=new Range,p=(p.selectNode(d),p.getClientRects()[0]),m=d.parentElement;if(null!=p&&null!=d.data&&null!=d.data.match(/[^\s]/)){let n=p.height;if(m.matches(".etc-start,.etc-end,.cls-start,.cls-end")){n=1.35*r;var h=parseFloat(getComputedStyle(m).top);let e,t,a;a=m.matches(".cls-start,.cls-end")?(e=963*p.height/1469,t=811*e/963-h-n,152*e/963+h):(e=755*p.height/1131,t=726*e/755-h-n,29*e/755+h),i=Math.max(i,t),c=Math.max(c,a)}null!=m&&m.classList.contains("line-end")?(m.style.lineHeight=Math.max(o,1.35*r+i+s+(0<l?.5*r:0))+"px",s=c,e==t-1?a.style.paddingBottom=c+"px":(o=0,i=0,c=0),l++):(o=Math.max(o,n),h=((e,a,n)=>{let t=e.parentElement,r=j(t).parents(".sem").add(t.matches(".sem")?t:null),l=r.length,s=0,o=0;for(let t=0;t<l;t++){var i=r.get(t),c=i.getClientRects(),d=c[0],c=c[1],d=!i.matches(".odd")&&Math.max(Math.abs(d.left-a.left),Math.abs(d.top-a.top))<16,c=i.matches(".odd")&&null!=c&&Math.max(Math.abs(c.left-a.left),Math.abs(c.top-a.top))<16,p=j(i).parents("[data-rc]").get(0)||(i.matches("[data-rc]")?i:null);let e;null!=p&&(e=parseFloat(getComputedStyle(p).paddingBottom),o=Math.max(o,e));var p=getComputedStyle(i,"::before");i.matches("[data-rc]")&&c&&isFinite(parseFloat(p.bottom))?o=Math.max(o,e,0-parseFloat(p.bottom)+(u.matches?parseFloat(p.paddingBottom):0)-.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize)):i.matches("[data-rc]")&&d&&isFinite(parseFloat(p.top))&&(o=Math.max(o,e,parseFloat(p.top)-1.35*n+(u.matches?parseFloat(p.paddingBottom):0)+.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize))),i.matches("[data-gc]")&&(d||c)&&(p=getComputedStyle(i,"::after"),s=Math.max(s,i.matches(".odd")?(parseFloat(p.bottom)||0)+.5*parseFloat(p.lineHeight)+.5*parseFloat(p.fontSize):.5*parseFloat(p.fontSize)-parseFloat(p.top)-.5*parseFloat(p.lineHeight)))}return{upperHeight:s,lowerHeight:o}})(d,p,r),i=Math.max(i,h.upperHeight),c=Math.max(c,h.lowerHeight))}}requestAnimationFrame(function(){N(a)})};function W(t){let n=[];for(let e=0;e<t.length;e++)null!=t[e]&&!function t(a){if(a.childNodes&&0!==a.childNodes.length)for(let e=0;e<a.childNodes.length;e++)t(a.childNodes[e]);else n.push(a)}(t[e]);return n}H.tandem={showSemanticAnalysis:async function(e,t,a){H.semanticSequence=H.semanticSequence||0;var n,r=a[0].ownerDocument.createElement("div");return r.className="semantics-result",e=e,t=await l(t)||[],(n=r).innerHTML="",s(e,t,n),c(n),x(n),T(n),m(n),a.append(r),S(r),r},checkGCDepth:h,checkPOSDepth:c,svocText2Arr:l,svocArr2Text:t,cleanSvocDOMs:function(e){var a=(e=e.cloneNode(!0)).querySelectorAll(".brkt,.line-end,canvas.curved_arrow");for(let e=0,t=a.length;e<t;e++)a[e].remove();return e},correctMarkLine:S,createBasicDOMs:s,drawConnections:N,splitInners:x,getSvocBytes:async function(e){return t(i(e))},trimTextContent:T,wrapWithBracket:m,swapParentAndChild:function(t,e){t.contains(e)?(t.parentNode.replaceChild(e,t),Array.from(e.childNodes).forEach(e=>t.appendChild(e)),e.appendChild(t)):console.warn(t+`는 ${e}의 부모가 아닙니다.`)}}})(jQuery,this,document);