!function(r,s,g){let c=[],d=!1,m=[],p=1,a=1,t={el:"span",style:"padding: 0.33rem;",className:"egg-confirm position-absolute top-0 end-0 translate-middle-y bg-danger border border-light rounded-circle"},n=s.documentElement.clientWidth,e=new ResizeObserver(()=>{g.innerWidth>s.documentElement.clientWidth&&(n=s.documentElement.clientWidth,e.disconnect())}),u=(e.observe(s.documentElement),{el:"div",id:"newEggModal",className:"modal",tabIndex:"-1","data-bs-backdrop":"static",style:{zIndex:1071,background:"radial-gradient(circle, white 25%, #fff4)"},children:[{el:"div",className:"modal-dialog modal-dialog-centered overflow-hidden m-0",style:"max-width: 100%",children:[{el:"div",className:"modal-content bg-transparent border-0",children:[{el:"div",className:"modal-header border-0 d-block text-center"},{el:"div",className:"modal-body w-100 text-center",style:"min-height: 77vmin",children:[{el:"span",className:"circle-dark",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"70vmin",height:"70vmin",backgroundColor:"var(--fc-purple)",borderRadius:"37vmin",zIndex:1},children:[{el:"object",data:"https://static.findsvoc.com/images/app/egg/new-title.svg",style:{position:"absolute",top:"3vmin",left:"37.5%",width:"25%",height:"20%",zIndex:2,overflow:"visible",transform:"translateZ(0)"}}]},{el:"span",className:"circle-dark-dashed",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%) translateZ(0)",borderRadius:"37vmin",backgroundColor:"transparent",border:"2vmin dashed var(--fc-purple)",width:"76vmin",height:"76vmin"}}]},{el:"div",className:"modal-footer d-block border-0 text-center",children:[{el:"button",className:"btn btn-fico rounded-5 col-md-2 col-4 fs-5 fw-bold js-verify-btn","data-bs-dismiss":"modal",onclick:()=>location.assign("/mypage"),textContent:"확인하기",style:"transform: translateZ(0)"},{el:"button",className:"btn btn-outline-fico rounded-5 col-md-2 col-4 fs-5 fw-bold","data-bs-dismiss":"modal",textContent:"닫기"}]}]}]}]}),f=!0,h,b,v={x:0,y:0};r(s).on("mousedown",e=>{v={x:e.clientX,y:e.clientY}}).ajaxComplete((e,t,a)=>{if(null!=t.responseJSON&&(null!=t.responseJSON.eggList&&0<t.responseJSON.eggList.length||null!=t.responseJSON.eggResponse&&0<t.responseJSON.eggResponse.eggList.length)){let o=[];m=[],(t.responseJSON.eggList||t.responseJSON.eggResponse.eggList).forEach(a=>{for(let e=0,t=a.eggNum;e<t;e++)0==c[a.eggColor]&&m.push(a.eggColor),c[a.eggColor]++,o.push((n=a.eggColor,createElement({el:"img",src:`https://static.findsvoc.com/images/app/egg/min/${n+1}.png`,style:{position:"fixed",zIndex:1071,left:v.x-25+"px",top:v.y-25+"px",transform:"translateZ(0)"}})));var n}),g.localStorage.setItem("fico_egg_tray",JSON.stringify(c)),d=!1,g.localStorage.setItem("fico_egg_confirmed",!1),x();{var i=o;var l=void 0;let a=0<p?function(e){return createElement({el:"img",id:"egg_tray",src:`https://static.findsvoc.com/images/app/egg/bucket/bucket-${5<e?e%6+1:e}.svg`,onclick:()=>{"/craft/battle/step"!=g.location.pathname&&g.location.assign("/mypage")},"data-bs-toggle":"tooltip",title:"마이페이지에서 에그 확인",style:{position:"fixed",left:g.innerWidth+"px",top:g.innerHeight-150+"px",zIndex:1072,width:"70px",height:"70px",cursor:"pointer",transform:"translateZ(0)"}})}(p):createElement({el:"div",id:"plasticbag_container",onclick:()=>g.location.assign("/membership"),"data-bs-toggle":"tooltip",title:["깨진 에그가 아까워..→","에그를 받아내는 방법 없나?→","비닐봉지 말고 없나?→","에그가 왜 깨지죠?→","아직 회원이 아니군요?"][Math.floor(5*Math.random())],style:{position:"fixed",left:g.innerWidth+"px",top:g.innerHeight-175+"px",width:"70px",height:"70px",zIndex:1072,pointerEvents:"auto",cursor:"pointer"},innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="70px" height="70px" viewBox="0 0 651 890"><path id="plasticBagPath" stroke="#000" fill="#e0e0e8" style="transform:translateZ(0)" d="M 6.00,30.50 C 6.00,30.50 1.50,785.00 1.50,785.00 1.50,785.00 228.50,773.50 250.50,772.00 272.50,770.50 339.50,768.00 366.00,767.00 392.50,766.00 411.00,762.00 430.00,761.50 449.00,761.00 649.50,750.50 649.50,750.50 649.50,750.50 612.00,2.00 612.00,2.00 612.00,2.00 493.50,11.00 493.50,11.00 493.50,11.00 499.50,237.50 499.50,237.50 499.50,237.50 133.50,248.00 133.50,248.00 133.50,248.00 133.50,24.50 133.50,24.50 133.50,24.50 6.00,30.50 6.00,30.50 Z"/></svg>'});s.body.appendChild(a),a.style.transform+=" translateZ(0)",a.onmouseover=()=>{a.dataset.pause=!0},a.onmouseout=()=>{delete a.dataset.pause};let t;anime({targets:a,left:[g.innerWidth,n-70],duration:500}),i.forEach(e=>s.body.appendChild(e)),(y=anime.timeline({targets:i,delay:anime.stagger(200)})).add({duration:500,scale:[0,1],translateY:[10,-10],easing:"cubicBezier(0,2,1,2)",rotateZ:{value:[anime.stagger(75,{start:15}),anime.stagger(75,{start:75})],easing:"linear"}}).add({duration:2e3,left:{value:function(){return n-56+anime.random(-4,4)},easing:"linear"},top:[{value:v.y/2,easing:"cubicBezier(0,0,0,1)",duration:1e3},{value:g.innerHeight-145,easing:"cubicBezier(0,0,1,0)",duration:1e3}],rotateZ:{value:anime.stagger(150,{start:1200}),easing:"cubicBezier(0,.5,.5,1)"},scale:{value:.3,easing:"cubicBezier(.5,0,1,.5)"},begin:()=>{0<p?setTimeout(()=>{anime({targets:a,translateY:[5,0],delay:anime.stagger(200),duration:200,loop:i.length,easing:"easeOutExpo"})},2e3):(setTimeout(()=>{(t=bootstrap.Tooltip.getOrCreateInstance(a)).show()},1900),anime({targets:"#plasticBagPath",d:{value:[b[0],b[1]]},delay:1900,duration:500}))},complete:()=>{if(0<p){var n=p;let t=0;for(let e=0;e<9;e++)t+=c[e];if(w(t),0<m.length||n<p){null==s.getElementById("newEggModal")&&(s.body.prepend(createElement(u)),location.pathname.includes("/craft/battle/"))&&s.querySelector("#newEggModal .js-verify-btn").remove(),r("#newEggModal .modal-body .new-obj").remove();let a=[];m.forEach(e=>{e=createElement({el:"div",className:"new-obj",style:{position:"absolute",left:"50%",top:"calc(50% + 4vmin)",width:"37.5vmin",height:"50vmin",maxWidth:"50vmin",zIndex:1071,maxHeight:"50vmin",transformOrigin:"center",opacity:0,transform:"translate(-50%,-50%) translateZ(0)",borderRadius:"50% 50% 50% 50%/60% 60% 40% 40%",background:`center/ 102% 101% url(https://static.findsvoc.com/images/app/egg/egg-${e+1}.png) no-repeat`}});r("#newEggModal .modal-body").append(e),a.push(e)}),n<p&&(n=p,n=createElement({el:"img",className:"new-obj",src:`https://static.findsvoc.com/images/app/egg/bucket/bucket-${5<n?n%6+1:n}.svg`,style:{position:"absolute",left:"50%",top:"calc(50% + 4vmin)",maxWidth:"50vmin",zIndex:1071,maxHeight:"50vmin",transformOrigin:"center",opacity:0,transform:"translate(-50%,-50%) translateZ(0)"}}),r("#newEggModal .modal-body").append(n),a.push(n)),r("#newEggModal").modal("show"),anime({targets:"#newEggModal .circle-dark object",scale:[0,1],duration:1200}),h=anime({targets:"#newEggModal .circle-dark-dashed",rotateZ:360,duration:8e3,loop:!0,easing:"linear"}),a.forEach((e,t)=>{setTimeout(()=>{0==t&&showFireworks({target:r("#newEggModal .modal-body")[0],particles:20,time:1e3*a.length+2e3,distance:100,interval:200,size:15}),anime({targets:e,duration:1e3,scale:[0,1],opacity:[0,1],complete:()=>{t+1!=a.length&&e.remove()}})},500+1e3*t)}),f=!1,location.pathname.includes("/craft/battle/")||anime({targets:"#newEggModal .modal-footer .js-verify-btn",loop:!0,scale:[1,1.05],direction:"alternate",easing:"linear",duration:1e3,delay:500})}let e=setInterval(()=>{null==a.dataset.pause&&f&&(clearInterval(e),anime({targets:[i,a],left:[g.innerWidth],duration:1e3,easing:"easeInElastic",delay:400,complete:()=>{i.forEach(e=>e.remove()),a.remove()}}),"function"==typeof l)&&l.call()},100)}}}),0==p&&y.add({delay:anime.stagger(200,{start:500}),duration:500,top:g.innerHeight,easing:"cubicBezier(1,0,1,0)",begin:()=>{anime({targets:"#plasticBagPath",delay:500,duration:500,easing:"cubicBezier(1,0,1,0)",d:{value:b[2]}});let a=[];for(let e=0,t=i.length;e<t;e++)a.push(createElement({el:"img",src:"https://static.findsvoc.com/images/app/egg/bucket/egg-crashed.svg",style:{position:"fixed",right:"0px",top:g.innerHeight-27.5+"px",width:"76.2px",height:"27.5px",transformOrigin:"bottom",transform:"scaleY(0) translateZ(0)"}}));r(s.body).append(a),anime.timeline({targets:a}).add({delay:anime.stagger(200,{start:700}),duration:1e3,scaleY:[0,2,0],scaleX:[0,1,.5],opacity:[1,1,0],easing:"cubicBezier(0,1,0,1)",complete:()=>a.forEach(e=>e.remove())})},complete:()=>{i.forEach(e=>e.remove());let e=setInterval(()=>{null==a.dataset.pause&&(clearInterval(e),anime({targets:a,left:g.innerWidth,duration:500,delay:500,complete:()=>{t.dispose(),a.remove()}}),"function"==typeof l)&&l.call()},100)}})}}}).on("hide.bs.modal","#newEggModal",function(){f=!0,null!=h&&(h.pause(),h=null)});let y;function x(){d||s.querySelectorAll('.nav-link[href="/mypage"] .icon,[data-bs-target="#mobileDropdown"] .navbar-toggler-icon').forEach(e=>{null==e.querySelector(".egg-confirm")&&e.appendChild(createElement(t))})}function w(t){if(-1<t){p=1,a=1;let e=t;for(;9<=e;)e/=3,a*=3,p++;p=Math.max(1,p)}else p=0}g.eggManager={setEggTray:function(e,a){if(null!=e&&0<e.length){var n;s.referrer.includes("/auth/login")?((c=JSON.parse(e))[9]=parseInt(a),g.localStorage.setItem("fico_egg_tray",JSON.stringify(c)),null==g.localStorage.getItem("fico_egg_confirmed")&&(d=!0,g.localStorage.setItem("fico_egg_confirmed",!0))):(null!=(n=g.localStorage.getItem("fico_egg_tray"))?c=JSON.parse(n):((c=JSON.parse(e))[9]=parseInt(a),g.localStorage.setItem("fico_egg_tray",JSON.stringify(c))),location.pathname.includes("/mypage")?(d=!0,g.localStorage.setItem("fico_egg_confirmed",!0)):null!=(n=g.localStorage.getItem("fico_egg_confirmed"))&&(d=JSON.parse(n)),x());let t=0;for(let e=0;e<9;e++)t+=c[e];w(t)}else r.getJSON("https://static.findsvoc.com/data/egg/plasticbag-anim-paths.json",e=>{b=e}),null!=g.localStorage.getItem("fico_egg_tray")&&g.localStorage.removeItem("fico_egg_tray"),c=[],w(-1)},getBucketLevel:function(){return p},getBucketSize:function(){return a}}}.call(this,jQuery,document,this);