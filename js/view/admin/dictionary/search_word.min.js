function pageinit(){$("#searchWordForm").on("submit",function(e){e.preventDefault();e=$("#searchOption").val();const n=$("#keywordDiv input").val().trim();0!=n.length&&$.getJSON(`/adminxyz/word/search/${e}/`+n,function(n){$("#searchResult").collapse("show").data("wordId",n.wid),$("#searchResult .title").text(n.title),$("#searchResult .level").text(n.level),$("#searchResult .level-input").val(n.level);var e=n?.senseList;$("#searchResult .empty-list").toggle(null==n),$("#searchResult .one-word-unit-section").toggle(null!=n),$("#searchResult .one-word-unit-section .title-section").siblings().remove(),$("#searchResult .one-word-unit-section").append(createElement(Array.from(e,n=>({el:"div",className:"one-part-unit-section row g-3 mb-1",children:[{el:"div",className:"col-2 text-end pe-5 lh-lg",children:[{el:"span",className:"part",textContent:n.partType}]},{el:"div",className:"col-8 text-center",children:[{el:"input",type:"text",className:"meaning form-control",value:n.meaning,"data-org":n.meaning,maxLength:100,oninput:function(){$(this).closest(".one-part-unit-section").find(".js-edit-meaning,.js-edit-cancel").show()}}]},{el:"div",className:"col-2 text-center",children:[{el:"button",type:"button",className:"js-edit-meaning btn btn-fico fas fa-check col-6 h-100",style:"display:none;",onclick:function(){const t=$(this).closest(".one-part-unit-section").find("input");var e=t.val(),e={senseId:n.sid,meaning:e};$.ajax({url:"/adminxyz/dictionary/sense/edit",type:"POST",data:e,success:e=>{alert(`뜻이 수정되었습니다.
: `+e),t[0].dataset.org=e},error:()=>alertModal("수정이 실패했습니다.")})}},{el:"button",type:"button",className:"js-edit-cancel btn btn-outline-fico fas fa-times col-6 h-100",style:"display:none;",onclick:function(){var e=$(this).closest(".one-part-unit-section").find("input");e.val(e.data("org")),$(this).hide(),$(this).siblings(".js-edit-meaning").hide()}}]}]})).concat([{el:"label",className:"add-new-sense-label mt-5 mb-3",textContent:"뜻 추가"},{el:"div",className:"add-new-sense-section row g-3",children:[{el:"div",className:"col-2",children:[{el:"select",className:"form-select",children:[{el:"option",value:"n.",textContent:"명사"},{el:"option",value:"ad.",textContent:"부사"},{el:"option",value:"v.",textContent:"동사"},{el:"option",value:"vt.",textContent:"타동사"},{el:"option",value:"vi.",textContent:"자동사"},{el:"option",value:"prep.",textContent:"전치사"},{el:"option",value:"conj.",textContent:"접속사"},{el:"option",value:"a.",textContent:"형용사"},{el:"option",value:"abbr.",textContent:"약어"},{el:"option",value:"pron.",textContent:"대명사"},{el:"option",value:"aux.",textContent:"조동사"},{el:"option",value:"num.",textContent:"수사"},{el:"option",value:"ordi.",textContent:"서수"},{el:"option",value:"int.",textContent:"감탄사"},{el:"option",value:"det.",textContent:"한정사"}]}]},{el:"div",className:"col-8",children:[{el:"input",type:"text",className:"form-text form-control mt-0",placeholder:"뜻을 입력하세요.",maxLength:100,onclick:function(){$(this).closest(".add-new-sense-section").find(".js-add-meaning,.js-add-cancel").show()}}]},{el:"div",className:"col-2",children:[{el:"button",type:"button",className:"js-add-meaning btn btn-fico fas fa-check col-6 h-100",style:"display:none;",onclick:function(){var e=$(this).closest(".add-new-sense-section").find("select"),t=$(this).closest(".add-new-sense-section").find("input");0!=t.val().trim()&&(e={wordId:n.wid,partType:e.val(),meaning:t.val().trim()},$.ajax({url:"/adminxyz/dictionary/sense/add",type:"POST",data:e,success:n=>{alert(`뜻이 추가되었습니다.
: ${n.partType} `+n.meaning),$(".add-new-sense-label").before(createElement({el:"div",className:"one-part-unit-section row g-3 mb-1",children:[{el:"div",className:"col-2 text-end pe-5 lh-lg",children:[{el:"span",className:"part",textContent:n.partType}]},{el:"div",className:"col-8 text-center",children:[{el:"input",type:"text",className:"meaning form-control",value:n.meaning,"data-org":n.meaning,maxLength:100,oninput:function(){$(this).closest(".one-part-unit-section").find(".js-edit-meaning,.js-edit-cancel").show()}}]},{el:"div",className:"col-2 text-center",children:[{el:"button",type:"button",className:"js-edit-meaning btn btn-fico fas fa-check col-6 h-100",style:"display:none;",onclick:function(){const t=$(this).closest(".one-part-unit-section").find("input");var e=t.val().trim(),e={senseId:n.sid,meaning:e};$.ajax({url:"/adminxyz/dictionary/sense/edit",type:"POST",data:e,success:e=>{alert(`뜻이 수정되었습니다.
: `+e),t[0].dataset.org=e},error:()=>alertModal("수정이 실패했습니다.")})}},{el:"button",type:"button",className:"js-edit-cancel btn btn-outline-fico fas fa-times col-6 h-100",style:"display:none;",onclick:function(){var e=$(this).closest(".one-part-unit-section").find("input");e.val(e.data("org")),$(this).hide(),$(this).siblings(".js-edit-meaning").hide()}}]}]}))},error:()=>alertModal("수정이 실패했습니다.")}))}},{el:"button",type:"button",className:"js-add-cancel btn btn-outline-fico fas fa-times col-6 h-100",style:"display: none;",onclick:function(){$(this).hide(),$(this).closest(".add-new-sense-section").find(".js-add-meaning").hide(),$(this).closest(".add-new-sense-section").find("input").val("")}}]}]}])))}).fail((e,t)=>{"parsererror"==t?($("#searchResult").collapse("show"),$("#searchResult .title").text(n),$("#searchTitle, #saveTitle").val(n),$("#searchResult .empty-list").show(),$("#searchResult .one-word-unit-section").hide()):alertModal("에러가 발생했습니다.\n"+e.responseJSON.exception)})}),$(".level").on("click",function(){$("#searchResult").find(".level, .level-input, .js-level-edit, .js-level-cancel").toggle(),$("#searchResult .level-input").val($(this).text()).focus()}),$(".js-level-edit").on("click",function(){const e=$("#searchResult .level");var t=$("#searchResult .level-input");const n=parseInt(t.val().trim());Number.isNaN(n)||1e4<n||n<0?(alertModal("0~10,000 숫자를 입력해 주세요."),t.focus()):(t=parseInt($("#searchResult").data("wordId")),$.ajax({type:"POST",url:"/adminxyz/dictionary/level/edit",data:{wordId:t,level:n},success:function(){alertModal("단어 난이도가 수정되었습니다."),e.text(n),$("#searchResult").find(".level, .level-input, .js-level-edit, .js-level-cancel").toggle()},error:function(){alertModal("에러가 발생했습니다.\n"+xhr.responseJSON.exception)}}))}),$(".js-level-cancel").on("click",function(){$("#searchResult").find(".level, .level-input, .js-level-edit, .js-level-cancel").toggle()}),$("#register").on("click",function(){var e=$("#searchTitle").val().trim(),t=$("#saveTitle").val().trim();$.getJSON(`/adminxyz/unword/add/${e}/`+t,function(){alertModal(`단어 ${title}(이)가 등록되었습니다.`),$("#alertModal").on("hide.bs.modal",()=>location.reload())}).fail((e,t)=>{"parsererror"==t?(alertModal(`단어 ${title}(이)가 등록되었습니다.`),$("#alertModal").on("hide.bs.modal",()=>location.reload())):alertModal("에러가 발생했습니다.\n"+e.responseJSON.exception)})})}