async function pageinit(t){const c={N:"#62A114",A:"#FFFF00",R:"#1462A1",C:"#808080",D:"#FF0000",P:"#FFA500",W:"#FFFFFF",H:"#A11462"},p=await $.get("https://static.findsvoc.com/fragment/workbook/element_templates.min.html",jQuery.noop,"html");function e(e){const n=e?.totalElements-e?.number*e?.size;$("#openVocasListDiv tbody").empty().append(Array.from(e.content,(t,e)=>{var a=$("#hiddenDivs tr.js-open-detail").clone();return Object.assign(a[0].dataset,{vocasId:t.vocasId,wordId:t.wordId,eng:t.eng,tokenStart:t.tokenStart,tokenEnd:t.tokenEnd}),a.find(".data-rnum").text(n-e),a.find(".data-part-type").text(t.partType),a.find(".data-title").text(t.title),a.find(".data-token").text(t.token),a.find(".data-append-meaning").text(t.appendMeaning),a.find(".data-alias").text(t.alias),a.find(".data-status").text(t.status).css("backgroundColor",c[t.status]),a.find(".data-regdate").text(new Date(t.regDate).format("yyyy-MM-dd")),a.find(".data-kor-list").append(Array.from(t.korList,t=>{var e=$("#hiddenDivs .data-kor").clone();return e.text(t),e})),a}));var t,a,o=e?.totalPages,i=e?.number+1,e=10*(Math.floor((i-1)/10)+1-1)+1,d=10+e<=o?10+e-1:o,s=$("#accountEventPagination").empty();10<e&&((a=$("#hiddenDivs .page-item").clone())[0].ariaLabel="Previous",(t=a.find(".page-link")[0]).ariaHidden=!0,t.dataset.pagenum=e-1,t.innerHTML="&laquo",s.append(a));for(let t=e;t<=d;t++){var r=$("#hiddenDivs .page-item").clone(),l=(t==i&&r.addClass("active"),r.find(".page-link")[0]);l.dataset.pagenum=t,l.textContent=t,s.append(r)}d<o&&((t=$("#hiddenDivs .page-item").clone())[0].ariaLabel="Next",(a=t.find(".page-link")[0]).ariaHidden=!0,a.dataset.pagenum=d+1,a.innerHTML="&raquo",s.append(t))}e(t),$(document).on("click",".page-link",function(){$.getJSON("/adminxyz/openvocas/list/"+this.dataset.pagenum,e).fail(()=>alertModal("오픈보카 페이지 조회 실패"))}),$(document).on("click",".js-open-detail",function(){var t=this.closest("tr");const e=$("#wordDetailSection");var a=e.is(".show"),{eng:n,tokenStart:o,tokenEnd:i,wordId:d}=this.dataset,s=$(this).find(".data-status").text(),r=Array.from(this.querySelectorAll(".data-kor"),t=>t.textContent);async function l(t){const n=e.find(".one-word-unit-section");n.find(".word-title").text(t.title),n.find(".level").text(t.wordMeta?.wordLevel),n.find(".one-part-unit-section").remove(),t.senseList?.length?t.senseList?.forEach((t,e)=>{var a=$(p).find(".one-part-unit-section").clone(!0);a.find(".part").text(t.partType),a.find(".meaning").text(t.meaning),n.append(a)}):n.append($(p).find(".word-section .empty-list").clone())}a&&e.is($(t).next())?($(t).removeClass("active"),e.collapse("hide")):($(t).addClass("active").siblings("tr").removeClass("active"),$(t).after(e),a?e[0].scrollIntoView({behavior:"instant",block:"start"}):e.collapse("show"),o=parseInt(o),i=parseInt(i),e.find(".eng").html(n.substring(0,o).concat("<b>",n.substring(o,i),"</b>").concat(n.substring(i))),e.find(".kor-info").empty().append(createElement(Array.from(r,t=>({el:"div",textContent:t})))),e.find(".status-info-block select").val(s),$(this).data("wordInfo")?l($(this).data("wordInfo")):$.getJSON("/adminxyz/openvocas/word-search/"+d,t=>{l(t),$(this).data("wordInfo",t)}).fail(()=>alert("단어 정보를 조회하지 못했습니다.")))}),$("#editStatus").on("click",function(){const t=$(".js-open-detail.active")[0];var e=parseInt(t.dataset.vocasId),a=$(t).find(".data-status").text();const n=$(".status-info-block .form-select").val();a!=n?$.ajax({url:"/adminxyz/openvocas/status",type:"POST",data:{vocasId:e,oldState:a,newState:n},success:()=>{alertModal("상태가 변경되었습니다."),$(t).find(".data-status").text(n).css("backgroundColor",c[n])},error:()=>{alertModal("상태 변경에 실패했습니다.")}}):alertModal("변경하려는 상태가 이전과 동일합니다.")})}