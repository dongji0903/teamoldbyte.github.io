function pageinit(e){$(window).on("unload",()=>$("#loadingModal").modal("hide"));const i=300;e=e?i:parseInt(Cookies.get("BRLT")||0);const o=Math.max(0,i-e);var t=0<e?parseInt(Cookies.get("SRC")||0):0,t=Math.max(0,5-t);o<=0||t<=0?($(".demo-counter").css("color","#9abeb2").text(o<=0?"300자 소진":"5회 소진"),$("#text").prop("placeholder","금일 사용량을 모두 소진했습니다. 내일 다시 찾아와 주세요.").prop("disabled",!0).addClass("disabled-textarea")):($(".demo-counter").text("0/"+o),$("#text").attr("maxlength",o).prop("placeholder",`하루 최대 300자까지 분석할 수 있습니다. (금일 사용량 ${e}/300자)`));const a=$(".input-example-section .example-unit");let n=Math.floor(5.99*Math.random());if(function e(){let t=a.eq(n);t.css("z-index",1).css("opacity","0").fadeTo(200,1,()=>{setTimeout(()=>{t.fadeTo(0,0,()=>{t.css("z-index","auto"),n=(n+1)%6,e()})},8e3)})}(),!(o<=0||t<=0)){$(".input-form-section .search-btn").click(function(){const e=$("#text");var t;parseInt(Cookies.get("BRLT")||0)>=i?(this.classList.add("disabled"),e.val(null).prop("placeholder","금일 사용량을 모두 소진했습니다. 내일 다시 찾아와 주세요.").prop("disabled",!0).addClass("disabled-textarea")):(t=e.val().trim().quoteNormalize().replace(/[A-Za-z0-9]/,e=>e.toUpperCase())).length<8||!t.includes(" ")||!/[a-z]{2,}/.test(t)?alertModal("최소 8자 이상의 영어 문장 형식만 분석됩니다.",()=>e[0].focus()):1<tokenizer.sentences(t).length?alertModal("한 문장만 입력해 주시기 바랍니다.",()=>e[0].focus()):(e.val(t),$("#beforeSubmitModal").modal("show"))}),$(".js-submit-btn").click(function(){var e=$("#text"),t=e.val().trim().quoteNormalize().shrinkSpaces().capitalize1st();$("#hiddenText").val(t),e.val(null),$(".addForm").submit()}),$(".example-unit").click(function(){var e=this.querySelector(".sentence").innerText;$("#text").val(e).trigger("input")});let a;$("#text").on("input",function(){var e=function(){var e=$("#text").val(),t=$("#text")[0].selectionStart;e=extractHighlightInfo(e,t);return $("#text").val(e.input),$("#text").highlightWithinTextarea({highlight:[{className:"bg-fc-yellow",highlight:["×"]},{className:"bg-fc-purple corrected",highlight:e.arr}]}),$("#text").focus()[0].setSelectionRange(e.inputCursor,e.inputCursor),[e.input.includes("×"),0<e.arr.length]}(),t=this.value.trim().quoteNormalize().length,t=($(".demo-counter").text(t+"/"+o),$(".reset-textarea").toggle(0<t),e[0]||0==t);$(".invalid-input-warning").toggle(e[0]),$(".corrected-input-info").toggle(e[1]),$(".input-form-section .search-btn").toggleClass("disabled",t),anime({targets:".hwt-backdrop mark.corrected",keyframes:[{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,duration:1e3,easing:"cubicBezier(.7, .0, 1.0, 0.3)"},{display:"none",easing:"steps(1)"}]}),t?((a=a||new bootstrap.Tooltip(this,{title:`영어 문장을 ${o}자 이내로 입력하세요.`,customClass:"demo-text-invalid",offset:({placement:e})=>"top"==e?[100,0]:[0,0]})).enable(),a.show()):null!=a&&(a.hide(),a.disable())}).on("paste",function(e){e=((e.originalEvent.clipboardData||window.clipboardData).getData("Text")||"").length;this.value.length-getSelection().toString().length+e>o&&$("#warnLength").modal("show")}),$(".addForm").on("reset",function(){$(".demo-counter").text("0/"+o),null!=a&&(a.hide(),a.disable()),$("#text").focus(),$(".reset-textarea").hide(),$(".input-form-section .search-btn").addClass("disabled")}),$(".addForm").on("submit",function(){$("lottie-player:visible").each((e,t)=>{t.stop()}),$("#loadingModal").modal("show")})}}