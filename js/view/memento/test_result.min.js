async function pageinit(n){$.scrollUp({scrollText:'<i class="fas fa-angle-double-up"></i>',scrollSpeed:0});let i=await $.get("https://static.findsvoc.com/fragment/memento/memento_list.min.html",jQuery.noop,"html"),a={language:"ko",firstDayOfTheWeek:2},l="yyyy-MM-dd",s=0;var e=o(n);function o(e){return Array.from(e,e=>{var t=$(i).find(".memento-trace-block:eq(0)").clone(),a=(t[0].dataset.keepWordId=e.keepWordId||0,t[0].dataset.wordId=e.wordId||0,e.del&&t.children().prepend('<div class="completed-stamp"></div>'),e.mementoDtoList[0]?.pass),a=(t.find(".data-word-title").text(e.wordTitle).css("color",a?"#8F8":"#F88"),t.find(".data-save-date").text(new Date(e.saveDate).format("d MMM yyyy")),e.mementoDtoList.length),s=10*Math.ceil(a/10),o=Math.min(9,Math.floor(Math.max(0,a-1)/10)),s=(t.find(".data-test-count").text(a),t.find(".data-test-goal").text(s),t.find(".progress").attr("ariaValueNow",a%10).find(".progress-bar").css({width:((a-1)%10+1)/10*100+"%",backgroundColor:["#38b8c9","#f9d76f","#fcaf17","#f79900","#f86c6b","#d93838","#b71b1b","#a1176b","#8a33a3","#6c63ff"][o]}),t.find(".calendar-section"));return s.addClass("fico-theme"),d(s[0],e),"true"!=$("#toggleCalendarsBtn").attr("data-active")||$(".memento-list-section").is(".find-lucky-mode")?t.find(".low-part").css("display","none"):t.find(".js-toggle-lowpart").addClass("active"),t[0]})}function d(e,i){if(0<i.mementoDtoList.length){let n=i.mementoDtoList.sort((e,t)=>Date.parse(t.testDate)-Date.parse(e.testDate));e.id||(e.id=""+Date.now()+s++);var t=jsCalendar.new(e,new Date(i.saveDate),Object.assign({min:new Date(i.saveDate),max:new Date},a));t.onDateRender(function(t,e,a){e.classList.remove("saved","completed","correct","wrong","today"),delete e.dataset.bsToggle,delete e.dataset.bsHtml,delete e.dataset.bsTitle;let s="";var o;t.format(l)==new Date(i.saveDate).format(l)&&(e.classList.add("saved"),e.dataset.bsToggle="tooltip",e.dataset.bsHtml="true",s+='<p class="mb-0">단어 보관 날짜</p>',e.dataset.bsTitle=s),a.isSelected&&(o=(a=n.filter(e=>new Date(e.testDate).format(l)==t.format(l))).filter(e=>e.pass),e.classList.add(.5<o.length/a.length?"correct":"wrong"),e.dataset.bsToggle="tooltip",e.dataset.bsHtml="true",s+='<p class="mb-0">맞힘:'+o.length+"/틀림:"+(a.length-o.length)+"</p>",e.dataset.bsTitle=s),i.del&&t.format(l)==new Date(i.updateDate).format(l)&&(e.classList.add("completed"),e.dataset.bsToggle="tooltip",e.dataset.bsHtml="true",s='<p class="mb-0">암기 완료 날짜</p>',e.dataset.bsTitle=s),t.format(l)==(new Date).format(l)&&e.classList.add("today")}),t.select(Array.from(i.mementoDtoList,e=>new Date(e.testDate))),i.del?t.goto(new Date(i.updateDate)):t.goto(new Date(n[0]?.testDate))}else jsCalendar.new($(e).addClass("pe-none opacity-50")[0],0,a).goto(new Date)}function r(e,t){let a=e.find(".calendar-section").get(0),s=e.find(".sentence-section").get(0);$(0==t?a:s).css("visibility","visible"),anime({targets:a,opacity:[t,1-t],easing:"linear",duration:300,complete:e=>{0!=t&&$(a).css("visibility","hidden")}}),anime({targets:s,opacity:[1-t,t],easing:"linear",duration:300,complete:e=>{1!=t&&$(s).css("visibility","hidden")}})}$(".memento-list-section").empty().append(e),anime({targets:e,scale:[0,1],easing:"linear",duration:300,delay:anime.stagger(150)}),$(document).on("click",".js-check-complete",function(){let s=this,o=$(this).closest(".memento-trace-block");confirmModal("이 단어를 암기완료 하셨습니까?",()=>{let a=parseInt(o[0].dataset.keepWordId),e=o.find(".data-word-title").text().trim();$.ajax({url:"/memento/word/change-status",type:"POST",contentType:"application/json",data:JSON.stringify({keepWordId:a,del:!0}),success:()=>{var t=a;if(sessionStorage.getItem(c)){let e=JSON.parse(sessionStorage.getItem(c));e&&(e=e.filter(e=>e.keepWordId!=t),sessionStorage.setItem(c,JSON.stringify(e)))}alertModal(`단어 <b>${e}</b>를 암기 완료했습니다.`,()=>{o.children().prepend('<div class="completed-stamp"></div>').find(".calendar-section .today").addClass("completed"),$(s).addClass("pe-none opacity-50");var e=n.find(e=>e.keepWordId==a);e.del=!0,e.updateDate=(new Date).format(l),d(o.find(".calendar-section").empty()[0],e)})}})})}).on("click",".js-view-sentence",function(){let t=$(this).closest(".memento-trace-block");var e=parseInt(t[0].dataset.keepWordId);t.find(".sentence-section").is(".loaded")?(r(t,t.find(".calendar-section").is(":visible")?1:0),t.find(".low-part").slideDown()):$.get("/memento/trace/keep-sentence/"+e,e=>{t.find(".sentence-section").addClass("loaded").find(".eng").html(e),t.find(".low-part").slideDown(),r(t,1)})}).on("click",".js-close-sentence",function(){r($(this).closest(".memento-trace-block"),0)}).on("click",".js-goto-workbook",function(){var e=$(this).closest(".memento-trace-block"),e=parseInt(e[0].dataset.keepWordId);location.assign("/memento/trace/move-workbook/"+ntoa(e))}).on("click",".js-toggle-lowpart",function(){var e=!$(this).is(".active");$(this).closest(".memento-trace-block").find(".low-part")[e?"slideDown":"slideUp"](250),$(this).toggleClass("active")}).on("click",".js-get-luck",async function(){alertModal("Today's Luck은 나의 단어 보관 목록 화면에서 가능합니다.")}),$("#sortBtn").on("click",function(){var e="recent"==this.dataset.sort?"alphabet":"recent",t=Array.from(n),t=o("recent"==e?n:t.sort((e,t)=>e.wordTitle<t.wordTitle?-1:t.wordTitle<e.wordTitle?1:0));$(".memento-list-section").empty().append(t),anime({targets:t,scale:[0,1],easing:"linear",duration:300,delay:anime.stagger(150)}),this.dataset.sort=e,$(this).find("i").toggleClass("fa-sort-alpha-down fa-sort-numeric-down"),$(this).find("span").text("recent"==e?"알파벳순":"테스트순")}),$("#toggleCalendarsBtn").on("click",function(){var e=JSON.parse(this.dataset.active);$(".memento-trace-block .collapse-lowpart-btn").toggleClass("active",!e),$(".memento-trace-block .low-part")[e?"slideUp":"slideDown"](250),this.dataset.active=!e,$(this).toggleClass("active",!e),$(this).find("i").toggleClass("fa-calendar-alt fa-calendar-times"),$(this).find("span").text(e?"상세 모드":"심플 모드")});let c="savedWordList"}