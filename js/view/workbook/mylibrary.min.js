function pageinit(t){function i(e,o){var t=o.numberOfElements;const i=[9<t,8<t,10<t,14<t][matchMedia("(max-width: 575.8px)").matches?0:matchMedia("(max-width: 675.8px)").matches?1:matchMedia("(max-width: 991.8px)").matches?2:3];new Swiper(e,{watchSlidesProgress:!0,slidesPerView:"auto",freeMode:i,grid:{fill:"row"},breakpoints:{320:{slidesPerGroup:3,autoHeight:t<=3,grid:{rows:6<t?3:3<t?2:1}},576:{slidesPerGroup:4,autoHeight:t<=4,grid:{rows:4<t?2:1}},676:{slidesPerGroup:5,autoHeight:t<=5,grid:{rows:5<t?2:1}},768:{slidesPerGroup:4,autoHeight:t<=4,grid:{rows:4<t?2:1}},992:{slidesPerGroup:7,autoHeight:t<=7,grid:{rows:7<t?2:1}}},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:{enabled:!0,loadPrevNext:!0},on:{beforeInit:function(e){e.isLast=o.last,o.last||(e.pageNum=2)},afterInit:function(e){i||e.lazy.load()},click:function(e){var o;e.clickedSlide&&(o=$(e.clickedSlide).closest(".workbook-block"),e=ntoa(e.clickedSlide.dataset.workBookId),location.assign(`/workbook/${o.is("#studyWorkbookSection")?"study/overview":"mybook/edit"}/`+e))},reachEnd:function(o){var e;o.isLast||o.isLoading||(e=o.el.dataset.listType,o.isLoading=!0,$.getJSON(`/workbook/library/${e}/list`,{pageNum:o.pageNum++},function(e){delete o.isLoading,e.first&&e.empty?(o.el.classList.add("h-auto"),o.wrapperEl.remove(),o.destroy()):($(o.el).find(".default-message").remove(),o.appendSlide(Array.from(e.content,e=>a(e))),o.update(),e.first&&o.lazy.load(),e.last&&(o.isLast=!0))}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}})}function s(t,e){var i=[];for(let e=0,o=t.content?.length;e<o;e++){var s=t.content[e];i.push(a(s))}e.append(i)}function a(e){var o=$("#hiddenDivs .book-unit").clone(),t=o.attr("data-work-book-id",e.workBookId).find(".book-cover");return o.find(".book-title").text(e.title),t.find("img").attr("alt",e.title),"HELLO-BOOK"==e.title?(t.addClass("hello-book").find(".swiper-lazy-preloader").remove(),o.find(".book-title").hide()):null==e.imagePath||0==e.imagePath.length?t.addClass("default").find(".swiper-lazy-preloader").remove():(t.find("img").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+e.imagePath),o.find(".book-title").hide()),o.find(".book-price").html(0<e.price?e.price.toLocaleString()+" fico":"멤버십 무료"),null!=e.numOfSubscribers&&o.append('<span class="subs-num">'+e.numOfSubscribers+"</span>"),o[0]}t.empty?$('.book-section[data-list-type="study"]').css("height","auto").removeClass("swiper").get(0).replaceChildren(createElement({el:"span",className:"default-message",children:["다른 사람이 만든 워크북을 보고 싶다면?",{el:"br"},"워크북 구독을 하면 여기서 볼 수 있습니다."]})):s(t,$('.book-section[data-list-type="study"] .list-inline')),$(".swiper").each(function(){const o=this;var e=this.dataset.listType;"study"===e?i(o,t):$.getJSON(`/workbook/library/${e}/list`,{pageNum:1},function(e){e.empty?($(o).on("click",".book-unit",function(){var e=$(this).closest(".workbook-block"),o=ntoa(this.dataset.workBookId);location.assign(`/workbook/${e.is("#studyWorkbookSection")?"study/overview":"mybook/edit"}/`+o)}),$(o).find(".swiper-button-prev,.swiper-button-next").remove()):($(o).find(".default-message").remove(),s(e,$(o).find(".swiper-wrapper")),e?.numberOfElements>(devSize.isDesktop()?7:devSize.isPhone()?3:5)?i(o,e):($(o).on("click",".book-unit",function(){var e=$(this).closest(".workbook-block"),o=ntoa(this.dataset.workBookId);location.assign(`/workbook/${e.is("#studyWorkbookSection")?"study/overview":"mybook/edit"}/`+o)}),$(o).find(".swiper-lazy-preloader").remove(),$(o).find(".swiper-lazy").each(function(){this.classList.remove("swiper-lazy"),this.style.backgroundImage=`url(${this.dataset.background})`}),$(o).find(".swiper-button-prev,.swiper-button-next").remove()))}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요."))}),$(document).on("show.bs.collapse hide.bs.collapse",".bookshelf-section",function(e){$(this).closest(".workbook-block").find(".title-section .fold-icon").toggleClass("expanded","show"==e.type)}),$(".bookshelf-section:not(.show)").collapse("show")}