function pageinit(){window.visualViewport.width;new Swiper(".swiper",{slidesPerView:"auto",watchSlidesProgress:!0,simulateTouch:!0,resistance:!1,slidesPerGroupAuto:!0,preloadImages:!1,grid:{rows:2},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:{enabled:!0,loadPrevNext:!0},on:{afterInit:function(e){e.pageNum=0<e.slides.length?2:1},click:function(e){var o;e.clickedSlide&&(o=$(this).closest(".workbook-block"),e=ntoa(e.clickedSlide.dataset.workBookId),location.assign(`/workbook/${o.is("#studyWorkbookSection")?"study/overview":"mybook/edit"}/`+e))},reachEnd:function(o){var e;o.isLast||o.isLoading||(e=o.el.dataset.listType,o.isLoading=!0,$.getJSON(`/workbook/library/${e}/list`,{pageNum:o.pageNum++||1},function(e){if(delete o.isLoading,e.first&&e.empty)o.el.classList.add("h-auto"),o.wrapperEl.remove(),o.destroy();else{$(o.el).find(".default-message").remove();var t=e,i=$(o.wrapperEl),s=[];for(let e=0,o=t.content?.length;e<o;e++){var a=t.content[e],l=$("#hiddenDivs .book-unit").clone(),n=l.attr("data-work-book-id",a.workBookId).find(".book-cover");l.find(".book-title").text(a.title),n.find("img").attr("alt",a.title),"HELLO-BOOK"==a.title?(n.addClass("hello-book").find(".swiper-lazy-preloader").remove(),l.find(".book-title").hide()):null==a.imagePath||0==a.imagePath.length?n.addClass("default").find(".swiper-lazy-preloader").remove():(n.find("img").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+a.imagePath),l.find(".book-title").hide()),l.find(".book-price").html(0<a.price?a.price.toLocaleString()+" fico":"멤버십 무료"),null!=a.numOfSubscribers&&0<i.closest("#openWorkbookSection").length&&l.append('<span class="subs-num">'+a.numOfSubscribers+"</span>"),s.push(l[0])}i.append(s),o.update(),e.first?o.lazy.load():o.slideNext(),e.last&&(o.isLast=!0)}}).fail(e=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}}),$(document).on("show.bs.collapse hide.bs.collapse",".bookshelf-section",function(e){$(this).closest(".workbook-block").find(".title-section .fold-icon").toggleClass("expanded","show"==e.type)}),$(".bookshelf-section:not(.show)").collapse("show")}