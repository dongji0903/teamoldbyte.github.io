function pageinit(e,o,t,i,n){var a=window.visualViewport.width<768,a=($("#loadingModal").modal("hide").hide(),$(".list-passage-section").masonry({itemSelector:".passage",columnWidth:".passage",gutter:10,percentPosition:!0,horizontalOrder:!0,transitionDuration:"0.8s"}),$(".js-view-passage").each(function(){this.href=`${location.origin}/workbook/passage/${ntoa(e)}/`+ntoa(this.dataset.pid)}).on("click",function(e){e.preventDefault(),sessionStorage.setItem("workbookCover",o),sessionStorage.setItem("passageIdList",JSON.stringify(t)),location.assign(this.href)}),a?3:2);function s(t,i){var n=[];for(let e=0,o=t.content?.length;e<o;e++){var a=t.content[e],s=$("#hiddenDivs .book-unit").clone(),r=(s.attr("href",location.origin+"/workbook/intro/"+ntoa(a.workBookId)).attr("title",a.title),s.find(".book.cover"));0<a.imagePath?.length?(r.find(".default").hide(),r.find(".book-title").hide(),r.find(".book-cover-normal").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+a.imagePath)):(r.find(".swiper-lazy-preloader").remove(),"HELLO-BOOK"==a.title&&r.find(".book-title").hide(),r.find(".book-cover-normal").hide()),s.find(".book-title").text(a.title),n.push(s[0]),i.appendChild(s[0])}}s(i,$(".public-workbook-section .list-inline").get(0)),0<$(".protected-workbook-section").length&&s(n,$(".protected-workbook-section .list-inline").get(0)),new Swiper(".swiper",{slidesPerView:"auto",watchSlidesProgress:!0,simulateTouch:!0,resistance:!1,slidesPerGroupAuto:!0,grid:{rows:a},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:!0,on:{reachEnd:function(o){var e;o.isLast||o.isLoading||(o.isLoading=!0,o.pageNum||(o.pageNum=2),e=0<$(o.el).closest(".public-workbook-section").length?"public":"protected",$.getJSON(`/workbook/${e}/list/`+o.pageNum++,function(e){s(e,o.wrapperEl),o.update(),o.slideNext(),delete o.isLoading,e.last&&(o.isLast=!0)}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}})}