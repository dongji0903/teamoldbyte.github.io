function pageinit(e,o,t,i,n){var s=window.visualViewport.width<768,s=($(window).on("unload",()=>$("#loadingModal").modal("hide")),$(document).on("click",".text-roll-end .fold-icon",function(){let e=$(this).closest(".description-section"),o=e.is(".shrink");var t=o?"100em":"13.5em";o&&e.removeClass("shrink"),anime({targets:e[0],duration:500,delay:0,maxHeight:t,easing:"linear",complete:()=>{$(this).toggleClass("expanded"),o||e.addClass("shrink")}})}),$(".list-passage-section").masonry({itemSelector:".passage",columnWidth:".passage",gutter:10,percentPosition:!0,horizontalOrder:!0,transitionDuration:"0.8s"}),$(".js-view-passage").each(function(){this.href=`${location.origin}/workbook/passage/${ntoa(e)}/`+ntoa(this.dataset.pid)}).on("click",function(e){e.preventDefault(),sessionStorage.setItem("workbookCover",o),sessionStorage.setItem("passageIdList",JSON.stringify(t)),location.assign(this.href)}),s?3:2);function a(t,i){var n=[];for(let e=0,o=t.content?.length;e<o;e++){var s=t.content[e],a=$("#hiddenDivs .book-unit").clone(),r=(a.attr("href",location.origin+"/workbook/intro/"+ntoa(s.workBookId)).attr("title",s.title),a.find(".book.cover"));0<s.imagePath?.length?(r.find(".default").hide(),r.find(".book-title").hide(),r.find(".book-cover-normal").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+s.imagePath)):(r.find(".swiper-lazy-preloader").remove(),"HELLO-BOOK"==s.title&&r.find(".book-title").hide(),r.find(".book-cover-normal").hide()),a.find(".book-title").text(s.title),n.push(a[0]),i.appendChild(a[0])}}a(i,$(".public-workbook-section .list-inline").get(0)),0<$(".protected-workbook-section").length&&a(n,$(".protected-workbook-section .list-inline").get(0)),new Swiper(".swiper",{slidesPerView:"auto",watchSlidesProgress:!0,simulateTouch:!0,resistance:!1,slidesPerGroupAuto:!0,grid:{rows:s},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:!0,on:{reachEnd:function(o){var e;o.isLast||o.isLoading||(o.isLoading=!0,o.pageNum||(o.pageNum=2),e=0<$(o.el).closest(".public-workbook-section").length?"public":"protected",$.getJSON(`/workbook/${e}/list/`+o.pageNum++,function(e){a(e,o.wrapperEl),o.update(),o.slideNext(),delete o.isLoading,e.last&&(o.isLast=!0)}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}})}