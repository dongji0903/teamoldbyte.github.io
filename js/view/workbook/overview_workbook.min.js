function pageinit(e,t,o,i){var n=window.visualViewport.width<768,n=($(".list-passage-section").masonry({itemSelector:".passage",columnWidth:".passage",gutter:10,percentPosition:!0,horizontalOrder:!0,transitionDuration:"0.8s"}),$(".js-view-passage").each(function(){this.href=`${location.origin}/workbook/passage/${ntoa(e)}/`+ntoa(this.dataset.pid)}).on("click",function(e){e.preventDefault(),sessionStorage.setItem("workbookCover",t),sessionStorage.setItem("passageIdList",JSON.stringify(o)),location.assign(this.href)}),n?3:2);function a(o){var i=[];for(let e=0,t=o.content?.length;e<t;e++){var n=o.content[e],a=$("#hiddenDivs .book-unit").clone(),s=(a.attr("href",location.origin+"/workbook/intro/"+ntoa(n.workBookId)).attr("title",n.title),a.find(".book.cover"));0<n.imagePath?.length?(s.find(".default").hide(),s.find(".book-title").hide(),s.find(".book-cover-normal").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+n.imagePath)):(s.find(".swiper-lazy-preloader").remove(),"HELLO-BOOK"==n.title&&s.find(".book-title").hide(),s.find(".book-cover-normal").hide()),a.find(".book-title").text(n.title),i.push(a[0])}$(".book-section .list-inline").append(i)}a(i),new Swiper(".swiper",{slidesPerView:"auto",watchSlidesProgress:!0,simulateTouch:!0,resistance:!1,slidesPerGroupAuto:!0,grid:{rows:n},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:!0,on:{reachEnd:function(t){t.isLast||t.isLoading||(t.isLoading=!0,$.getJSON("/workbook/recent/list/"+(t.pageNum++||2),function(e){a(e),t.update(),t.slideNext(),delete t.isLoading,e.last&&(t.isLast=!0)}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}}).pageNum=2}