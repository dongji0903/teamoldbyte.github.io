function pageinit(o,e,t,i,n){var a=window.visualViewport.width<768,a=($(window).on("unload",()=>$("#loadingModal").modal("hide")),$(".list-passage-section").masonry({itemSelector:".passage",columnWidth:".passage",gutter:10,percentPosition:!0,horizontalOrder:!0,transitionDuration:"0.8s"}),$(".js-view-passage").each(function(){this.href=`${location.origin}/workbook/passage/${ntoa(o)}/`+ntoa(this.dataset.pid)}).on("click",function(o){o.preventDefault(),sessionStorage.setItem("workbookCover",e),sessionStorage.setItem("passageIdList",JSON.stringify(t)),location.assign(this.href)}),a?3:2);function s(t,i){var n=[];for(let o=0,e=t.content?.length;o<e;o++){var a=t.content[o],s=$("#hiddenDivs .book-unit").clone(),r=(s.attr("href",location.origin+"/workbook/intro/"+ntoa(a.workBookId)).attr("title",a.title),s.find(".book.cover"));0<a.imagePath?.length?(r.find(".default").hide(),r.find(".book-title").hide(),r.find(".book-cover-normal").addClass("swiper-lazy").attr("data-background","/resource/workbook/cover/"+a.imagePath)):(r.find(".swiper-lazy-preloader").remove(),"HELLO-BOOK"==a.title&&r.find(".book-title").hide(),r.find(".book-cover-normal").hide()),s.find(".book-title").text(a.title),n.push(s[0]),i.appendChild(s[0])}}s(i,$(".public-workbook-section .list-inline").get(0)),0<$(".protected-workbook-section").length&&s(n,$(".protected-workbook-section .list-inline").get(0)),new Swiper(".swiper",{slidesPerView:"auto",watchSlidesProgress:!0,simulateTouch:!0,resistance:!1,slidesPerGroupAuto:!0,grid:{rows:a},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},lazy:!0,on:{reachEnd:function(e){var o;e.isLast||e.isLoading||(e.isLoading=!0,e.pageNum||(e.pageNum=2),o=0<$(e.el).closest(".public-workbook-section").length?"public":"protected",$.getJSON(`/workbook/${o}/list/`+e.pageNum++,function(o){s(o,e.wrapperEl),e.update(),e.slideNext(),delete e.isLoading,o.last&&(e.isLast=!0)}).fail(()=>alert("워크북목록 가져오기에 실패했습니다.\n다시 접속해 주세요.")))}}})}