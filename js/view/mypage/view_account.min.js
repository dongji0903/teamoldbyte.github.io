function pageinit(a,t,l){const o=576;let c=[];$.getJSON("https://static.findsvoc.com/data/egg/egg-info.json",e=>{c=e});var n=document.querySelectorAll(".egg-dimention-section .egg-info");for(let t=0;t<9;t++){0<a[t]&&(n[t].role="button");let e="egg";0==a[t]?e+=" uncollected":(e+=" egg-"+(t+1),4<t&&(e+=" metallic")),n[t].appendChild(createElement([{el:"div",className:"egg-wrapper m-auto",style:"transform: scale(0)",children:[{el:"div",className:e,children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]},{el:"div",className:"egg-count-section text-center mt-2",children:[{el:"span",className:"egg-count",innerText:0<a[t]?a[t]:""}]}]))}n[9].appendChild(createElement([{el:"div",className:"egg-wrapper m-auto",style:"transform: scale(0)",children:[{el:"div",className:"egg metallic gold",children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]},{el:"div",className:"egg-count-section text-center mt-2",children:[{el:"span",className:"egg-count",innerText:l}]}])),anime({targets:".egg-dimention-section .egg-info .egg-wrapper",delay:anime.stagger(100,{start:500}),duration:1e3,scale:[0,1]}),setTimeout(()=>{anime.timeline({duration:1e3,fontSize:["0%","100%"]}).add({targets:"#total-egg-count",update:function(e){e.animatables[0].target.textContent=Math.round((t||0)*e.progress/100)}}).add({targets:"#total-gold-egg-count",update:function(e){e.animatables[0].target.textContent=Math.round((l||0)*e.progress/100)}})},500);let i=1,s=1,e=t;for(;9<=e;)e/=3,s*=3,i++;i=Math.max(1,i);var d=[];for(let e=0;e<i;e++)d.push({el:"div",className:"col-4 row g-0 my-4",children:[{el:"div",className:"col-10 text-center",children:[{el:"div",className:`bucket-icon bucket-${e+1} text-warning`},{el:"div",className:"text-xl",innerText:"Lv."+(e+1)}]},{el:"div",className:"col-2 my-auto text-center",children:[{el:"i",className:"fas fa-arrow-right text-2xl text-gray-400"}]}]});d.push({el:"div",className:"col-4 row g-0 my-4",children:[{el:"div",className:"col-10 text-center",children:[{el:"div",className:"bucket-icon uncollected text-gray-400"},{el:"div",className:"text-xl"}]},{el:"div",className:"col-2 my-auto text-center"}]});var r=[];let m=t,g;for(let e=0;e<9;e++)g=1<=m/s?s:Math.max(0,m%s),m-=s,r.push({el:"div",className:"bucket-icon position-relative bucket-"+i,role:"button","data-bs-toggle":"tooltip","data-count":g,title:g+"/"+s});document.querySelector(".total-egg-section").appendChild(createElement(r));const h=document.querySelectorAll(".total-egg-section .bucket-icon"),p=anime.timeline({duration:500,easing:"linear"});function u(a){var e=document.getElementById("accountEventList");if(a?.empty)e.replaceChildren(createElement({el:"tr",innerText:"내역이 존재하지 않습니다."}));else{var l=a.content,n=[];for(let e=0,t=l.length;e<t;e++){var i=l[e];n.push({el:"tr",children:[{el:"th",className:"d-none d-md-table-cell",scope:"row",innerText:a.size*a.number+e+1},{el:"td",innerText:i.description},{el:"td",children:[0!=i.amount?{el:"span",className:"text-"+(i.amount<0?"danger":"success"),children:[{el:"i",className:`fas fa-egg ${i.gold?"egg-icon gold":"text-white text-stroke-gray"} ms-3 me-2`},Number(i.amount).toLocaleString("ko-KR",{signDisplay:"always"})]}:""]},{el:"td",innerText:new Date(i.txDate).format("yyyy-MM-dd(e)")}]})}e.replaceChildren(createElement(n));var e=document.getElementById("accountEventPagination"),t=a.totalPages,s=a.number,o=10*Math.floor(s/10)+1,c=Math.min(9+o,t),d=[];10<o&&d.push({el:"li",className:"page-item",ariaLabel:"Previous",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":o-1,innerHTML:"&laquo;"}]});for(let e=o;e<=c;e++)d.push({el:"li",className:"page-item"+(e==s+1?" active":""),children:[{el:"a",className:"page-link","data-pagenum":e,innerHTML:e}]});9+o<t&&d.push({el:"li",className:"page-item",ariaLabel:"Next",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":10+o,innerHTML:"&raquo;"}]}),e.replaceChildren(createElement(d))}}setTimeout(()=>{for(let e=0;e<9;e++)p.add({targets:h[e],update:function(e){var t=e.animatables[0].target;t.style.backgroundImage=`-webkit-linear-gradient(90deg, var(--fc-purple) ${parseInt(t.dataset.count)/s*e.progress}%, #fff 0%)`},complete:function(e){e=e.animatables[0].target;parseInt(e.dataset.count)==s&&showFireworks({target:e,size:5,distance:40,particles:10,count:1,time:1,interval:1,top:"-30px",left:"calc(50% - 40px)",width:"80px",height:"80px",colors:["#bb99bff","#99bbff"]})}},"-=200")},1e3),$(document).on("click",".egg-info",function(a){var l=document.querySelector(".egg-detail-section"),n=this.querySelector(".egg"),i=parseInt((n.className.match(/egg-(\d+)/)||{1:10})[1])-1;if(!n.matches(".uncollected")){window.innerWidth<o&&("eggModal"!=window.history.state&&window.history.pushState("eggModal","eggModal"),$("html").addClass("overflow-hidden"));var n=n.matches(".gold"),s=Array.from(["count-text","hatching-info"],e=>".egg-text-info-section ."+e).join(",");$(l).find(s).toggle(!n);let e="egg egg-"+(1+i),t=(4<i&&(e+=" metallic"),9==i&&(e+=" gold"),l.querySelector(".egg").className=e,"pastel");9==i?t="gold":4<i&&(t="shining"),l.querySelector(".egg-text-info-section .name").innerHTML=`<span class="badge egg-sort ${t}">name</span>`+c[i].name,n||(l.querySelector(".egg-text-info-section .egg-count").textContent=900-parseInt(this.querySelector(".egg-count").textContent)),l.querySelector(".egg-text-info-section .title").innerHTML=c[i].title,l.querySelector(".egg-text-info-section .desc").innerHTML=c[i].desc,n&&showFireworks({target:l.querySelector(".egg"),size:1,distance:100,colors:["#FFFFFF"],interval:500,count:5,particles:5}),window.innerWidth>=o?(a.currentTarget.getBoundingClientRect().x>window.innerWidth/2?(l.style.left="unset",l.style.right=document.body.clientWidth-this.offsetLeft-this.offsetWidth+"px"):(l.style.right="unset",l.style.left=a.currentTarget.getBoundingClientRect().x+"px"),l.style.top=a.currentTarget.offsetTop+"px",l.querySelector(".btn-close")?.remove()):(l.style.position="fixed",l.style.top=0),$(l).show(200)}}).on("mouseleave",".egg-detail-section",function(e){window.innerWidth<o||(e.stopPropagation(),e.stopImmediatePropagation(),$(".egg-detail-section").hide())}),window.innerWidth<o&&window.addEventListener("popstate",()=>{"eggModal"!=history.state&&($(".egg-detail-section").hide(100),$("html").removeClass("overflow-hidden"))}),$("#accountEventTable").one("show.bs.collapse",function(){$.getJSON("/mypage/account/event/list",u).fail(()=>{alert("에그 내역을 불러오지 못했습니다.")})}),$(document).on("click","#accountEventPagination .page-link",function(){var e=this.dataset.pagenum;$.getJSON("/mypage/account/event/list?pageNum="+e,u).fail(()=>alert("에그 내역을 불러오지 못했습니다."))}),$(document).on("click",".bucket-icon",function(){$("#bucket-modal").modal("show")}),$(".js-open-extend").click(function(){function e(){$("#modalDiv .modal").modal("show")}0==$("#modalDiv").children().length?$("#modalDiv").load("/mypage/membership/extend .modal",e):e()});let v,b=[];function f(){var e=window.innerWidth<o;$("#accountEventPagination").toggleClass("pagination-sm",e),$("#accountEventList").toggleClass("align-middle text-sm",e)}$(document).on("submit","#selectItemForm",function(){var e,t,a;this.checkValidity()&&(event.preventDefault(),t=(e=$("#phase-1 [name=orderItem]:checked")).data("itemname"),a=e.next(".membership-block").find(".price").text(),$("#totalAmount").val(a.replace(/\D+/g,"")),b=[e.val()],$("#phase-2 .payment-info .name").text(t),$("#phase-2 .payment-info .price").text(a),$("#phase-1,#phase-2").collapse("toggle"))}).on("show.bs.collapse","#modalDiv #phase-2",function(){$('#phase-2 [data-bs-target="#phase-2,#phase-3"]').prop("disabled",!0),clearInterval(v),$("#phase-2 .progress-bar").attr("aria-valuenow",0).width(0);let e=0;v=setInterval(()=>{e<100?(e++,$("#phase-2 .progress-bar").attr("aria-valuenow",e).width(e+"%"),$('#phase-2 [data-bs-target="#phase-2,#phase-3"]').prop("disabled",!0)):$('#phase-2 [data-bs-target="#phase-2,#phase-3"]').prop("disabled",!1)},1e3)}).on("hide.bs.collapse","#modalDiv #phase-2",function(){clearInterval(v)}).on("submit","#paymentForm",function(e){e.preventDefault();e=Object.fromEntries(new FormData(this).entries());this.checkValidity()&&(e.orderItemList=b,$.ajax({url:"/membership",type:"POST",data:JSON.stringify(e),contentType:"application/json",success:()=>{alert("멤버십이 연장되었습니다.\n다시 로그인해 주세요."),document.forms.logout.submit()},error:()=>{alert("가입 처리 중 오류가 발생하였습니다.\nteamoldbyte@gmail.com 로 문의 바랍니다."),$("#done-info-moal").modal("hide")}}))}),f(),window.addEventListener("resize",f),document.body.append(createElement([{el:"div",class:"modal fade",id:"egg-explain-modal",tabindex:"-1","aria-labelledby":"eggExplainModalLabel","aria-hidden":!0,children:[{el:"div",class:"modal-dialog modal-dialog-centered",children:[{el:"div",class:"modal-content",children:[{el:"div",class:"modal-header",children:[{el:"button",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}]},{el:"div",class:"modal-body",children:[{el:"p",children:[{el:"h5",textContent:"에그는 무엇인가요?"},"에그는 ",{el:"span",class:"app-name-text",textContent:"fico"},"에서 사용되는 포인트입니다.",{el:"br"},{el:"b",textContent:"총 9개"},"로 구성되며 에그마다 다른 확률로 무작위로 배포됩니다.",{el:"br"},"골드 에그는 ",{el:"span",class:"app-name-text",textContent:"fico"}," 코인으로서 ",{el:"b",textContent:"골드 콘텐츠 결제"},"에 사용할 수 있습니다.",{el:"br"},{el:"br"},{el:"h5",textContent:"에그를 모을 수 있는 방법?"},"1. 나의 워크북 공개하기",{el:"br"},"2. 잘못된 구문 분석 수정하기",{el:"br"},"3. 배틀 북에서 정답 맞히기",{el:"br"},{el:"span",class:"text-smd",textContent:"다양한 콘텐츠에서 에그를 수집할 수 있도록 지속적으로 제공하겠습니다."},{el:"br"},{el:"br"},{el:"h5",textContent:"에그를 모아서 무엇을 할 수 있나요?"},"무작위로 수집한 플레인 에그를 ",{el:"b",textContent:"골드 에그로 변경"},"할 수 있습니다.",{el:"br"},"골드 에그를 모아 ",{el:"b",textContent:"골드 콘텐츠 결제"},"에 사용하세요.",{el:"br"}]}]}]}]}]},{el:"div",className:"bucket-detail-section modal",id:"bucket-modal",tabIndex:"-1",children:[{el:"div",className:"modal-dialog modal-dialog-centered",children:[{el:"div",className:"modal-content",children:[{el:"div",className:"modal-header",children:[{el:"h5",textContent:"획득 버킷"},{el:"button",type:"button",className:"btn-close","data-bs-dismiss":"modal"}]},{el:"div",className:"modal-body px-1 px-md-5",children:[{el:"div",className:"bucket-history row g-0",children:d}]}]}]}]},{el:"div",className:"egg-detail-section"+(window.innerWidth<576?" top-50 translate-middle-y":""),style:{display:"none",position:"absolute",zIndex:1062},children:[{el:"div",className:"btn btn-close position-absolute end-3",onclick:()=>{window.innerWidth<o&&"eggModal"==window.history.state?window.history.back():$(".egg-detail-section").hide(100)}},{el:"div",className:"row g-0",children:[{el:"div",className:"col-12 col-md-8",children:[{el:"div",className:"egg-wrapper",children:[{el:"div",className:"shadow",children:[{el:"div",className:"secondary"}]},{el:"div",className:"egg",children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]}]},{el:"div",className:"egg-text-info-section col-12 col-md-4 mt-5 mt-md-0",children:[{el:"h4",className:"name"},{el:"span",className:"title"},{el:"span",className:"desc"},{el:"span",className:"writer",textContent:"- Alalos Eggsy -"},{el:"div",className:"footer-text",children:[{el:"span",className:"count-text mb-0",children:["Hatching D-Day : ",{el:"span",className:"egg-count"}," left."]},{el:"span",className:"hatching-info",textContent:"에그를 부화시켜 마법사 에그시가 숨겨놓은 선물을 받아가세요."}]}]}]}]}]))}