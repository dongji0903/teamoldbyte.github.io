function pageinit(i,t,a){let s=[];$.getJSON("https://static.findsvoc.com/data/egg/egg-info.json",e=>{s=e});const l=[];for(let e=0;e<10;e++)l.push({el:"div",className:"egg-info",role:0==i[e]?null:"button",children:[{el:"div",className:"egg-wrapper m-auto",style:"transform: scale(0)",children:[{el:"div",className:"egg"+(e<9?0==i[e]?" uncollected":" egg-"+(e+1)+(4<e?" metallic":""):" metallic gold"),children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]},{el:"div",className:"egg-count-section text-center mt-2",children:[{el:"span",className:"egg-count",innerText:0<i[e]?i[e]:""}]}]});document.querySelector(".egg-dimention-section").append(createElement(l)),anime({targets:".egg-dimention-section .egg-info .egg-wrapper",delay:anime.stagger(100,{start:500}),duration:1e3,scale:[0,1]}),setTimeout(()=>{anime.timeline({duration:1e3,fontSize:["0%","100%"]}).add({targets:"#total-egg-count",update:function(e){e.animatables[0].target.textContent=Math.round((t||0)*e.progress/100)}}).add({targets:"#total-gold-egg-count",update:function(e){e.animatables[0].target.textContent=Math.round((a||0)*e.progress/100)}})},500);let n=1,o=1,e=t;for(;9<=e;)e/=3,o*=3,n++;n=Math.max(1,n);const c=[];for(let e=0;e<n;e++)c.push({el:"div",className:"col-4 row g-0 my-4",children:[{el:"div",className:"col-10 text-center",children:[{el:"div",className:`bucket-icon bucket-${e+1} text-warning`},{el:"div",className:"text-xl",innerText:"Lv."+(e+1)}]},{el:"div",className:"col-2 my-auto text-center",children:[{el:"i",className:"fas fa-arrow-right text-2xl text-gray-400"}]}]});c.push({el:"div",className:"col-4 row g-0 my-4",children:[{el:"div",className:"col-10 text-center",children:[{el:"div",className:"bucket-icon uncollected text-gray-400"},{el:"div",className:"text-xl"}]},{el:"div",className:"col-2 my-auto text-center"}]});const r=[],d=document.querySelector(".total-egg-section");for(let e=0;e<9;e++){var m=t-o*e,m=m>=o?o:0<m?m:0,m=createElement({el:"div",className:"bucket-icon position-relative bucket-"+n,role:"button","data-bs-toggle":"tooltip","data-count":m,title:m+"/"+o});r.push(m),d.append(m)}const g=anime.timeline({duration:500,easing:"linear"});function u(a){const e=document.getElementById("accountEventList");if(a?.empty)e.replaceChildren(createElement({el:"tr",innerText:"내역이 존재하지 않습니다."}));else{var l=a.content;const c=[];for(let e=0,t=l.length;e<t;e++){var n=l[e];c.push({el:"tr",children:[{el:"th",className:"d-none d-md-table-cell",scope:"row",innerText:a.size*a.number+e+1},{el:"td",innerText:n.description},{el:"td",children:[0!=n.amount?{el:"span",className:"text-"+(n.amount<0?"danger":"success"),children:[{el:"i",className:"fas fa-egg text-white text-stroke-gray ms-3 me-2"},Number(n.amount).toLocaleString("ko-KR",{signDisplay:"always"})]}:"",0!=n.gold?{el:"span",className:"text-"+(n.gold<0?"danger":"success"),children:[{el:"i",className:"fas fa-egg egg-icon gold ms-3 me-2"},Number(n.gold).toLocaleString("ko-KR",{signDisplay:"always"})]}:""]},{el:"td",innerText:new Date(n.txDate).format("yyyy-MM-dd(e) HH:mm")}]})}e.replaceChildren(createElement(c));const r=document.getElementById("accountEventPagination");var t=a.totalPages,i=a.number,s=10*Math.floor(i/10)+1,o=Math.min(9+s,t);const d=[];10<s&&d.push({el:"li",className:"page-item",ariaLabel:"Previous",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":s-1,innerHTML:"&laquo;"}]});for(let e=s;e<=o;e++)d.push({el:"li",className:"page-item"+(e==i+1?" active":""),children:[{el:"a",className:"page-link","data-pagenum":e,innerHTML:e}]});9+s<t&&d.push({el:"li",className:"page-item",ariaLabel:"Next",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":10+s,innerHTML:"&raquo;"}]}),r.replaceChildren(createElement(d))}}setTimeout(()=>{for(let e=0;e<9;e++)g.add({targets:r[e],update:function(e){const t=e.animatables[0].target;t.style.backgroundImage=`-webkit-linear-gradient(90deg, var(--fc-purple) ${parseInt(t.dataset.count)/o*e.progress}%, #fff 0%)`},complete:function(e){e=e.animatables[0].target;parseInt(e.dataset.count)==o&&showFireworks({target:e,size:5,distance:40,particles:10,count:1,time:1,interval:1,top:"-30px",left:"calc(50% - 40px)",width:"80px",height:"80px",colors:["#bb99bff","#99bbff"]})}},"-=200")},1e3),$(document).on("click",".egg-info",function(e){const t=document.querySelector(".egg-detail-section"),a=this.querySelector(".egg");var l,n=parseInt((a.className.match(/egg-(\d+)/)||{1:10})[1])-1;a.matches(".uncollected")||(t.querySelector(".egg").className="egg"+(n<9?0==i[n]?" uncollected":" egg-"+(1+n)+(4<n?" metallic":""):" metallic gold"),l=n<5?"pastel":n<9?"shining":"gold",t.querySelector(".egg-text-info-section .name").innerHTML=`<span class="badge egg-sort ${l}">${l}</span>`+s[n].name,t.querySelector(".egg-text-info-section .title").innerHTML=s[n].title,t.querySelector(".egg-text-info-section .egg-count").textContent=900-parseInt(this.querySelector(".egg-count").textContent),t.querySelector(".egg-text-info-section .desc").innerHTML=s[n].desc,a.matches(".gold")?(showFireworks({target:t.querySelector(".egg"),size:1,distance:100,colors:["#FFFFFF"],interval:500,count:5,particles:5}),$(t).find(".egg-text-info-section .writer").hide()):$(t).find(".egg-text-info-section .writer").show(),576<=window.innerWidth?(e.currentTarget.getBoundingClientRect().x>window.innerWidth/2?(t.style.left="unset",t.style.right=document.body.clientWidth-this.offsetLeft-this.offsetWidth+"px"):(t.style.right="unset",t.style.left=e.currentTarget.getBoundingClientRect().x+"px"),t.style.top=e.currentTarget.offsetTop+"px",t.querySelector(".btn-close")?.remove()):(t.style.position="fixed",t.style.top=0),$(t).show(200))}).on("mouseleave",".egg-detail-section",function(e){e.stopPropagation(),e.stopImmediatePropagation(),$(".egg-detail-section").hide()}),$("#accountEventTable").one("show.bs.collapse",function(){$.getJSON("/mypage/account/event/list",u).fail(()=>{alert("에그 내역을 불러오지 못했습니다.")})}),$(document).on("click","#accountEventPagination .page-link",function(){var e=this.dataset.pagenum;$.getJSON("/mypage/account/event/list?pageNum="+e,u).fail(()=>alert("에그 내역을 불러오지 못했습니다."))}),$(document).on("click",".bucket-icon",function(){$("#bucket-modal").modal("show")}),$(".js-open-extend").click(function(){function e(){$("#modalDiv .modal").modal("show")}0==$("#modalDiv").children().length?$("#modalDiv").load("/mypage/membership/extend .modal",e):e()});let p,h=[];$(document).on("submit","#selectItemForm",function(){if(this.checkValidity()){event.preventDefault();const t=$("#phase-1 [name=orderItem]:checked");var e=t.data("itemname");const a=t.next(".membership-block").find(".price").text();$("#totalAmount").val(a.replace(/[^0-9]/g,"")),h=[t.val()],$("#phase-2 .payment-info .name").text(e),$("#phase-2 .payment-info .price").text(a),$("#phase-1,#phase-2").collapse("toggle")}}).on("show.bs.collapse","#modalDiv #phase-2",function(){$('#phase-2 [data-bs-target="#phase-2,#phase-3"]').prop("disabled",!0);clearTimeout(p),p=setTimeout(()=>{$('#phase-2 [data-bs-target="#phase-2,#phase-3"]').prop("disabled",!1)},6e4)}).on("submit","#paymentForm",function(e){e.preventDefault();const t=Object.fromEntries(new FormData(this).entries());this.checkValidity()&&(t.orderItemList=h,$.ajax({url:"/membership",type:"POST",data:JSON.stringify(t),contentType:"application/json",success:()=>{alert("구매를 완료했습니다."),location.reload()},error:()=>{alert("가입 처리 중 오류가 발생하였습니다.\nteamoldbyte@gmail.com 로 문의 바랍니다."),$("#done-info-moal").modal("hide")}}))}),document.body.append(createElement([{el:"div",className:"bucket-detail-section modal",id:"bucket-modal",tabIndex:"-1",children:[{el:"div",className:"modal-dialog modal-dialog-centered",children:[{el:"div",className:"modal-content",children:[{el:"div",className:"modal-body px-1 px-md-5",children:[{el:"div",className:"bucket-history row g-0",children:c}]}]}]}]},{el:"div",className:"egg-detail-section top-50 translate-middle-y",style:{display:"none",position:"absolute",zIndex:1062},children:[{el:"div",className:"btn btn-close position-absolute end-3",onclick:"$('.egg-detail-section').hide(100)"},{el:"div",className:"row g-0",children:[{el:"div",className:"col-12 col-md-8",children:[{el:"div",className:"egg-wrapper",children:[{el:"div",className:"shadow",children:[{el:"div",className:"main"},{el:"div",className:"secondary"}]},{el:"div",className:"egg",children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]}]},{el:"div",className:"egg-text-info-section col-12 col-md-4",children:[{el:"h4",className:"name mb-3"},{el:"span",className:"count-text d-block",children:["Hatching D-Day : ",{el:"span",className:"egg-count"}," left."]},{el:"span",className:"title"},{el:"span",className:"desc"},{el:"span",className:"writer",textContent:"- Alalos Eggsy -"},{el:"span",className:"hatching-info",textContent:"에그를 부화시켜 마법사 에그시가 숨겨놓은 선물을 받아가세요."}]}]}]}]))}