!function(){let i;$(document).on("input","#newPassageText",function(e,t){var n=function(){var e=$("#newPassageText").val(),t=$("#newPassageText")[0].selectionStart;e=extractHighlightInfo(e,t);return $("#newPassageText").val(e.input),$("#newPassageText").highlightWithinTextarea({highlight:[{className:"bg-fc-yellow",highlight:["×"]},{className:"bg-fc-purple corrected",highlight:e.arr}]}),$("#newPassageText").focus()[0].setSelectionRange(e.inputCursor,e.inputCursor),[e.input.includes("×"),0<e.arr.length]}(),a=this.value.trim().quoteNormalize().length;anime({targets:".hwt-backdrop mark.corrected",keyframes:[{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,duration:1e3,easing:"cubicBezier(.7, .0, 1.0, 0.3)"},{display:"none",easing:"steps(1)"}]}),n[0]?((i=i||new bootstrap.Tooltip(this,{title:"영어 문장을 입력하세요.",trigger:"manual",customClass:"text-invalid",offset:({placement:e})=>"top"==e?[100,0]:[0,0]})).enable(),i.show(),$("#inputComplete").attr("disabled",!0)):($("#inputComplete").attr("disabled",0==a),i?.hide(),i?.disable(),$(this).trigger("keydown"))}).on("click","#inputComplete",function(){const n=$("#newPassageText").get(0);var a=tokenizer.sentences(n.value.sentenceNormalize()),e=a.join(" ");n.value=e;let i=0;for(let e=0,t=a.length;e<t;e++){var s=a[e];if(!/^["']?[A-Z0-9]+/.test(s))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 시작은 영문대문자나 숫자 혹은 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+s,()=>n.focus()),n.focus(),void n.setSelectionRange(i,i+s.length);if(!new RegExp("[.?!][\"']?$").test(s))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 끝은 구두점(. ? !)이나 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+s,()=>n.focus()),n.focus(),void n.setSelectionRange(i,i+s.length);i+=s.length+(e<t-1?1:0)}confirmModal("입력하신 문장이 다음과 같습니다.\n문장 수가 맞지 않다면 '취소'를 누르고 구두점을 추가해 주세요.\n\n".concat(Array.from(a,(e,t)=>`[${t+1}] `+e).join("\n")),()=>$("#textForm").submit())})}();