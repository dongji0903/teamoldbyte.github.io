(()=>{let n;$(document).on("input","#newPassageText",function(e,t){var a=(()=>{let e=$("#newPassageText").val(),t=$("#newPassageText")[0].selectionStart,a=extractHighlightInfo(e,t);return $("#newPassageText").val(a.input),$("#newPassageText").highlightWithinTextarea({highlight:[{className:"bg-fc-yellow",highlight:["×"]},{className:"bg-fc-purple corrected",highlight:a.arr}]}),$("#newPassageText").focus()[0].setSelectionRange(a.inputCursor,a.inputCursor),[a.input.includes("×"),0<a.arr.length]})(),i=this.value.trim().quoteNormalize().length;anime({targets:".hwt-backdrop mark.corrected",keyframes:[{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,duration:1e3,easing:"cubicBezier(.7, .0, 1.0, 0.3)"},{display:"none",easing:"steps(1)"}]}),a[0]?((n=n||new bootstrap.Tooltip(this,{title:"영어 문장을 입력하세요.",trigger:"manual",customClass:"text-invalid",offset:({placement:e})=>"top"==e?[100,0]:[0,0]})).enable(),n.show(),$("#inputComplete").attr("disabled",!0)):($("#inputComplete").attr("disabled",0==i),n?.hide(),n?.disable(),$(this).trigger("keydown"))}).on("click","#inputComplete",function(){let a=$("#newPassageText").get(0);var i=tokenizer.sentences(a.value.sentenceNormalize()),e=i.join(" ");a.value=e;let n=0;for(let e=0,t=i.length;e<t;e++){var l=i[e];if(!/^["']?[A-Z0-9]+/.test(l))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 시작은 영문대문자나 숫자 혹은 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+l,()=>a.focus()),a.focus(),void a.setSelectionRange(n,n+l.length);if(!new RegExp("[.?!][\"']?$").test(l))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 끝은 구두점(. ? !)이나 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+l,()=>a.focus()),a.focus(),void a.setSelectionRange(n,n+l.length);n+=l.length+(e<t-1?1:0)}confirmModal("입력된 텍스트는 아래 문장들로 구분됩니다.\n문장 구분이 잘못된 경우 '취소'를 누르고 구두점을 추가해 주세요.\n\n<ol style=\"text-align: left;\">".concat(Array.from(i,e=>`<li>${e}</li>`).join("")).concat("</ol>"),()=>$("#textForm").submit())})})();