!function(){let i;$(document).on("input","#newPassageText",function(e,t){var a=function(){var e=$("#newPassageText").val(),t=$("#newPassageText")[0].selectionStart;e=extractHighlightInfo(e,t);return $("#newPassageText").val(e.input),$("#newPassageText").highlightWithinTextarea({highlight:[{className:"bg-fc-yellow",highlight:["×"]},{className:"bg-fc-purple corrected",highlight:e.arr}]}),$("#newPassageText").focus()[0].setSelectionRange(e.inputCursor,e.inputCursor),[e.input.includes("×"),0<e.arr.length]}(),n=this.value.trim().quoteNormalize().length;anime({targets:".hwt-backdrop mark.corrected",keyframes:[{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,easing:"linear"},{opacity:1,easing:"linear"},{opacity:0,duration:1e3,easing:"cubicBezier(.7, .0, 1.0, 0.3)"},{display:"none",easing:"steps(1)"}]}),a[0]?((i=i||new bootstrap.Tooltip(this,{title:"영어 문장을 입력하세요.",trigger:"manual",customClass:"text-invalid",offset:({placement:e})=>"top"==e?[100,0]:[0,0]})).enable(),i.show(),$("#inputComplete").attr("disabled",!0)):($("#inputComplete").attr("disabled",0==n),i?.hide(),i?.disable(),$(this).trigger("keydown"))}).on("click","#inputComplete",function(){const a=$("#newPassageText").get(0);var n=tokenizer.sentences(a.value.sentenceNormalize()),e=n.join(" ");a.value=e;let i=0;for(let e=0,t=n.length;e<t;e++){var l=n[e];if(!/^["']?[A-Z0-9]+/.test(l))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 시작은 영문대문자나 숫자 혹은 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+l,()=>a.focus()),a.focus(),void a.setSelectionRange(i,i+l.length);if(!new RegExp("[.?!][\"']?$").test(l))return alertModal(e+1+`번째 문장을 다시 확인해 주세요.
문장의 끝은 구두점(. ? !)이나 따옴표(" ')여야 합니다.
문장 내용은 아래와 같습니다.

`+l,()=>a.focus()),a.focus(),void a.setSelectionRange(i,i+l.length);i+=l.length+(e<t-1?1:0)}confirmModal("입력된 텍스트는 아래 문장들로 구분됩니다.\n문장 구분이 잘못된 경우 '취소'를 누르고 구두점을 추가해 주세요.\n\n<ol style=\"text-align: left;\">".concat(Array.from(n,e=>`<li>${e}</li>`).join("")).concat("</ol>"),()=>$("#textForm").submit())})}();