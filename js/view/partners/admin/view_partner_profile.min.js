function pageinit(){Compressor.setDefaults({convertTypes:"image/png,image/webp,image/jpg,image/jpeg,image/bmp,image/gif",convertSize:1e6,resize:"cover"});let a=$("#addrWrapper").get(0),t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),e=new daum.Postcode({oncomplete:function(e){$(a).hide(),$('input[name="district"]').val(e.sido),$('input[name="address1"],#addressPreview').val(e.address),$('input[name="postalCode"]').val(e.zonecode),$('input[name="address2"]').show().val("")[0].focus(),$("#addressPreview").show(),document.body.scrollTop=t},onresize:function(e){$(a).css("height",e.height+"px")},width:"100%",height:"100%"}),i=($("#addressPreview").on("click",function(){e.embed(a),$(this).hide(),$('input[name="address2"]').hide(),$(a).show(0)}),$("#closeAddrWrapper").on("click",function(){$("#addrWrapper").hide(),$("#addressPreview").show(),$('input[name="address2"]').show()}),$('input[name="phone"]').on("input",function(e){switch(this.value=this.value.replace(/[^0-9]/g,""),!0){case 8<this.value.length:this.value=this.value.replace(/^(\d{2,3})(\d{3,4})(\d{4})$/,"$1-$2-$3");break;case 7<this.value.length:this.value=this.value.replace(/^(\d{2})(\d{3})(\d{3})$/,"$1-$2-$3");break;case 4<this.value.length:this.value=this.value.replace(/^(\d{2,3})(\d{3,4})$/,"$1-$2");break;case 3<this.value.length:this.value=this.value.replace(/^(\d{2,3})(\d)$/,"$1-$2")}}).on("change",function(){this.value=this.value.replace(/\D/g,""),8<this.value.length&&this.value.length<12?(this.classList.remove("is-invalid"),this.classList.add("is-valid")):(this.classList.remove("is-valid"),this.classList.add("is-invalid"))}),$(".input-image").on("change",function(e){let a=e.target.files[0];if(null==a)return!1;let t=$(this).next(".logo-preview"),i=new FileReader;i.onload=function(){t.css("background-image",`url(${this.result})`).css("opacity","1").find(".reset-image").show(),URL.revokeObjectURL(i.result)};let s;switch(this.id){case"repImage":s={width:150,height:150};break;case"emblemImage":s={width:300,height:300};break;case"bannerImage":s={width:800,height:120}}new Compressor(a,{width:s.width,height:s.height,success:e=>{$(this).data("compressedImage",e),i.readAsDataURL(e)},error(e){i.readAsDataURL(a)}})}),$(".reset-image").on("click",function(e){e.preventDefault(),e.stopPropagation();var e=$(this).closest(".logo-preview"),a=$(this).closest(".input-logo").find('input[type="file"]');e.css("backgroundImage",a.data("org")?`url(/resource/partners/profile/${a.data("org")})`:"").css("opacity",a.data("org")?1:.6),a.removeData("compressedImage").val(null)[0].checkValidity(),$(this).hide()}),openSummernote($("#intro")),$("#identicalCheck").on("click",function(){if(this.checked){if(!$("#repName").val().length||!$("#repPhone").val().length)return alertModal("대표자 정보를 먼저 빠짐없이 입력해 주세요."),void(this.checked=!1);$("#identical").val(!0),$("#chargeName").val($("#repName").val()),$("#chargePhone").val($("#repPhone").val())}else $("#identical").val(!1);$("#chargeName").prop("readonly",this.checked),$("#chargePhone").prop("readonly",this.checked)}),{repImage:"rep-image/edit",emblemImage:"emblem-image/edit",bannerImage:"banner-image/edit",intro:"intro/edit"}),s=$("#partnerId").val();$(".js-edit-btn").on("click",function(e){e.preventDefault();let a=this.closest("form");a.classList.add("was-validated"),a.checkValidity()&&(a.matches(".edit-profile-form")?(e=new FormData(a),$.ajax({type:"POST",url:"/partners/admin/profile/edit",processData:!1,contentType:!1,data:e,success:function(){$(a).find("input,select").each((e,a)=>{a.dataset.org=a.value}),alertModal("정보가 수정되었습니다.")},error:function(){alertModal("정보 수정에 실패했습니다.")}})):$(a).find("input,textarea,select").filter((e,a)=>a.name&&"partnerId"!=a.name&&!a.closest(".note-editor")).each(async function(){if("file"==this.type){var e,a=$(this).data("compressedImage");a&&((e=new FormData).append("partnerId",s),e.append(this.name,a,a.name),await $.ajax({type:"POST",url:"/partners/admin/profile/"+i[this.name],processData:!1,contentType:!1,data:e,success:e=>{this.dataset.org=e;var a=$(this).next(".logo-preview");a.css("backgroundImage",`url(/resource/partners/profile/${e})`),a.find(".reset-image").hide(),$(this).removeData("compressedImage"),alertModal("이미지가 수정되었습니다.")},error:()=>{alertModal("이미지 수정에 실패했습니다.")}}))}else if(this.dataset.org!=this.value){let e=new FormData;e.append("partnerId",s),e.append(this.name,this.value.trim()),await $.ajax({type:"POST",url:"/partners/admin/profile/"+i[this.name],processData:!1,contentType:!1,data:e,success:()=>{alertModal("정보가 수정되었습니다."),this.dataset.org=e.get(this.name)},error:()=>{alertModal("정보 수정에 실패했습니다.")}})}}))})}