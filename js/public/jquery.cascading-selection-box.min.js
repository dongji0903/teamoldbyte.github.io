(l=>{var s=27,t=37,n=38,i=39,a=40,o=13;function c(e,s){(this.options=s).search&&this.getLabelList(),this.CLASS=c.CLASS,this.$el=l(e),this.$el_=this.$el.clone(),this.init()}c.CLASS={wrap:"zd-cascader-wrap",inputwrap:"zd-input zd-input--suffix",input:"zd-input__inner",iconWrap:"zd-input__suffix",iconInnerWrap:"zd-input__suffix-inner",icon:"icon zd-input__icon zd-icon-arrow-down",dropdownWrap:"zd-cascader__dropdown",dropdownPanel:"zd-cascader-panel",menuWrap:"zd-cascader-menu",menuList:"zd-cascader-menu__list",menuNode:"zd-cascader-node",menuNodeLabel:"zd-cascader-node__label",menuNodePostfix:"zd-cascader-node__postfix",checkClass:{wrapFocus:"is-focus",menuNodeSelected:"in-active-path",nodeSelectedIcon:"is-selected-icon",nodeAnchor:"is-prepare"}},c.DEFAULTS={data:null,range:" / ",onChange:function(e){}},c.METHODS=["reload","destroy"],c.prototype.init=function(){this._construct(),this._event()},c.prototype._construct=function(){this.$container=this.$el.wrap(`<div class="${this.CLASS.wrap}"></div>`).wrap(`<div class="${this.CLASS.inputwrap}"></div>`).addClass(this.CLASS.input).prop("readonly",!this.options.search).closest("."+this.CLASS.wrap),this.$arrow=l(`<span class="zd-input__suffix">
                            <span class="zd-input__suffix-inner">
                                <svg t="1600158452164" class="icon zd-input__icon zd-icon-arrow-down" viewBox="0 0 1024 1024"
                                    version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181" width="200" height="200">
                                    <path
                                        d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                        p-id="1182" fill="#515151"></path>
                                    <path
                                        d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                        p-id="1183" fill="#515151"></path>
                                </svg>
                            </span>
                        </span>`).insertAfter(this.$el),this.$dropdownWrap=l(`<div class="${this.CLASS.dropdownPanel}"></div>`).appendTo(this.$container).wrap(`<div class="${this.CLASS.dropdownWrap}"></div>`),this.reload()},c.prototype._event=function(){this.$container.on("click.wrap",l.proxy(this._wrapClick,this)),this.$container.on("mousedown",l.proxy(function(e){this.$el.focus(),e.stopPropagation()},this)),l(document).on("mousedown.cascader",l.proxy(function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)},this)),this.$container.on("blur.wrap",l.proxy(function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)},this)),this.$container.on("click.item","."+this.CLASS.menuNode,l.proxy(this._nodeClick,this)),this.$el.on("keyup.wrap",l.proxy(this._keyup,this)),this.$el.on("input",l.proxy(function(){this.search(this.$el.val())},this))},c.prototype._wrapClick=function(){event.stopPropagation(),this.$el.focus(),this.$container.hasClass(this.CLASS.checkClass.wrapFocus)||this.$container.addClass(this.CLASS.checkClass.wrapFocus),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.find(this.CLASS.menuList).eq(0).find("li."+this.CLASS.checkClass.menuNodeSelected).addClass(this.CLASS.checkClass.nodeAnchor)},c.prototype._nodeClick=function(e){var t,n,s=e.currentTarget?l(e.currentTarget):l(e),i=s.closest("."+this.CLASS.menuWrap),a=(s.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected),s.data("bindData"));a.children?this._loadChildren(s):(i.nextAll().remove(),i=i.prevAll(),t=a.label,n=[a],l.each(i,(e,s)=>{s=l(s).find("li."+this.CLASS.checkClass.menuNodeSelected).data("bindData");t=s.label+this.options.range+t,n.push(s)}),this.$el.val(t).focus(),this.$container.removeClass(this.CLASS.checkClass.wrapFocus),this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),s.prepend(l(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`)),this.$el.data("bindData",a),this.$el.data("bindPathData",n),this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this,a,n),e.stopPropagation())},c.prototype._loadChildren=function(s){this.$el.focus(),s.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected);var t=s.closest("."+this.CLASS.menuWrap),n=s.data("bindData");if(this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),s.addClass(this.CLASS.checkClass.nodeAnchor),n.children){let a=[];s=this.$el.data("bindPathData");s&&0<s.length&&(a=l.map(s,e=>e.value));let e=t.next(),o=((e=e&&0!==e.length?e:(e=l(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">
                                <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">
                                    <ul class="${this.CLASS.menuList}">
                                    </ul>
                                </div>
                            </div>`)).appendTo(this.$dropdownWrap)).nextAll().remove(),e.find("."+this.CLASS.menuList).empty());l.each(n.children,(e,s)=>{var t=l(`<li class="${this.CLASS.menuNode}"></li>`),n=l(`<span class="${this.CLASS.menuNodeLabel}">${s.label}</span>`),i=l(`<svg t="1600158452164"
                                class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"
                                viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"
                                width="200" height="200">
                                <path
                                    d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                    p-id="1182" fill="#515151"></path>
                                <path
                                    d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                    p-id="1183" fill="#515151"></path>
                            </svg>`);t.append(n).data("bindData",s),s.children&&0<s.children.length?t.append(i):0<=a.indexOf(s.value)&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),t.addClass(this.CLASS.checkClass.menuNodeSelected).prepend(l(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),t.appendTo(o)})}else t.nextAll().remove()},c.prototype.destroy=function(){l(this.$el).insertAfter(this.$el_),this.$el.remove()},c.prototype.getLabelList=function(){let n=[],i=this;this.options.data.forEach(function(t){t.children?t.children.forEach(function(s){s.children?s.children.forEach(function(e){n.push({label:""+t.label+i.options.range+s.label+i.options.range+e.label,labels:[t.label,s.label,e.label],value:[t.value,s.value,e.value]})}):n.push({label:""+t.label+i.options.range+s.label,labels:[t.label,s.label],value:[t.value,s.value]})}):n.push({label:t.label,labels:[t.label],value:t.value})}),this.labelList=n},c.prototype.search=function(t){if(t=t&&t.trim()){let e=t.replace(this.options.range,"").replace(" ","").split("");var s=this.labelList.filter(function(s){return s.num=0,e.forEach(function(e){s.label.includes(e)&&s.num++}),s.label.includes(t)&&(s.num+=2),s.num>(1==e.length?0:1)}).sort(function(e,s){return s.num-e.num}).slice(0,10);this.reload(s,!0)}else this.options.keyword=t,this.reload(null,!0)},c.prototype.searchData=function(n){let s=[];this.options.data.forEach(function(e){if(0<=e.label.indexOf(n))s.push(e);else if(e.children){let t=[];e.children.forEach(function(e){if(0<=e.label.indexOf(n))t.push(e);else if(e.children){let s=[];e.children.forEach(function(e){0<=e.label.indexOf(n)&&s.push(e)}),0<s.length&&t.push({value:e.value,label:e.label,children:s})}}),0<t.length&&s.push({label:e.label,value:e.value,children:t})}})},c.prototype.reload=function(e,s){e=e||this.options.data,this.$el.removeData("bindData").removeData("bindPathData"),s||this.$el.val(""),this.$dropdownWrap.empty();let a=this.$el.data("bindData");s=l(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">
                                    <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">
                                        <ul class="${this.CLASS.menuList}">
                                        </ul>
                                    </div>
                                </div>`);let o=s.find("."+this.CLASS.menuList);l.each(e,(e,s)=>{var t=l(`<li class="${this.CLASS.menuNode}"></li>`),n=l(`<span class="${this.CLASS.menuNodeLabel}">${s.label}</span>`),i=l(`<svg t="1600158452164"
                                class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"
                                viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"
                                width="200" height="200">
                                <path
                                    d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                    p-id="1182" fill="#515151"></path>
                                <path
                                    d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                    p-id="1183" fill="#515151"></path>
                            </svg>`);t.append(n).data("bindData",s),s.children&&0<s.children.length?t.append(i):a&&s.value==a.value&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),t.prepend(l(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),o.append(t)}),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.append(s).find(this.CLASS.menuNode).eq(0).focus().addClass(this.CLASS.checkClass.nodeAnchor)},c.prototype._keyup=function(e){switch(e.which){case a:this._movedown();break;case n:this._moveup();break;case t:this._moveleft();break;case i:this._moveright();break;case o:this._keyenter();break;case s:this._keyesc()}},c.prototype._movedown=function(){let e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)?(0===(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length?e=this.$dropdownWrap.find("."+this.CLASS.menuWrap).eq(0).find("."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor):0<e.next().length&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).next().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e)):this.$container.trigger("click")},c.prototype._moveup=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){let e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);0!==e.length&&(0<e.prev().length&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).prev().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e))}},c.prototype._moveleft=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){let e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);var s;0!==e.length&&0!==(s=e.closest("."+this.CLASS.menuWrap).prev()).length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),(e=(0<s.find("li."+this.CLASS.checkClass.menuNodeSelected).length?s.find("li."+this.CLASS.checkClass.menuNodeSelected):s.find("li"+this.CLASS.menuNode)).eq(0)).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))}},c.prototype._moveright=function(){if(this.$container.hasClass(this.CLASS.checkClass.wrapFocus)){let e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor);var s;0!==e.length&&0!==(s=e.closest("."+this.CLASS.menuWrap).next()).length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),e=s.find("li."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))}},c.prototype._keyenter=function(){var e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&0!==(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length&&0===e.closest("."+this.CLASS.menuWrap).next().length&&e.trigger("click")},c.prototype._keyesc=function(){this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&(this.$container.removeClass(this.CLASS.checkClass.wrapFocus),this.$el.focus())},l.fn.zdCascader=function(n){let i,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=l(this),s=e.data("zdCascader"),t=l.extend({},c.DEFAULTS,e.data(),"object"==typeof n&&n);if("string"==typeof n){if(l.inArray(n,c.METHODS)<0)throw new Error("Unknown method: "+n);if(!s)return;i=s[n].apply(s,a),"destroy"===n&&e.removeData("zdCascader")}s||e.data("zdCascader",s=new c(this,t))}),void 0===i?this:i}})(jQuery);