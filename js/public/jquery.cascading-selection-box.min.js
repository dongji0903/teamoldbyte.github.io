(c=>{var s=27,t=37,a=38,n=39,i=40,o=13;function l(e,s){(this.options=s).search&&this.getLabelList(),this.CLASS=l.CLASS,this.$el=c(e),this.$el_=this.$el.clone(),this.init()}l.CLASS={wrap:"zd-cascader-wrap",inputwrap:"zd-input zd-input--suffix",input:"zd-input__inner",iconWrap:"zd-input__suffix",iconInnerWrap:"zd-input__suffix-inner",icon:"icon zd-input__icon zd-icon-arrow-down",dropdownWrap:"zd-cascader__dropdown",dropdownPanel:"zd-cascader-panel",menuWrap:"zd-cascader-menu",menuList:"zd-cascader-menu__list",menuNode:"zd-cascader-node",menuNodeLabel:"zd-cascader-node__label",menuNodePostfix:"zd-cascader-node__postfix",checkClass:{wrapFocus:"is-focus",menuNodeSelected:"in-active-path",nodeSelectedIcon:"is-selected-icon",nodeAnchor:"is-prepare"}},l.DEFAULTS={data:null,range:" / ",onChange:function(e){}},l.METHODS=["reload","destroy"],l.prototype.init=function(){this._construct(),this._event()},l.prototype._construct=function(){this.$container=this.$el.wrap(`<div class="${this.CLASS.wrap}"></div>`).wrap(`<div class="${this.CLASS.inputwrap}"></div>`).addClass(this.CLASS.input).prop("readonly",!this.options.search).closest("."+this.CLASS.wrap),this.$arrow=c(`<span class="zd-input__suffix">
                                    <span class="zd-input__suffix-inner">
                                        <svg t="1600158452164" class="icon zd-input__icon zd-icon-arrow-down" viewBox="0 0 1024 1024"
                                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181" width="200" height="200">
                                            <path
                                                d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                                p-id="1182" fill="#515151"></path>
                                            <path
                                                d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                                p-id="1183" fill="#515151"></path>
                                        </svg>
                                    </span>
                                </span>`).insertAfter(this.$el),this.$dropdownWrap=c(`<div class="${this.CLASS.dropdownPanel}"></div>`).appendTo(this.$container).wrap(`<div class="${this.CLASS.dropdownWrap}"></div>`),this.reload()},l.prototype._event=function(){this.$container.on("click.wrap",c.proxy(this._wrapClick,this)),this.$container.on("mousedown",c.proxy(function(e){this.$el.focus(),e.stopPropagation()},this)),c(document).on("mousedown.cascader",c.proxy(function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)},this)),this.$container.on("blur.wrap",c.proxy(function(){this.$container.removeClass(this.CLASS.checkClass.wrapFocus)},this)),this.$container.on("click.item","."+this.CLASS.menuNode,c.proxy(this._nodeClick,this)),this.$el.on("keyup.wrap",c.proxy(this._keyup,this)),this.$el.on("input",c.proxy(function(e){this.search(this.$el.val())},this))},l.prototype._wrapClick=function(){event.stopPropagation(),this.$el.focus(),this.$container.hasClass(this.CLASS.checkClass.wrapFocus)||this.$container.addClass(this.CLASS.checkClass.wrapFocus),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.find(this.CLASS.menuList).eq(0).find("li."+this.CLASS.checkClass.menuNodeSelected).addClass(this.CLASS.checkClass.nodeAnchor)},l.prototype._nodeClick=function(e){var t,a,s=e.currentTarget?c(e.currentTarget):c(e),n=s.closest("."+this.CLASS.menuWrap),i=(s.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected),s.data("bindData"));i.children?this._loadChildren(s):(n.nextAll().remove(),n=n.prevAll(),t=i.label,a=[i],c.each(n,(e,s)=>{s=c(s).find("li."+this.CLASS.checkClass.menuNodeSelected).data("bindData");t=s.label+this.options.range+t,a.push(s)}),this.$el.val(t).focus(),this.$container.removeClass(this.CLASS.checkClass.wrapFocus),this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),s.prepend(c(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`)),this.$el.data("bindData",i),this.$el.data("bindPathData",a),this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this,i,a),e.stopPropagation())},l.prototype._loadChildren=function(e){this.$el.focus(),e.addClass(this.CLASS.checkClass.menuNodeSelected).siblings().removeClass(this.CLASS.checkClass.menuNodeSelected);var i,o,s=e.closest("."+this.CLASS.menuWrap),t=e.data("bindData");this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),e.addClass(this.CLASS.checkClass.nodeAnchor),t.children?(i=[],(e=this.$el.data("bindPathData"))&&0<e.length&&(i=c.map(e,e=>e.value)),e=s.next(),(e=e&&0!==e.length?e:(e=c(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">
                                        <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">
                                            <ul class="${this.CLASS.menuList}">
                                            </ul>
                                        </div>
                                    </div>`)).appendTo(this.$dropdownWrap)).nextAll().remove(),o=e.find("."+this.CLASS.menuList).empty(),c.each(t.children,(e,s)=>{var t=c(`<li class="${this.CLASS.menuNode}"></li>`),a=c(`<span class="${this.CLASS.menuNodeLabel}">${s.label}</span>`),n=c(`<svg t="1600158452164"
                                        class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"
                                        viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"
                                        width="200" height="200">
                                        <path
                                            d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                            p-id="1182" fill="#515151"></path>
                                        <path
                                            d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                            p-id="1183" fill="#515151"></path>
                                    </svg>`);t.append(a).data("bindData",s),s.children&&0<s.children.length?t.append(n):0<=i.indexOf(s.value)&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),t.addClass(this.CLASS.checkClass.menuNodeSelected).prepend(c(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),t.appendTo(o)})):s.nextAll().remove()},l.prototype.destroy=function(){c(this.$el).insertAfter(this.$el_),this.$el.remove()},l.prototype.getLabelList=function(){var a=[];this.options.data.forEach(function(t){t.children?t.children.forEach(function(s){s.children?s.children.forEach(function(e){a.push({label:`${t.label} / ${s.label} / `+e.label,labels:[t.label,s.label,e.label],value:[t.value,s.value,e.value]})}):a.push({label:t.label+" / "+s.label,labels:[t.label,s.label],value:[t.value,s.value]})}):a.push({label:t.label,labels:[t.label],value:t.value})}),this.labelList=a},l.prototype.search=function(e){var t,s;(e=e&&e.trim())?(t=e.replace(" ","").replace("/","").split(""),s=this.labelList.filter(function(s){return s.num=0,t.forEach(function(e){s.label.includes(e)&&s.num++}),s.label.includes(e)&&(s.num+=2),s.num>(1==t.length?0:1)}).sort(function(e,s){return s.num-e.num}).slice(0,10),this.reload(s,!0)):(this.options.keyword=e,this.reload(null,!0))},l.prototype.searchData=function(a){var s=[];this.options.data.forEach(function(e){var t;0<=e.label.indexOf(a)?s.push(e):e.children&&(t=[],e.children.forEach(function(e){var s;0<=e.label.indexOf(a)?t.push(e):e.children&&(s=[],e.children.forEach(function(e){0<=e.label.indexOf(a)&&s.push(e)}),0<s.length)&&t.push({value:e.value,label:e.label,children:s})}),0<t.length)&&s.push({label:e.label,value:e.value,children:t})})},l.prototype.reload=function(e,s){e=e||this.options.data,this.$el.removeData("bindData").removeData("bindPathData"),s||this.$el.val(""),this.$dropdownWrap.empty();var i=this.$el.data("bindData"),s=c(`<div class="zd-scrollbar ${this.CLASS.menuWrap}">
                                            <div class="zd-cascader-menu__wrap zd-scrollbar__wrap">
                                                <ul class="${this.CLASS.menuList}">
                                                </ul>
                                            </div>
                                        </div>`),o=s.find("."+this.CLASS.menuList);c.each(e,(e,s)=>{var t=c(`<li class="${this.CLASS.menuNode}"></li>`),a=c(`<span class="${this.CLASS.menuNodeLabel}">${s.label}</span>`),n=c(`<svg t="1600158452164"
                                        class="icon zd-input__icon zd-icon-arrow-right ${this.CLASS.menuNodePostfix}"
                                        viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1181"
                                        width="200" height="200">
                                        <path
                                            d="M538.434046 617.504916c0 3.687996-1.403976 7.356548-4.211928 10.1645-5.615904 5.615904-14.713097 5.615904-20.329001 0L364.187513 476.931297c-5.615904-5.615904-5.615904-14.713097 0-20.329001 5.615904-5.615904 14.713097-5.615904 20.329001 0l149.705604 150.739143C537.03007 610.148367 538.434046 613.817943 538.434046 617.504916z"
                                            p-id="1182" fill="#515151"></path>
                                        <path
                                            d="M689.172165 466.767819c0 3.687996-1.403976 7.356548-4.211928 10.1645L534.222117 627.670439c-5.615904 5.615904-14.713097 5.615904-20.329001 0-5.615904-5.615904-5.615904-14.713097 0-20.329001L664.631236 456.603319c5.615904-5.615904 14.713097-5.615904 20.329001 0C687.768189 459.411271 689.172165 463.079824 689.172165 466.767819z"
                                            p-id="1183" fill="#515151"></path>
                                    </svg>`);t.append(a).data("bindData",s),s.children&&0<s.children.length?t.append(n):i&&s.value==i.value&&(this.$dropdownWrap.find("."+this.CLASS.checkClass.nodeSelectedIcon).remove(),t.prepend(c(`<span class="${this.CLASS.checkClass.nodeSelectedIcon}">√</span>`))),o.append(t)}),this.$dropdownWrap.find("li."+this.CLASS.checkClass.nodeAnchor).removeClass(this.CLASS.checkClass.nodeAnchor),this.$dropdownWrap.append(s).find(this.CLASS.menuNode).eq(0).focus().addClass(this.CLASS.checkClass.nodeAnchor)},l.prototype._keyup=function(e){switch(e.which){case i:this._movedown();break;case a:this._moveup();break;case t:this._moveleft();break;case n:this._moveright();break;case o:this._keyenter();break;case s:this._keyesc()}},l.prototype._movedown=function(){var e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)?(0===(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length?e=this.$dropdownWrap.find("."+this.CLASS.menuWrap).eq(0).find("."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor):0<e.next().length&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).next().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e)):this.$container.trigger("click")},l.prototype._moveup=function(){var e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&0!==(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length&&(0<e.prev().length&&(e=e.removeClass(this.CLASS.checkClass.nodeAnchor).prev().addClass(this.CLASS.checkClass.nodeAnchor)),this._loadChildren(e))},l.prototype._moveleft=function(){var e,s;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&0!==(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length&&0!==(s=e.closest("."+this.CLASS.menuWrap).prev()).length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),(e=(0<s.find("li."+this.CLASS.checkClass.menuNodeSelected).length?s.find("li."+this.CLASS.checkClass.menuNodeSelected):s.find("li"+this.CLASS.menuNode)).eq(0)).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))},l.prototype._moveright=function(){var e,s;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&0!==(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length&&0!==(s=e.closest("."+this.CLASS.menuWrap).next()).length&&(e.removeClass(this.CLASS.checkClass.nodeAnchor),e=s.find("li."+this.CLASS.menuNode).eq(0).addClass(this.CLASS.checkClass.nodeAnchor),this._loadChildren(e))},l.prototype._keyenter=function(){var e;this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&0!==(e=this.$dropdownWrap.find("."+this.CLASS.menuNode+"."+this.CLASS.checkClass.nodeAnchor)).length&&0===e.closest("."+this.CLASS.menuWrap).next().length&&e.trigger("click")},l.prototype._keyesc=function(){this.$container.hasClass(this.CLASS.checkClass.wrapFocus)&&(this.$container.removeClass(this.CLASS.checkClass.wrapFocus),this.$el.focus())},c.fn.zdCascader=function(a){var n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=c(this),s=e.data("zdCascader"),t=c.extend({},l.DEFAULTS,e.data(),"object"==typeof a&&a);if("string"==typeof a){if(c.inArray(a,l.METHODS)<0)throw new Error("Unknown method: "+a);if(!s)return;n=s[a].apply(s,i),"destroy"===a&&e.removeData("zdCascader")}s||e.data("zdCascader",s=new l(this,t))}),void 0===n?this:n}})(jQuery);