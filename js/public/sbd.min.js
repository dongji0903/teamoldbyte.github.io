!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).tokenizer=e()}(function(){return function i(r,o,s){function u(n,e){if(!o[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(a)return a(n,!0);throw(e=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",e}t=o[n]={exports:{}},r[n][0].call(t.exports,function(e){return u(r[n][1][e]||e)},t,t.exports,i,r,o,s)}return o[n].exports}for(var a="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,n,t){var i,r=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"],o=(t.setAbbreviations=function(e){i=e||r},t.isCapitalized=function(e){return/^[A-Z][a-z].*|^I$/.test(e)||s(e)}),s=(t.isSentenceStarter=function(e){return o(e)||/``|"|'/.test(e.substring(0,2))},t.isCommonAbbreviation=function(e){e=e.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~i.indexOf(e)},t.isTimeAbbreviation=function(e,n){if(("a.m."===e||"p.m."===e)&&"day"===n.replace(/\W+/g,"").slice(-3).toLowerCase())return!0;return!1},t.isDottedAbbreviation=function(e){e=e.replace(/[\(\)\[\]\{\}]/g,"").match(/(.\.)*/);return e&&0<e[0].length},t.isCustomAbbreviation=function(e){return e.length<=3||o(e)},t.isNameAbbreviation=function(e,n){return 0<n.length&&(!!(e<5&&n[0].length<6&&o(n[0]))||3<=n.filter(function(e){return/[A-Z]/.test(e.charAt(0))}).length)},t.isNumber=function(e,n){return n&&(e=e.slice(n-1,n+2)),!isNaN(e)});t.isPhoneNr=function(e){return e.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)},t.isURL=function(e){return e.match(/([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,63}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)|[\w-]+@[\w-]+\.[\w-]{2,4})/)},t.isConcatenated=function(e){var n=0;if((-1<(n=e.indexOf("."))||-1<(n=e.indexOf("!"))||-1<(n=e.indexOf("?")))&&e.charAt(n+1).match(/[a-zA-Z].*/))return[e.slice(0,n),e.slice(n+1)];return!1},t.isBoundaryChar=function(e){return"."===e||"!"===e||"?"===e}},{}],2:[function(e,n,t){n.exports=function(e,n){var t;return("string"==typeof e||e instanceof String)&&"undefined"!=typeof document?((t=document.createElement("DIV")).innerHTML=e,e=(t.textContent||"").trim()):"object"==typeof e&&e.textContent&&(e=(e.textContent||"").trim()),e}},{}],3:[function(e,n,t){t.endsWithChar=function(e,n){return 1<n.length?-1<n.indexOf(e.slice(-1)):e.slice(-1)===n},t.endsWith=function(e,n){return e.slice(e.length-n.length)===n}},{}],4:[function(e,n,t){var p=e("sanitize-html"),h=e("./stringHelper"),d=e("./Match"),b=" @~@ ",g=b.trim(),m=new RegExp("\\S",""),v=new RegExp("\\n+|[-#=_+*]{4,}","g"),A=new RegExp("\\S+|\\n","g");t.sentences=function(e,n){if(!e||"string"!=typeof e||!e.length)return[];if(!m.test(e))return[];var i={newline_boundaries:!1,html_boundaries:!1,html_boundaries_tags:["p","div","ul","ol"],sanitize:!1,allowed_tags:!1,preserve_whitespace:!1,abbreviations:null};if("boolean"==typeof n)i.newline_boundaries=!0;else for(var t in n)i[t]=n[t];d.setAbbreviations(i.abbreviations),i.newline_boundaries&&(e=e.replace(v,b)),i.html_boundaries&&(c="(<br\\s*\\/?>|<\\/("+i.html_boundaries_tags.join("|")+")>)",c=new RegExp(c,"g"),e=e.replace(c,"$1"+b)),(i.sanitize||i.allowed_tags)&&(i.allowed_tags||(i.allowed_tags=[""]),e=p(e,{allowedTags:i.allowed_tags}));let r,o,s=0;var u;let a=[],f=[];if(!(r=i.preserve_whitespace?(o=e.split(/(<br\s*\/?>|\S+|\n+)/)).filter(function(e,n){return n%2}):e.trim().match(A))||!r.length)return[];for(let e=0,n=r.length;e<n;e++)if(s++,f.push(r[e]),~r[e].indexOf(",")&&(s=0),d.isBoundaryChar(r[e])||h.endsWithChar(r[e],"?!")||r[e]===g)(i.newline_boundaries||i.html_boundaries)&&r[e]===g&&f.pop(),a.push(f),s=0,f=[];else if((h.endsWithChar(r[e],'"')||h.endsWithChar(r[e],"”"))&&(r[e]=r[e].slice(0,-1)),h.endsWithChar(r[e],".")){if(e+1<n){if(2===r[e].length&&isNaN(r[e].charAt(0)))continue;if(d.isCommonAbbreviation(r[e]))continue;if(d.isSentenceStarter(r[e+1])){if(d.isTimeAbbreviation(r[e],r[e+1]))continue;if(d.isNameAbbreviation(s,r.slice(e,6)))continue;if(d.isNumber(r[e+1])&&d.isCustomAbbreviation(r[e]))continue}else{if(h.endsWith(r[e],".."))continue;if(d.isDottedAbbreviation(r[e]))continue;if(d.isNameAbbreviation(s,r.slice(e,5)))continue}}a.push(f),f=[],s=0}else{if(-1<(u=r[e].indexOf("."))){if(d.isNumber(r[e],u))continue;if(d.isDottedAbbreviation(r[e]))continue;if(d.isURL(r[e])||d.isPhoneNr(r[e]))continue}(u=d.isConcatenated(r[e]))&&(f.pop(),f.push(u[0]),a.push(f),f=[],s=0,f.push(u[1]))}f.length&&a.push(f);var c=(a=a.filter(function(e){return 0<e.length})).slice(1).reduce(function(e,n){var t=e[e.length-1];return 1===t.length&&/^.{1,2}[.]$/.test(t[0])&&!/[.]/.test(n[0])?(e.pop(),e.push(t.concat(n))):e.push(n),e},[a[0]]).map(function(n,t){if(!i.preserve_whitespace||i.newline_boundaries||i.html_boundaries)return n.join(" ");{let e=2*n.length;return 0===t&&(e+=1),o.splice(0,e).join("")}});let l=[];return c.forEach(e=>{e=e.split(/(?<=[.!?]['’"”]?['’"”])\s+(?=['‘"“]*[A-Z0-9])/);l.push(...e)}),l}},{"./Match":1,"./stringHelper":3,"sanitize-html":2}]},{},[4])(4)});